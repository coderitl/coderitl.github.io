<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
  <title>Docker-应用容器 | coder-itl</title>
  <meta name="author" content="coder-itl">
  <meta name="copyright" content="coder-itl">
  <meta name="format-detection" content="telephone=no">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Docker-应用容器安装Docker 官网  官网(①): https://www.docker.com/ centos(②): https://docs.docker.com/engine/install/centos/    选择Linux(①) 选择对应系统安装(②)          卸载旧版本 12345678sudo yum remove docker \">
  <meta property="og:type" content="article">
  <meta property="og:title" content="Docker-应用容器">
  <meta property="og:url" content="https://coderitl.github.io/2022/02/09/14869.html">
  <meta property="og:site_name" content="coder-itl">
  <meta property="og:description" content="Docker-应用容器安装Docker 官网  官网(①): https://www.docker.com/ centos(②): https://docs.docker.com/engine/install/centos/    选择Linux(①) 选择对应系统安装(②)          卸载旧版本 12345678sudo yum remove docker \">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:image" content="ttps://i.328888.xyz/2023/04/01/i2X7Tt.png">
  <meta property="article:published_time" content="2022-02-09T00:36:47.000Z">
  <meta property="article:modified_time" content="2023-06-22T11:51:59.462Z">
  <meta property="article:author" content="coder-itl">
  <meta property="article:tag" content="coder-itl,Java,HTML+CSS,Hexo,MYSQL">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:image" content="ttps://i.328888.xyz/2023/04/01/i2X7Tt.png">
  <link rel="shortcut icon" href="https://img-blog.csdnimg.cn/f44f454681b440f3a8ae5f086d3c07d9.png">
  <link rel="canonical" href="https://coderitl.github.io/2022/02/09/14869.html">
  <link rel="preconnect" href="//cdn.jsdelivr.net">
  <link rel="preconnect" href="//busuanzi.ibruce.info">
  <link rel="stylesheet" href="/css/index.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'">
  <script>
    const GLOBAL_CONFIG = {
      root: '/',
      algolia: undefined,
      localSearch:
      {
        "path": "/search.xml",
        "preload": false,
        "languages":
        {
          "hits_empty": "找不到您查询的内容：${query}"
        }
      },
      translate: undefined,
      noticeOutdate: undefined,
      highlight:
      {
        "plugin": "highlighjs",
        "highlightCopy": true,
        "highlightLang": false,
        "highlightHeightLimit": false
      },
      copy:
      {
        success: '复制成功',
        error: '复制错误',
        noSupport: '浏览器不支持'
      },
      relativeDate:
      {
        homepage: false,
        post: false
      },
      runtime: '',
      date_suffix:
      {
        just: '刚刚',
        min: '分钟前',
        hour: '小时前',
        day: '天前',
        month: '个月前'
      },
      copyright: undefined,
      lightbox: 'fancybox',
      Snackbar: undefined,
      source:
      {
        justifiedGallery:
        {
          js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
          css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
        }
      },
      isPhotoFigcaption: false,
      islazyload: true,
      isAnchor: false,
      percent:
      {
        toc: true,
        rightside: false,
      }
    }

  </script>
  <script id="config-diff">
    var GLOBAL_CONFIG_SITE = {
      title: 'Docker-应用容器',
      isPost: true,
      isHome: false,
      isHighlightShrink: false,
      isToc: true,
      postUpdate: '2023-06-22 19:51:59'
    }

  </script><noscript>
    <style type="text/css">
      #nav
      {
        opacity: 1
      }

      .justified-gallery img
      {
        opacity: 1
      }

      #recent-posts time,
      #post-meta time
      {
        display: inline !important
      }

    </style>
  </noscript>
  <script>
    (win =>
    {
      win.saveToLocal = {
        set: function setWithExpiry(key, value, ttl)
        {
          if (ttl === 0) return
          const now = new Date()
          const expiryDay = ttl * 86400000
          const item = {
            value: value,
            expiry: now.getTime() + expiryDay,
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
        get: function getWithExpiry(key)
        {
          const itemStr = localStorage.getItem(key)
          if (!itemStr)
          {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = new Date()
          if (now.getTime() > item.expiry)
          {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
      win.getScript = url => new Promise((resolve, reject) =>
      {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function ()
        {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(script)
      })
      win.getCSS = url => new Promise((resolve, reject) =>
      {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        link.onload = () => resolve()
        link.onerror = () => reject()
        document.head.appendChild(link)
      })
      win.activateDarkMode = function ()
      {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null)
        {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function ()
      {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null)
        {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
      if (t === 'dark') activateDarkMode()
      else if (t === 'light') activateLightMode()
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined)
      {
        if (asideStatus === 'hide')
        {
          document.documentElement.classList.add('hide-aside')
        }
        else
        {
          document.documentElement.classList.remove('hide-aside')
        }
      }
      const detectApple = () =>
      {
        if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent))
        {
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)

  </script>
  <link rel="stylesheet" href="/css/modify.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/l-lin/font-awesome-animation/dist/font-awesome-animation.min.css" media="defer" onload="this.media='all'">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/coderitl/FileJsDeliver@v1.1.12/css/gitcalendar.css" media="defer" onload="this.media='all'">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/coderitl/FileJsDeliver@v1.1.13/swiper/swiper.min.css" media="defer" onload="this.media='all'">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/coderitl/FileJsDeliver@v1.1.13/swiper/swiperstyle.css" media="defer" onload="this.media='all'">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/animate-css/animate.css@3.7.2/animate.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome/css/font-awesome.min.css" media="defer">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/coderitl/globalfont@v0.0.4/my.css">
  <link rel="stylesheet" href="/css/my.css">
  <meta name="referrer" content="no-referrer"><!-- hexo injector head_end start -->
  <style>
    body hanla:after
    {
      content: ' ';
      display: inline;
      font-family: inherit;
      font-size: 0.45em;
    }

    html code hanla,
    html pre hanla,
    html kbd hanla,
    html samp hanla,
    html ruby hanla,
    html .tag-list-item hanla
    {
      display: none;
    }

    html ol>hanla,
    html ul>hanla
    {
      display: none;
    }

  </style>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-card-history/baiduhistory/css/main.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-double-row-display@1.00/cardlistpost.min.css">
  <style>
    #recent-posts>.recent-post-item>.recent-post-info>.article-meta-wrap>.tags:before
    {
      content: "\A";
      white-space: pre;
    }

    #recent-posts>.recent-post-item>.recent-post-info>.article-meta-wrap>.tags>.article-meta__separator
    {
      display: none
    }

  </style>
  <link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.css" media="print" onload="this.media='all'">
  <link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiperstyle.css" media="print" onload="this.media='all'">
  <link rel="stylesheet" href="https://npm.elemecdn.com/hexo-filter-gitcalendar/lib/gitcalendar.css" media="print" onload="this.media='all'">
  <link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/font-awesome-animation.min.css" media="defer" onload="this.media='all'">
  <link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/tag_plugins.css" media="defer" onload="this.media='all'">
  <script src="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/carousel-touch.js"></script><!-- hexo injector head_end end -->
  <meta name="generator" content="Hexo 5.4.2">
  <link rel="alternate" href="/atom.xml" title="coder-itl" type="application/atom+xml">
</head>

<body>
  <div id="loading-box">
    <div class="loading-left-bg"></div>
    <div class="loading-right-bg"></div>
    <div class="spinner-box">
      <div class="configure-border-1">
        <div class="configure-core"></div>
      </div>
      <div class="configure-border-2">
        <div class="configure-core"></div>
      </div>
      <div class="loading-word">加载中...</div>
    </div>
  </div>
  <script>
    const preloader = {
      endLoading: () =>
      {
        document.body.style.overflow = 'auto';
        document.getElementById('loading-box').classList.add("loaded")
      },
      initLoading: () =>
      {
        document.body.style.overflow = '';
        document.getElementById('loading-box').classList.remove("loaded")
      }
    }
    window.addEventListener('load', () =>
    {
      preloader.endLoading()
    })
    if (true)
    {
      document.addEventListener('pjax:send', () =>
      {
        preloader.initLoading()
      })
      document.addEventListener('pjax:complete', () =>
      {
        preloader.endLoading()
      })
    }

  </script>
  <div id="web_bg"></div>
  <div id="sidebar">
    <div id="menu-mask"></div>
    <div id="sidebar-menus">
      <div class="avatar-img is-center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://i.328888.xyz/2023/03/19/MJUXa.jpeg" onerror="onerror=null;src='https://i.328888.xyz/2023/03/20/P3kfC.gif'" alt="avatar"></div>
      <div class="sidebar-site-data site-data is-center"><a href="/archives/">
          <div class="headline">
            <hanla></hanla>文章<hanla></hanla>
          </div>
          <div class="length-num">119</div>
        </a><a href="/tags/">
          <div class="headline">
            <hanla></hanla>标签<hanla></hanla>
          </div>
          <div class="length-num">21</div>
        </a><a href="/categories/">
          <div class="headline">
            <hanla></hanla>分类<hanla></hanla>
          </div>
          <div class="length-num">13</div>
        </a></div>
      <hr>
      <div class="menus_items">
        <div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div>
        <div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div>
        <div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div>
        <div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div>
        <div class="menus_item"><a class="site-page" href="/Timeline/"><i class="fa-fw fab fa-docker"></i><span> 日志</span></a></div>
        <div class="menus_item"><a class="site-page" href="/Java-%E5%AD%A6%E4%B9%A0%E8%B7%AF%E7%BA%BF/"><i class="fa-fw fas fa-link"></i><span> 学习路线</span></a></div>
        <div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于<hanla></hanla></span></a></div>
      </div>
    </div>
  </div>
  <div class="post" id="body-wrap">
    <header class="post-bg" id="page-header" style="background-image: url('ttps://i.328888.xyz/2023/04/01/i2X7Tt.png')">
      <nav id="nav"><span id="blog-info"><a href="/" title="coder-itl"><span class="site-name">coder-itl</span></a></span>
        <div id="menus">
          <div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div>
          <div class="menus_items">
            <div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div>
            <div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div>
            <div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div>
            <div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div>
            <div class="menus_item"><a class="site-page" href="/Timeline/"><i class="fa-fw fab fa-docker"></i><span> 日志</span></a></div>
            <div class="menus_item"><a class="site-page" href="/Java-%E5%AD%A6%E4%B9%A0%E8%B7%AF%E7%BA%BF/"><i class="fa-fw fas fa-link"></i><span> 学习路线</span></a></div>
            <div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于<hanla></hanla></span></a></div>
          </div>
          <div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div>
        </div>
      </nav>
      <div id="post-info">
        <h1 class="post-title">Docker-应用容器</h1>
        <div id="post-meta">
          <div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于<hanla></hanla></span><time class="post-meta-date-created" datetime="2022-02-09T00:36:47.000Z" title="发表于 2022-02-09 08:36:47">2022-02-09</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于<hanla></hanla></span><time class="post-meta-date-updated" datetime="2023-06-22T11:51:59.462Z" title="更新于 2023-06-22 19:51:59">2023-06-22</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Docker/">Docker</a></span></div>
          <div class="meta-secondline"><span class="post-meta-separator">|</span><span id="" data-flag-title="Docker-应用容器"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="twikoo_visitors"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div>
        </div>
      </div>
    </header>
    <main class="layout" id="content-inner">
      <div id="post"><div class="top-img" style="background-image: url('ttps://i.328888.xyz/2023/04/01/i2X7Tt.png');"></div>
        <article class="post-content" id="article-container">
          <meta name="referrer" content="no-referrer">
          <h3 id="Docker-应用容器"><a href="#Docker-应用容器" class="headerlink" title="Docker-应用容器"></a>Docker-应用容器</h3>
          <h4 id="安装Docker"><a href="#安装Docker" class="headerlink" title="安装Docker"></a>安装<hanla></hanla>Docker</h4>
          <ul>
            <li>
              <p>官网</p>
              <blockquote>
                <p>官网<hanla></hanla>(<code>①</code>): <a target="_blank" rel="external nofollow noopener noreferrer" href="https://www.docker.com/">https://www.docker.com/</a></p>
                <p>centos(<code>②</code>): <a target="_blank" rel="external nofollow noopener noreferrer" href="https://docs.docker.com/engine/install/centos/">https://docs.docker.com/engine/install/centos/</a></p>
                <table>
                  <thead>
                    <tr>
                      <th align="center">选择<hanla></hanla><code>Linux</code>(<code>①</code>)</th>
                      <th align="center">选择对应系统安装<hanla></hanla>(<code>②</code>)</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/7307f44c3b9b4cfda1f5ce625aeed654.png"></td>
                      <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/fc0596d2381b4fa7ab0b04ebeae77bd4.png"></td>
                    </tr>
                  </tbody>
                </table>
              </blockquote>
            </li>
            <li>
              <p>卸载旧版本</p>
              <figure class="highlight properties">
                <table>
                  <tbody>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="attr">sudo</span> <span class="string">yum remove docker \</span></span><br><span class="line"><span class="string">                 docker-client \</span></span><br><span class="line"><span class="string">                 docker-client-latest \</span></span><br><span class="line"><span class="string">                 docker-common \</span></span><br><span class="line"><span class="string">                 docker-latest \</span></span><br><span class="line"><span class="string">                 docker-latest-logrotate \</span></span><br><span class="line"><span class="string">                 docker-logrotate \</span></span><br><span class="line"><span class="string">                 docker-engine</span></span><br></pre>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </figure>
            </li>
            <li>
              <p>下载关于<hanla></hanla><code>Docker</code>
                <hanla></hanla>的依赖环境
              </p>
              <figure class="highlight properties">
                <table>
                  <tbody>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="attr">yum</span> <span class="string">install -y yum-utils  device-mapper-persistent-data  lvm2</span></span><br></pre>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </figure>
            </li>
            <li>
              <p>设置镜像仓库</p>
              <figure class="highlight properties">
                <table>
                  <tbody>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="attr">yum-config-manager</span> <span class="string">--add-repo https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span></span><br><span class="line"><span class="comment"># 选择一个<hanla></hanla></span></span><br><span class="line"><span class="attr">sudo</span> <span class="string">yum-config-manager --add-repo https://mirrors.ustc.edu.cn/docker-ce/linux/centos/docker-ce.repo</span></span><br></pre>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </figure>
            </li>
            <li>
              <p>安装<hanla></hanla><code>docker</code></p>
              <figure class="highlight properties">
                <table>
                  <tbody>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="comment"># 更新 yum 软件包索引<hanla></hanla></span></span><br><span class="line"><span class="attr">yum</span> <span class="string">makecache fast</span></span><br><span class="line"><span class="comment"># 安装最新版本<hanla></hanla></span></span><br><span class="line"><span class="attr">sudo</span> <span class="string">yum install -y docker-ce docker-ce-cli containerd.io docker-compose-plugin</span></span><br></pre>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </figure>
            </li>
            <li>
              <p>启动<hanla></hanla><code>docker</code>
                <hanla></hanla>并设置开机自动启动
              </p>
              <figure class="highlight properties">
                <table>
                  <tbody>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="comment"># 启动<hanla></hanla></span></span><br><span class="line"><span class="attr">systemctl</span> <span class="string">start docker</span></span><br><span class="line"><span class="comment"># 设置开机自启<hanla></hanla></span></span><br><span class="line"><span class="attr">systemctl</span> <span class="string">enable docker</span></span><br><span class="line"></span><br></pre>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </figure>
            </li>
            <li>
              <p>配置镜像加速</p>
              <figure class="highlight properties">
                <table>
                  <tbody>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="comment"># 可以通过修改<hanla></hanla>daemon<hanla></hanla>配置文件<hanla></hanla>/etc/docker/daemon.json 来使用加速器<hanla></hanla></span></span><br><span class="line"><span class="attr">sudo</span> <span class="string">mkdir -p /etc/docker</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># 添加国内镜像【sudo<hanla></hanla>开始复制一直到 EOF 结束】</span></span><br><span class="line"><span class="attr">sudo</span> <span class="string">tee /etc/docker/daemon.json &lt;&lt;-'EOF'</span></span><br><span class="line"><span class="attr">{</span></span><br><span class="line">    <span class="attr">"registry-mirrors"</span>:<span class="string">[</span></span><br><span class="line">    	<span class="attr">"https</span>:<span class="string">//eyy45bvx.mirror.aliyuncs.com",</span></span><br><span class="line">        <span class="attr">"https</span>:<span class="string">//hub-mirror.c.163.com",</span></span><br><span class="line">        <span class="attr">"https</span>:<span class="string">//registry.aliyuncs.com",</span></span><br><span class="line">        <span class="attr">"https</span>:<span class="string">//registry.docker-cn.com",</span></span><br><span class="line">        <span class="attr">"https</span>:<span class="string">//docker.mirrors.ustc.edu.cn"</span></span><br><span class="line">    <span class="attr">]</span></span><br><span class="line"><span class="attr">}</span></span><br><span class="line"><span class="attr">EOF</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># 重新加载 daemon 配置<hanla></hanla></span></span><br><span class="line"><span class="attr">sudo</span> <span class="string">systemctl daemon-reload</span></span><br><span class="line"><span class="comment"># 重启 docker</span></span><br><span class="line"><span class="attr">sudo</span> <span class="string">systemctl restart docker</span></span><br></pre>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </figure>
              <ul>
                <li>
                  <p>可以获取自己的阿里云地址</p>
                  <ul>
                    <li>
                      <p>登录阿里云</p>
                    </li>
                    <li>
                      <p>进入控制台</p>
                    </li>
                    <li>
                      <p>搜索<hanla></hanla><code>[容器镜像服务](https://cr.console.aliyun.com/cn-hangzhou/instances)</code></p>
                      <table>
                        <thead>
                          <tr>
                            <th align="center">获取镜像加速器地址</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr>
                            <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/4256e8099fd44cefa757e1d75b9a35d2.png"></td>
                          </tr>
                        </tbody>
                      </table>
                    </li>
                  </ul>
                </li>
              </ul>
            </li>
            <li>
              <p>查看镜像加速是否生效</p>
              <figure class="highlight properties">
                <table>
                  <tbody>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="attr">docker</span> <span class="string">info</span></span><br></pre>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </figure>
              <table>
                <thead>
                  <tr>
                    <th align="center">加速生效</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/b611f7e840ca48dca0fb9bfcaae4e24c.png"></td>
                  </tr>
                </tbody>
              </table>
            </li>
            <li>
              <p>测试环境</p>
              <figure class="highlight properties">
                <table>
                  <tbody>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="attr">docker</span> <span class="string">run hello-world</span></span><br></pre>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </figure>
            </li>
            <li>
              <p>输出</p>
              <table>
                <thead>
                  <tr>
                    <th align="center">测试环境</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/4bfde2cfb41b420a8a88e4bc4432cbd2.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAY29kZXItaXRs,size_20,color_FFFFFF,t_70,g_se,x_16" alt="成功安装Docker"></td>
                  </tr>
                </tbody>
              </table>
            </li>
          </ul>
          <h4 id="卸载Docker"><a href="#卸载Docker" class="headerlink" title="卸载Docker"></a>卸载<hanla></hanla>Docker</h4>
          <ul>
            <li>
              <p>查看运行状态</p>
              <figure class="highlight properties">
                <table>
                  <tbody>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="attr">systemctl</span> <span class="string">status docker </span></span><br></pre>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </figure>
            </li>
            <li>
              <p>停止服务</p>
              <figure class="highlight properties">
                <table>
                  <tbody>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="attr">systemctl</span> <span class="string">stop docker</span></span><br><span class="line"><span class="comment"># 出现如下,<hanla></hanla>使用该命令<hanla></hanla></span></span><br><span class="line"><span class="attr">sudo</span> <span class="string">systemctl stop docker.socket</span></span><br></pre>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </figure>
              <table>
                <thead>
                  <tr>
                    <th align="center">停止</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/9ebdfc08366041299441ef01da7807ff.png"></td>
                  </tr>
                </tbody>
              </table>
            </li>
            <li>
              <p>查看<hanla></hanla><code>yum</code>
                <hanla></hanla>安装的<hanla></hanla><code>docker</code>
                <hanla></hanla>文件包
              </p>
              <figure class="highlight properties">
                <table>
                  <tbody>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="attr">yum</span> <span class="string">list installed | grep docker</span></span><br></pre>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </figure>
              <table>
                <thead>
                  <tr>
                    <th align="center">已下载列表</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/9a8ad38c88994010bc57025e99a56058.png"></td>
                  </tr>
                </tbody>
              </table>
            </li>
            <li>
              <p>删除所有安装的<hanla></hanla><code>docker</code>
                <hanla></hanla>文件包
              </p>
              <figure class="highlight properties">
                <table>
                  <tbody>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="comment"># 查看<hanla></hanla></span></span><br><span class="line"><span class="attr">rpm</span> <span class="string">-qa|grep docker</span></span><br><span class="line"><span class="comment"># 删除列出的文件<hanla></hanla></span></span><br><span class="line"><span class="attr">yum</span> <span class="string">-y remove xxx</span></span><br></pre>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </figure>
              <table>
                <thead>
                  <tr>
                    <th align="center">删除</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/9626bb9e53c646eba1dd8ec970124b11.png"></td>
                  </tr>
                </tbody>
              </table>
            </li>
            <li>
              <p>删除<hanla></hanla><code>docker</code>
                <hanla></hanla>镜像
              </p>
              <figure class="highlight properties">
                <table>
                  <tbody>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="attr">rm</span> <span class="string">-rf /var/lib/docker</span></span><br></pre>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </figure>
            </li>
          </ul>
          <h4 id="中央仓库"><a href="#中央仓库" class="headerlink" title="中央仓库"></a>中央仓库</h4>
          <ol>
            <li>
              <p><code>Docker</code>
                <hanla></hanla>官方的中央仓库: 这个仓库是镜像最全的,<hanla></hanla>但是下载速度较慢<hanla></hanla><code>https://hub.docker.com/</code>
              </p>
            </li>
            <li>
              <p>国内镜像网站:<code>
                  <hanla></hanla>网易蜂巢,daoCloud...
                </code></p>
              <figure class="highlight properties">
                <table>
                  <tbody>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br><span class="line">2</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="attr">https</span>:<span class="string">//c.163yun.com/hub#/home</span></span><br><span class="line"><span class="attr">http</span>:<span class="string">//hub.daocloud.io (推荐使用,<hanla></hanla>速度加载较快)</span></span><br></pre>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </figure>
            </li>
            <li>
              <p>在公司内部会采用私服的方式拉取镜像<hanla></hanla>(<code>添加相关配置</code>)</p>
              <figure class="highlight properties">
                <table>
                  <tbody>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="comment"># 编辑 | 新建该配置文件<hanla></hanla></span></span><br><span class="line"><span class="attr">vim</span> <span class="string">/etc/docker/daemon.json</span></span><br><span class="line"><span class="comment"># 添加如下信息<hanla></hanla></span></span><br><span class="line"><span class="attr">{</span></span><br><span class="line">	<span class="attr">"registry-mirrors"</span>: <span class="string">["https://register.docker-cn.com"],</span></span><br><span class="line"><span class="comment">	 # 私服</span></span><br><span class="line">	<span class="attr">"insecure-registries"</span>: <span class="string">["ip:port"]</span></span><br><span class="line"><span class="attr">}</span></span><br><span class="line"><span class="comment"># 重新启动两个服务<hanla></hanla></span></span><br><span class="line"><span class="attr">systemctl</span> <span class="string">daemon-reload</span></span><br><span class="line"><span class="attr">systemctl</span> <span class="string">restart docker</span></span><br></pre>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </figure>
            </li>
          </ol>
          <h4 id="镜像的操作"><a href="#镜像的操作" class="headerlink" title="镜像的操作"></a>镜像的操作</h4>
          <ul>
            <li>
              <p>拉取环境</p>
              <figure class="highlight properties">
                <table>
                  <tbody>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="comment"># http://hub.daocloud.io/ 在此处搜索</span></span><br><span class="line"><span class="comment"># 拉取镜像到本地<hanla></hanla></span></span><br><span class="line"><span class="attr">docker</span> <span class="string">pull 镜像名称<hanla></hanla>[:tag]</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># Eg</span></span><br><span class="line"><span class="attr">docker</span> <span class="string">pull daocloud.io/library/tomcat:8.0.45</span></span><br></pre>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </figure>
              <ul>
                <li>
                  <p>拉取流程</p>
                  <table>
                    <thead>
                      <tr>
                        <th align="center">拉取所需环境</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/849913d02b474ac6b8c2a58cb97b9dd3.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAY29kZXItaXRs,size_20,color_FFFFFF,t_70,g_se,x_16"></td>
                      </tr>
                    </tbody>
                  </table>
                </li>
                <li>
                  <p>拉取过程</p>
                  <table>
                    <thead>
                      <tr>
                        <th align="center">拉取过程</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/c308d999cf9345cf9533c072fb76c998.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAY29kZXItaXRs,size_20,color_FFFFFF,t_70,g_se,x_16"></td>
                      </tr>
                    </tbody>
                  </table>
                </li>
              </ul>
            </li>
          </ul>
          <h4 id="Run-流程"><a href="#Run-流程" class="headerlink" title="Run-流程"></a>Run-流程</h4>
          <ul>
            <li>
              <p>流程</p>
              <table>
                <thead>
                  <tr>
                    <th align="center"><code>docker run 的 run</code>
                      <hanla></hanla>流程
                    </th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/42392cb82f754a87a541351732138fae.png"></td>
                  </tr>
                </tbody>
              </table>
            </li>
          </ul>
          <h4 id="Docker-常用命令"><a href="#Docker-常用命令" class="headerlink" title="Docker-常用命令"></a>Docker-常用命令</h4>
          <h5 id="帮助启动类命令"><a href="#帮助启动类命令" class="headerlink" title="帮助启动类命令"></a>帮助启动类命令</h5>
          <ul>
            <li>
              <p>启动</p>
              <figure class="highlight properties">
                <table>
                  <tbody>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="attr">systemctl</span> <span class="string">start docker</span></span><br></pre>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </figure>
            </li>
            <li>
              <p>停止</p>
              <figure class="highlight properties">
                <table>
                  <tbody>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="attr">systemctl</span> <span class="string">stop docker</span></span><br></pre>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </figure>
            </li>
            <li>
              <p>重启</p>
              <figure class="highlight properties">
                <table>
                  <tbody>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="attr">systemctl</span> <span class="string">restart docker</span></span><br></pre>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </figure>
            </li>
            <li>
              <p>查看状态</p>
              <figure class="highlight properties">
                <table>
                  <tbody>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="attr">systemctl</span> <span class="string">status docker</span></span><br></pre>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </figure>
            </li>
            <li>
              <p>开机启动</p>
              <figure class="highlight properties">
                <table>
                  <tbody>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="attr">systemctl</span> <span class="string">enable docker</span></span><br></pre>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </figure>
            </li>
            <li>
              <p>查看<hanla></hanla><code>docker</code>
                <hanla></hanla>概要信息
              </p>
              <figure class="highlight properties">
                <table>
                  <tbody>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="attr">docker</span> <span class="string">info</span></span><br></pre>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </figure>
            </li>
            <li>
              <p>查看<hanla></hanla><code>docker</code>
                <hanla></hanla>总体帮助命令
              </p>
              <figure class="highlight properties">
                <table>
                  <tbody>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="attr">docker</span> <span class="string">--help</span></span><br></pre>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </figure>
            </li>
            <li>
              <p>查看<hanla></hanla><code>docker</code>
                <hanla></hanla>命令帮助文档
              </p>
              <figure class="highlight properties">
                <table>
                  <tbody>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="attr">docker</span> <span class="string">具体命令 --help</span></span><br></pre>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </figure>
            </li>
          </ul>
          <h5 id="镜像命令"><a href="#镜像命令" class="headerlink" title="镜像命令"></a>镜像命令</h5>
          <ul>
            <li>
              <p>列出本地主机上的镜像</p>
              <figure class="highlight properties">
                <table>
                  <tbody>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="attr">docker</span> <span class="string">images -[options]</span></span><br><span class="line"></span><br><span class="line"><span class="attr">options</span>:<span class="string"></span></span><br><span class="line">	<span class="attr">-a</span>: <span class="string">列出本地所有的镜像<hanla></hanla>(含历史映像层)</span></span><br><span class="line">	<span class="attr">-q</span>: <span class="string">只显示镜像 ID</span></span><br></pre>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </figure>
              <table>
                <thead>
                  <tr>
                    <th align="center">查看全部本地的镜像</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/06486173b6514da89d5ec7a036884211.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAY29kZXItaXRs,size_20,color_FFFFFF,t_70,g_se,x_16"></td>
                  </tr>
                </tbody>
              </table>
              <ul>
                <li>
                  <p><code>REPOSITORY</code>: 表示镜像的仓库源</p>
                </li>
                <li>
                  <p><code>TAG</code>: 镜像的标签版本号</p>
                </li>
                <li>
                  <p><code> IMAGE ID</code>: 镜像<hanla></hanla><code>ID</code></p>
                </li>
                <li>
                  <p><code>CREATED</code>: 镜像创建时间</p>
                </li>
                <li>
                  <p><code>SIZE</code>: 镜像大小</p>
                  <blockquote>
                    <p>用一仓库源可以有多个<hanla></hanla><code>TAG</code>
                      <hanla></hanla>版本,<hanla></hanla>代表这个仓库源的不同个版本，我们使用<hanla></hanla><code>REPOSITORY:TAG</code>
                      <hanla></hanla>来定义不同的镜像
                    </p>
                    <p>如果你不指定一个镜像的版本标签,<hanla></hanla>例如你只使用<hanla></hanla><code>ubuntu</code>,<code>docker</code>
                      <hanla></hanla>将默认使用<hanla></hanla><code>ubuntu:latest</code>
                      <hanla></hanla>镜像
                    </p>
                  </blockquote>
                </li>
              </ul>
            </li>
            <li>
              <p>搜索某个镜像</p>
              <figure class="highlight properties">
                <table>
                  <tbody>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="attr">docker</span> <span class="string">search 某个镜像名称</span></span><br><span class="line"><span class="comment"># Eg: 查看排名前 5 的<hanla></hanla></span></span><br><span class="line"><span class="attr">docker</span> <span class="string">search --limit 5 redis</span></span><br></pre>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </figure>
              <table>
                <thead>
                  <tr>
                    <th align="center">信息</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/1b3f6afd6ee34b019e376840bee4364f.png"></td>
                  </tr>
                </tbody>
              </table>
              <table>
                <thead>
                  <tr>
                    <th align="center">参数</th>
                    <th align="center">说明</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td align="center">NAME</td>
                    <td align="center">镜像名称</td>
                  </tr>
                  <tr>
                    <td align="center">DESCRIPTION</td>
                    <td align="center">镜像说明</td>
                  </tr>
                  <tr>
                    <td align="center">STARS</td>
                    <td align="center">点赞数</td>
                  </tr>
                  <tr>
                    <td align="center">OFFICIAL</td>
                    <td align="center">是否是官方的</td>
                  </tr>
                  <tr>
                    <td align="center">AUTOMA</td>
                    <td align="center">是否是自动构建的</td>
                  </tr>
                </tbody>
              </table>
            </li>
            <li>
              <p>拉取某个镜像</p>
              <figure class="highlight properties">
                <table>
                  <tbody>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="attr">docker</span> <span class="string">pull 某个镜像名称<hanla></hanla>[:TAG]</span></span><br><span class="line"><span class="comment"># 没有 TAG 就是最新版,<hanla></hanla>等价于如下<hanla></hanla></span></span><br><span class="line"><span class="attr">docker</span> <span class="string">pull 镜像名称:latest</span></span><br></pre>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </figure>
            </li>
            <li>
              <p>查看占用空间</p>
              <figure class="highlight properties">
                <table>
                  <tbody>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="attr">docker</span> <span class="string">system df 镜像<hanla></hanla>/<hanla></hanla>容器<hanla></hanla>/<hanla></hanla>数据卷所占用的空间</span></span><br></pre>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </figure>
              <table>
                <thead>
                  <tr>
                    <th align="center">空间信息</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/b0e83484f4994ea59171b723de8e677e.png"></td>
                  </tr>
                </tbody>
              </table>
            </li>
            <li>
              <p>删除镜像</p>
              <figure class="highlight properties">
                <table>
                  <tbody>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="comment"># 删除单个， -f 参数可以强制删除<hanla></hanla></span></span><br><span class="line"><span class="attr">docker</span> <span class="string">rmi 某个镜像名字<hanla></hanla>id</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># 删除多个<hanla></hanla></span></span><br><span class="line"><span class="attr">docker</span> <span class="string">rmi -f 镜像名<hanla></hanla>1:TAG 镜像名<hanla></hanla>2:TAG </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># 删除全部<hanla></hanla></span></span><br><span class="line"><span class="attr">docker</span> <span class="string">rmi -f $(docker images -qa)</span></span><br></pre>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </figure>
              <table>
                <thead>
                  <tr>
                    <th align="center">删除前与删除后</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/0863bf20fbdd45898410459cacdcd229.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAY29kZXItaXRs,size_20,color_FFFFFF,t_70,g_se,x_16"></td>
                  </tr>
                </tbody>
              </table>
            </li>
            <li>
              <p>镜像导出与导入</p>
              <figure class="highlight properties">
                <table>
                  <tbody>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="comment"># 将本地镜像导出<hanla></hanla></span></span><br><span class="line"><span class="attr">docker</span> <span class="string">save -o 导出的路径 镜像<hanla></hanla>id</span></span><br><span class="line"><span class="comment"># 加载本地的镜像文件<hanla></hanla></span></span><br><span class="line"><span class="attr">docker</span> <span class="string">load -i 镜像文件</span></span><br><span class="line"><span class="comment"># 修改镜像名称<hanla></hanla></span></span><br><span class="line"><span class="attr">docker</span> <span class="string">tag 镜像<hanla></hanla>id 新镜像名称:<hanla></hanla>版本</span></span><br></pre>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </figure>
              <table>
                <thead>
                  <tr>
                    <th align="center">使用流程</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/3f79d2bf67174b709884a72c65106f67.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAY29kZXItaXRs,size_20,color_FFFFFF,t_70,g_se,x_16"></td>
                  </tr>
                </tbody>
              </table>
            </li>
            <li>
              <p>面试题: 谈谈<hanla></hanla><code>docker</code>
                <hanla></hanla>虚悬镜像是什么?
              </p>
              <ul>
                <li>
                  <p>虚悬镜像指的是</p>
                  <blockquote>
                    <p>仓库名、标签都是<hanla></hanla><code>&lt;none&gt;</code>
                      <hanla></hanla>的镜像,<hanla></hanla>俗称<code>虚悬镜像<hanla></hanla>(dangling image)</code>
                    </p>
                  </blockquote>
                </li>
                <li>
                  <p>长什么样</p>
                  <table>
                    <thead>
                      <tr>
                        <th align="center">虚悬镜像，需要删除掉</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/960c6568b99a42efacc0ad9c93876599.png"></td>
                      </tr>
                    </tbody>
                  </table>
                </li>
              </ul>
            </li>
          </ul>
          <h5 id="容器命令"><a href="#容器命令" class="headerlink" title="容器命令"></a>容器命令</h5>
          <ul>
            <li>
              <p>拉取<hanla></hanla><code>ubuntu</code>
                <hanla></hanla>镜像
              </p>
              <figure class="highlight properties">
                <table>
                  <tbody>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="attr">docler</span> <span class="string">pull ubuntu</span></span><br></pre>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </figure>
            </li>
            <li>
              <p>新建<hanla></hanla>+<hanla></hanla>启动容器</p>
              <ul>
                <li>
                  <p>启动交互式容器<hanla></hanla>(前台命令行)</p>
                  <figure class="highlight properties">
                    <table>
                      <tbody>
                        <tr>
                          <td class="gutter">
                            <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre>
                          </td>
                          <td class="code">
                            <pre><span class="line"><span class="comment"># 简单操作<hanla></hanla></span></span><br><span class="line"><span class="attr">docker</span> <span class="string">run 镜像标识 | 镜像名称<hanla></hanla>[:tag]</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># 可以直接拉取并启动<hanla></hanla></span></span><br><span class="line"><span class="attr">docker</span> <span class="string">run -d -p 宿主机端口:<hanla></hanla>容器端口 --name 容器名称  镜像的标识|镜像名称<hanla></hanla>[:tag] </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># -d: 代表后台运行容器</span></span><br><span class="line"><span class="comment"># --name: 容器名称 =&gt;<hanla></hanla>指定容器的名称</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># -i: 以交互模式运行容器,<hanla></hanla>通常与 -t 同时使用</span></span><br><span class="line"><span class="comment"># -t: 为容器重新分配一个伪输入终端,<hanla></hanla>通常与 -i 同时使用<hanla></hanla></span></span><br><span class="line"><span class="attr">docker</span> <span class="string">run -it ubuntu bash</span></span><br><span class="line"><span class="comment"># 退出<hanla></hanla></span></span><br><span class="line"><span class="attr">exit</span></span><br><span class="line"><span class="comment"># -p: 宿主机端口:<hanla></hanla>容器端口 =&gt; 为了映射当前 Linux 的端口和容器的端口</span></span><br></pre>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </figure>
                </li>
              </ul>
            </li>
            <li>
              <p>退出</p>
              <ul>
                <li>
                  <p><code>exit</code>: <code>run</code>
                    <hanla></hanla>进去容器,<code>exit</code>
                    <hanla></hanla>退出,<hanla></hanla>容器停止
                  </p>
                  <table>
                    <thead>
                      <tr>
                        <th align="center">容器自动关闭</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/cc9f5e87a6e8418fbd4131faaec29a29.png"></td>
                      </tr>
                    </tbody>
                  </table>
                </li>
                <li>
                  <p><code>ctrl+p+q</code>: <code>run</code>
                    <hanla></hanla>进去容器,<code>ctrl+p+q</code>
                    <hanla></hanla>退出,<hanla></hanla>容器不停止
                  </p>
                  <table>
                    <thead>
                      <tr>
                        <th align="center">容器未停止</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/99c7b5b14ecb484b9c1803f130e66cc3.png"></td>
                      </tr>
                    </tbody>
                  </table>
                </li>
              </ul>
            </li>
            <li>
              <p>查看正在运行的<code>容器</code></p>
              <figure class="highlight shell">
                <table>
                  <tbody>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line">docker ps [-qa]</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">-a: 查看全部的容器,<hanla></hanla>包括没有运行的</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">-q: 只查看容器的标识</span></span><br></pre>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </figure>
              <table>
                <thead>
                  <tr>
                    <th align="center">测试</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/4da1a48fa257438ca229004c6127ed63.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAY29kZXItaXRs,size_20,color_FFFFFF,t_70,g_se,x_16"></td>
                  </tr>
                </tbody>
              </table>
            </li>
            <li>
              <p>启动已停止运行的容器</p>
              <figure class="highlight properties">
                <table>
                  <tbody>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="attr">docker</span> <span class="string">start 容器<hanla></hanla>id/<hanla></hanla>或者容器名</span></span><br></pre>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </figure>
              <table>
                <thead>
                  <tr>
                    <th align="center">使用容器<hanla></hanla>id<hanla></hanla>进行启动或关闭</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/544bba5d49e44d6797dc66eba27acb52.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAY29kZXItaXRs,size_20,color_FFFFFF,t_70,g_se,x_16" alt=""></td>
                  </tr>
                </tbody>
              </table>
            </li>
            <li>
              <p>停止容器</p>
              <figure class="highlight properties">
                <table>
                  <tbody>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="attr">docker</span> <span class="string">stop 容器<hanla></hanla>id/<hanla></hanla>或者容器名</span></span><br></pre>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </figure>
            </li>
            <li>
              <p>强制停止容器</p>
              <figure class="highlight properties">
                <table>
                  <tbody>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="attr">docker</span> <span class="string">kill 容器<hanla></hanla>id/<hanla></hanla>或者容器名</span></span><br></pre>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </figure>
            </li>
            <li>
              <p>删除已停止的容器</p>
              <figure class="highlight properties">
                <table>
                  <tbody>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="comment"># 删除单个<hanla></hanla></span></span><br><span class="line"><span class="attr">docker</span> <span class="string">rm 容器<hanla></hanla>id</span></span><br><span class="line"><span class="comment"># 一次性删除多个容器实例<hanla></hanla></span></span><br><span class="line"><span class="attr">docker</span> <span class="string">rm -f $(docker ps -qa)</span></span><br></pre>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </figure>
              <table>
                <thead>
                  <tr>
                    <th align="center">删除多个已停止容器</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/01857e0705d64ec8b4d85f109765d45a.png"></td>
                  </tr>
                </tbody>
              </table>
            </li>
            <li>
              <p>查看容器的日志</p>
              <figure class="highlight shell">
                <table>
                  <tbody>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br><span class="line">2</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line">docker logs -f 容器<hanla></hanla>id</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">-f: 可以滚动查看日志的最后几行</span></span><br></pre>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </figure>
            </li>
            <li>
              <p>进入正在运行的容器并以命令行交互</p>
              <ul>
                <li>
                  <p>方式一</p>
                  <figure class="highlight properties">
                    <table>
                      <tbody>
                        <tr>
                          <td class="gutter">
                            <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre>
                          </td>
                          <td class="code">
                            <pre><span class="line"><span class="attr">docker</span> <span class="string">exec -it 容器<hanla></hanla>id(CONTAINER ID)  bash</span></span><br><span class="line"><span class="comment"># Eg: 进入 Tomcat</span></span><br><span class="line"><span class="attr">docker</span> <span class="string">exec -it fb0 bash</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># 退出容器内部<hanla></hanla></span></span><br><span class="line"><span class="attr">exit</span></span><br></pre>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </figure>
                  <table>
                    <thead>
                      <tr>
                        <th align="center">进入容器内的<hanla></hanla><code>Tomcat</code></th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/9dc8909ee03f480fa61ade5f01450d88.png"></td>
                      </tr>
                      <tr>
                        <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/a80a3d39b6204f15a26b1ce9c595e6e8.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAY29kZXItaXRs,size_20,color_FFFFFF,t_70,g_se,x_16"></td>
                      </tr>
                    </tbody>
                  </table>
                </li>
                <li>
                  <p>方式二</p>
                  <figure class="highlight properties">
                    <table>
                      <tbody>
                        <tr>
                          <td class="gutter">
                            <pre><span class="line">1</span><br></pre>
                          </td>
                          <td class="code">
                            <pre><span class="line"><span class="attr">docker</span> <span class="string">attach 容器<hanla></hanla>id</span></span><br></pre>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </figure>
                </li>
                <li>
                  <p>两者的区别</p>
                  <ul>
                    <li><code>exec【推荐】</code>是在容器中打开新的终端,<hanla></hanla>并且可以启动新的进程,<hanla></hanla>用<hanla></hanla><code>exit</code>
                      <hanla></hanla>退出,<hanla></hanla>不会导致容器的停止
                    </li>
                    <li><code>attach</code>: 直接进入容器启动命令的终端,<hanla></hanla>不会启动新的进程,<hanla></hanla>用<hanla></hanla><code>exit</code>
                      <hanla></hanla>退出，会导致容器的停止
                    </li>
                  </ul>
                </li>
              </ul>
            </li>
            <li>
              <p>查看容器内部细节</p>
              <figure class="highlight properties">
                <table>
                  <tbody>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="attr">docker</span> <span class="string">inspect 容器<hanla></hanla>id</span></span><br></pre>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </figure>
            </li>
            <li>
              <p>从容器内拷贝文件到主机上</p>
              <ul>
                <li>
                  <p>容器 到 主机</p>
                </li>
                <li>
                  <p>命令</p>
                  <figure class="highlight properties">
                    <table>
                      <tbody>
                        <tr>
                          <td class="gutter">
                            <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre>
                          </td>
                          <td class="code">
                            <pre><span class="line"><span class="attr">docker</span> <span class="string">cp 容器<hanla></hanla>id:<hanla></hanla>容器内路径 目的主机路径</span></span><br><span class="line"><span class="comment"># Eg: 将 容器 tmp 目录内的文件备份到宿主机<hanla></hanla></span></span><br><span class="line"><span class="attr">docker</span> <span class="string">cp bc7c957b6662:/tmp ./cp-tmp.txt</span></span><br></pre>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </figure>
                  <table>
                    <thead>
                      <tr>
                        <th align="center">文件备份</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/02474b34ce9843868a6c660e60dbd11d.png"></td>
                      </tr>
                    </tbody>
                  </table>
                </li>
              </ul>
            </li>
            <li>
              <p>导入和到导出容器</p>
              <ul>
                <li>
                  <p><code>export</code>: 导出容器的内容六作为一个<hanla></hanla><code>tar</code>
                    <hanla></hanla>归档文件
                  </p>
                </li>
                <li>
                  <p><code>import</code>: 从<hanla></hanla><code>tar</code>
                    <hanla></hanla>包中的内容创建一个新的文件系统再导入未镜像
                  </p>
                </li>
                <li>
                  <p>案例</p>
                  <figure class="highlight properties">
                    <table>
                      <tbody>
                        <tr>
                          <td class="gutter">
                            <pre><span class="line">1</span><br><span class="line">2</span><br></pre>
                          </td>
                          <td class="code">
                            <pre><span class="line"><span class="comment"># 导出<hanla></hanla></span></span><br><span class="line"><span class="attr">docker</span> <span class="string">export 容器<hanla></hanla>id &gt; 文件名.tar</span></span><br></pre>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </figure>
                  <figure class="highlight properties">
                    <table>
                      <tbody>
                        <tr>
                          <td class="gutter">
                            <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre>
                          </td>
                          <td class="code">
                            <pre><span class="line"><span class="comment"># 导入<hanla></hanla></span></span><br><span class="line"><span class="attr">cat</span> <span class="string">文件名.tar | docker import - 镜像用户<hanla></hanla>/<hanla></hanla>镜像名:<hanla></hanla>镜像版本号</span></span><br><span class="line"><span class="comment"># Eg:</span></span><br><span class="line"><span class="attr">cat</span> <span class="string">ubuntu.tar | docker import - coderitl/ubuntu:latest</span></span><br></pre>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </figure>
                  <table>
                    <thead>
                      <tr>
                        <th align="center">导入与导出</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/42ce812043574862981f448eaeb6cbfb.png"></td>
                      </tr>
                    </tbody>
                  </table>
                </li>
              </ul>
            </li>
          </ul>
          <h4 id="Docker-镜像"><a href="#Docker-镜像" class="headerlink" title="Docker-镜像"></a>Docker-镜像</h4>
          <ul>
            <li>
              <p>镜像</p>
              <div class="note blue icon-padding modern"><i class="note-icon fas fa-bullhorn"></i>
                <p>是一种轻量级、可执行的独立软件包，它包含运行某个软件所需的所有内容,<hanla></hanla>我们把应用程序和配置依赖打包形成一个可交付的运行环境<hanla></hanla>(包括代码、运行时需要的库、环境变量和配置文件),<hanla></hanla>这个打包好的运行环境就是<hanla></hanla><code>image</code>
                  <hanla></hanla>镜像文件
                </p>
              </div>
            </li>
            <li>
              <p>分层的镜像</p>
              <table>
                <thead>
                  <tr>
                    <th align="center">一个镜像的下载是等待一个一个文件内容的下载<hanla></hanla>(分层)</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/083ba1ab0a634ccc90900ec84f363b9c.png"></td>
                  </tr>
                </tbody>
              </table>
              <ul>
                <li>
                  <p><code>UnionFS(联合文件系统)</code></p>
                  <div class="note blue icon-padding modern"><i class="note-icon fas fa-bullhorn"></i>
                    <p><code>UnionFS(联合文件系统)</code>: <code>Union</code>
                      <hanla></hanla>文件系统<hanla></hanla>(<code>UnionFS</code>)<hanla></hanla>是一种分层、轻量级并且高性能的文件系统，它支持<code>对文件系统的修改作为一次提交来一层层的叠加</code>,<hanla></hanla>同时可以将不同目录挂载到用一个虚拟文件系统下，<code>union</code>
                      <hanla></hanla>文件系统是<hanla></hanla><code>Docker</code>
                      <hanla></hanla>镜像的基础。<code>镜像可以通过分层来进行继承</code>,<hanla></hanla>基于基础镜像<hanla></hanla>(没有父镜像)，可以制作各种具体的应用镜像
                    </p>
                  </div>
                  <blockquote>
                    <p>特点：一次性同时加载多个文件系统，但从外面看起来，只能看到一个文件系统，联合加载会把各层文件系统叠加起来，这样最终的文件系统会包含所有底层的文件和目录</p>
                  </blockquote>
                </li>
              </ul>
            </li>
            <li>
              <p><code>Docker</code> 镜像 <code>commit</code> 操作</p>
              <ul>
                <li>
                  <p><code>docker commit</code> 提交容器副本使之成为一个新的镜像</p>
                </li>
                <li>
                  <p>命令</p>
                  <figure class="highlight properties">
                    <table>
                      <tbody>
                        <tr>
                          <td class="gutter">
                            <pre><span class="line">1</span><br></pre>
                          </td>
                          <td class="code">
                            <pre><span class="line"><span class="attr">docker</span> <span class="string">commit -m="提交的描述信息"  -a="作者" 容器<hanla></hanla>id 要创建的目标镜像名:[标签名]</span></span><br></pre>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </figure>
                </li>
                <li>
                  <p>案例: <code>ubuntu</code>
                    <hanla></hanla>安装<hanla></hanla><code>vim</code>
                  </p>
                  <ul>
                    <li>
                      <p>从<hanla></hanla><code>Hub</code>
                        <hanla></hanla>上下载<hanla></hanla><code>ubuntu</code>
                        <hanla></hanla>镜像到本地并成功运行
                      </p>
                      <table>
                        <thead>
                          <tr>
                            <th align="center">启动，更新容器内部</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr>
                            <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/0368322c983a4e569bc5f1be92a4e7e4.png"></td>
                          </tr>
                        </tbody>
                      </table>
                    </li>
                    <li>
                      <p>原始的默认<hanla></hanla><code>Ubuntu</code>
                        <hanla></hanla>镜像时不带着<hanla></hanla><code>vim</code>
                        <hanla></hanla>命令的
                      </p>
                    </li>
                    <li>
                      <p>外网联通的情况下,<hanla></hanla>安装<hanla></hanla><code>vim</code></p>
                      <figure class="highlight properties">
                        <table>
                          <tbody>
                            <tr>
                              <td class="gutter">
                                <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre>
                              </td>
                              <td class="code">
                                <pre><span class="line"><span class="comment"># 容器内部执行<hanla></hanla></span></span><br><span class="line"><span class="attr">apt-get</span> <span class="string">-y update</span></span><br><span class="line"><span class="attr">apt-get</span> <span class="string">-y install vim</span></span><br></pre>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </figure>
                    </li>
                    <li>
                      <p>安装完成后,<code>commit</code>
                        <hanla></hanla>我们自己的新镜像
                      </p>
                      <figure class="highlight properties">
                        <table>
                          <tbody>
                            <tr>
                              <td class="gutter">
                                <pre><span class="line">1</span><br><span class="line">2</span><br></pre>
                              </td>
                              <td class="code">
                                <pre><span class="line"><span class="comment"># e50146ce2426: docker ps 获取<hanla></hanla></span></span><br><span class="line"><span class="attr">docker</span> <span class="string">commit -m="add vim" -a="coder-itl" e50146ce2426 coderitl/ubuntu:1.1</span></span><br></pre>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </figure>
                    </li>
                    <li>
                      <p>启动我们的新镜像并和原来的对比</p>
                      <figure class="highlight properties">
                        <table>
                          <tbody>
                            <tr>
                              <td class="gutter">
                                <pre><span class="line">1</span><br><span class="line">2</span><br></pre>
                              </td>
                              <td class="code">
                                <pre><span class="line"><span class="comment"># ctrl + p + q 【退出,<hanla></hanla>不关闭容器】</span></span><br><span class="line"><span class="attr">docker</span> <span class="string">run -it coderitl/ubuntu:1.1 bash</span></span><br></pre>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </figure>
                      <table>
                        <thead>
                          <tr>
                            <th align="center">启动自己制作的镜像</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr>
                            <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/e1917be15fe24cc38342f73bb032a630.png"></td>
                          </tr>
                        </tbody>
                      </table>
                    </li>
                  </ul>
                </li>
              </ul>
            </li>
          </ul>
          <h4 id="镜像发布"><a href="#镜像发布" class="headerlink" title="镜像发布"></a>镜像发布</h4>
          <h5 id="公服"><a href="#公服" class="headerlink" title="公服"></a>公服</h5>
          <ul>
            <li>
              <p>本地镜像发布到阿里云</p>
              <ul>
                <li>
                  <p>创建阿里云镜像仓库</p>
                  <ol>
                    <li>
                      <p>选择控制台,<hanla></hanla>进入容器镜像服务<hanla></hanla>(搜索<code>容器镜像服务</code>)</p>
                      <table>
                        <thead>
                          <tr>
                            <th align="center">进入容器镜像服务</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr>
                            <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/b03a508e91184c0f9b7354e8da18d3af.png"></td>
                          </tr>
                        </tbody>
                      </table>
                    </li>
                    <li>
                      <p>选择个人实例</p>
                      <table>
                        <thead>
                          <tr>
                            <th align="center">点击<code>个人实例</code></th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr>
                            <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/a101c02c44af498589b20b388c645504.png" style="zoom:50%;"></td>
                          </tr>
                        </tbody>
                      </table>
                    </li>
                    <li>
                      <p>命名空间</p>
                      <table>
                        <thead>
                          <tr>
                            <th align="center">创建<code>命名空间</code></th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr>
                            <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/1233c2b6a25c453dbea56bd7a7908b5f.png"></td>
                          </tr>
                        </tbody>
                      </table>
                    </li>
                    <li>
                      <p>仓库名称</p>
                      <table>
                        <thead>
                          <tr>
                            <th align="center">选择命名空间,<hanla></hanla>创建镜像仓库</th>
                            <th align="center">填写基本信息</th>
                            <th align="center">直接选择<code>本地仓库</code></th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr>
                            <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/dc33b235e52949369a37bac9113462a9.png"></td>
                            <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/fd6991133ab449d08bbeeefa16b9e371.png"></td>
                            <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/151617067c874672987954e2661188dc.png"></td>
                          </tr>
                        </tbody>
                      </table>
                    </li>
                    <li>
                      <p>进入管理界面获得脚本</p>
                      <table>
                        <thead>
                          <tr>
                            <th align="center">获取脚本</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr>
                            <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/ccbdcae50f6c4fbeba82779037c6a60e.png"></td>
                          </tr>
                        </tbody>
                      </table>
                    </li>
                    <li>
                      <p>推送到<code>阿里云</code></p>
                      <figure class="highlight properties">
                        <table>
                          <tbody>
                            <tr>
                              <td class="gutter">
                                <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre>
                              </td>
                              <td class="code">
                                <pre><span class="line"><span class="comment"># username: 阿里云账号的用户名,<hanla></hanla>之后输入阿里云账号的密码<hanla></hanla></span></span><br><span class="line"><span class="attr">$</span> <span class="string">docker login --username=bin_<hanla></hanla>爱豆 registry.cn-hangzhou.aliyuncs.com</span></span><br><span class="line"><span class="comment">#  如下命令中的 [ImageId] 和 [镜像版本号] 修改为本次推送之远程仓库的信息<hanla></hanla></span></span><br><span class="line"><span class="attr">$</span> <span class="string">docker tag [ImageId] registry.cn-hangzhou.aliyuncs.com/coder-itl/ubuntu:[镜像版本号]</span></span><br><span class="line"><span class="comment"># [镜像版本号]: 填写版本号<hanla></hanla></span></span><br><span class="line"><span class="attr">$</span> <span class="string">docker push registry.cn-hangzhou.aliyuncs.com/coder-itl/ubuntu:[镜像版本号]</span></span><br></pre>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </figure>
                      <table>
                        <thead>
                          <tr>
                            <th align="center">使用脚本</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr>
                            <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/906d9ebc8c294591992a9ae860bdd3d6.png"></td>
                          </tr>
                        </tbody>
                      </table>
                      <table>
                        <thead>
                          <tr>
                            <th align="center">信息修改</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr>
                            <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/667c6c23175c419589efec45ce6eb632.png"></td>
                          </tr>
                        </tbody>
                      </table>
                      <table>
                        <thead>
                          <tr>
                            <th align="center">推送到远程</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr>
                            <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/f5de66a21c5c44b3ac437e8bcfda0a3e.png"></td>
                          </tr>
                        </tbody>
                      </table>
                    </li>
                  </ol>
                </li>
              </ul>
            </li>
            <li>
              <p>拉取阿里云镜像到本地</p>
              <ul>
                <li>
                  <p>拉取镜像</p>
                  <figure class="highlight properties">
                    <table>
                      <tbody>
                        <tr>
                          <td class="gutter">
                            <pre><span class="line">1</span><br></pre>
                          </td>
                          <td class="code">
                            <pre><span class="line"><span class="attr">docker</span> <span class="string">pull registry.cn-hangzhou.aliyuncs.com/coder-itl/ubuntu:[镜像版本号]</span></span><br></pre>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </figure>
                  <table>
                    <thead>
                      <tr>
                        <th align="center">拉取自己创建的镜像到本地</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/f376f2143ac34841b1a3a9fd532d1eb4.png"></td>
                      </tr>
                    </tbody>
                  </table>
                </li>
              </ul>
            </li>
          </ul>
          <h5 id="私服"><a href="#私服" class="headerlink" title="私服"></a>私服</h5>
          <ul>
            <li>
              <p><code>Docker Registry</code></p>
              <ul>
                <li>
                  <p>下载镜像<hanla></hanla><code>Docker Registry</code></p>
                  <figure class="highlight properties">
                    <table>
                      <tbody>
                        <tr>
                          <td class="gutter">
                            <pre><span class="line">1</span><br></pre>
                          </td>
                          <td class="code">
                            <pre><span class="line"><span class="attr">docker</span> <span class="string">pull registry</span></span><br></pre>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </figure>
                </li>
                <li>
                  <p>运行私有库<hanla></hanla><code>Registry</code>，相当于本地有个私有<hanla></hanla><code>Docker hub</code></p>
                  <figure class="highlight properties">
                    <table>
                      <tbody>
                        <tr>
                          <td class="gutter">
                            <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre>
                          </td>
                          <td class="code">
                            <pre><span class="line"><span class="comment"># 在宿主机创建目录【权限充足时将会自动创建】</span></span><br><span class="line"><span class="attr">mkdir</span> <span class="string">-p /coderitl/myregistry/</span></span><br><span class="line"><span class="comment"># 默认情况,<hanla></hanla>仓库被创建再容器的 /var/lib/registry 目录下,<hanla></hanla>建议自行用容器卷映射,<hanla></hanla>方便与宿主机联调<hanla></hanla></span></span><br><span class="line"><span class="attr">docker</span> <span class="string">run -d -p 5000:5000 -v /coderitl/myregistry/:/tmp/myregistry --privileged=true registry</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># -v: 相当于将这两个目录联通共享<hanla></hanla></span></span><br><span class="line"><span class="attr">/coderitl/myregistry/【宿主机目录】</span>:<span class="string">/tmp/myregistry【容器内目录】</span></span><br><span class="line"><span class="comment"> </span></span><br><span class="line"><span class="comment"># 默认情况下容器中的<hanla></hanla>root<hanla></hanla>用户只是<hanla></hanla>host<hanla></hanla>主机的一个普通用户，但如果<hanla></hanla>docker run --privileged=true 就真正的给这个普通用户赋予了和<hanla></hanla>host<hanla></hanla>主机<hanla></hanla>root<hanla></hanla>用户的特权。</span></span><br></pre>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </figure>
                  <table>
                    <thead>
                      <tr>
                        <th align="center">基础操作</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/b2fc20c5bf7746be970ce9a776b89771.png"></td>
                      </tr>
                    </tbody>
                  </table>
                </li>
                <li>
                  <p>案例演示创建一个新镜像,<code>ubuntu</code>
                    <hanla></hanla>安装<hanla></hanla><code>ifconfig</code>
                    <hanla></hanla>命令
                  </p>
                  <ul>
                    <li>
                      <p>进入容器内部<code>【ubuntu】</code></p>
                      <figure class="highlight properties">
                        <table>
                          <tbody>
                            <tr>
                              <td class="gutter">
                                <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre>
                              </td>
                              <td class="code">
                                <pre><span class="line"><span class="comment"># 获取正在运行的容器 id</span></span><br><span class="line"><span class="attr">docker</span> <span class="string">ps</span></span><br><span class="line"><span class="comment"># 进入容器内部<hanla></hanla></span></span><br><span class="line"><span class="attr">docker</span> <span class="string">exec -it 容器<hanla></hanla>id bash</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># 未运行时,<hanla></hanla>可执行如下 registry.cn-hangzhou.aliyuncs.com/coder-itl/ubuntu:1.1【替换】</span></span><br><span class="line"><span class="attr">docker</span> <span class="string">run -it registry.cn-hangzhou.aliyuncs.com/coder-itl/ubuntu:1.1 bash</span></span><br><span class="line"></span><br></pre>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </figure>
                      <table>
                        <thead>
                          <tr>
                            <th align="center">启动容器并进入交互界面</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr>
                            <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/ad19400000e740e7916f7e2f630b7448.png"></td>
                          </tr>
                        </tbody>
                      </table>
                    </li>
                    <li>
                      <p>执行如下下载<hanla></hanla><code>ifconfig</code></p>
                      <figure class="highlight properties">
                        <table>
                          <tbody>
                            <tr>
                              <td class="gutter">
                                <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre>
                              </td>
                              <td class="code">
                                <pre><span class="line"><span class="comment"># 安装<hanla></hanla></span></span><br><span class="line"><span class="attr">apt-get</span> <span class="string">-y update</span></span><br><span class="line"><span class="attr">apt-get</span> <span class="string">-y install net-tools</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># 测试<hanla></hanla></span></span><br><span class="line"><span class="attr">ifconfig</span></span><br><span class="line"></span><br></pre>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </figure>
                      <table>
                        <thead>
                          <tr>
                            <th align="center">测试命令，使用<hanla></hanla><code>ctrl+p+q 退出</code></th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr>
                            <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/92851b0201d0469dbd82f46b86a52370.png"></td>
                          </tr>
                        </tbody>
                      </table>
                    </li>
                    <li>
                      <p>提交本次镜像</p>
                      <figure class="highlight properties">
                        <table>
                          <tbody>
                            <tr>
                              <td class="gutter">
                                <pre><span class="line">1</span><br><span class="line">2</span><br></pre>
                              </td>
                              <td class="code">
                                <pre><span class="line"><span class="comment"># e50146ce2426: docker ps 获取<hanla></hanla></span></span><br><span class="line"><span class="attr">docker</span> <span class="string">commit -m="add vim" -a="coder-itl" e50146ce2426 coderitl/ubuntu:1.2</span></span><br></pre>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </figure>
                      <table>
                        <thead>
                          <tr>
                            <th align="center">镜像提交</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr>
                            <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/5d1ee14fac214a50a8b77d750fa4441f.png"></td>
                          </tr>
                        </tbody>
                      </table>
                    </li>
                  </ul>
                </li>
                <li>
                  <p><code>curl</code>
                    <hanla></hanla>验证私服库上有什么镜像
                  </p>
                  <figure class="highlight properties">
                    <table>
                      <tbody>
                        <tr>
                          <td class="gutter">
                            <pre><span class="line">1</span><br><span class="line">2</span><br></pre>
                          </td>
                          <td class="code">
                            <pre><span class="line"><span class="comment"># ip: 本机<hanla></hanla></span></span><br><span class="line"><span class="attr">curl</span> <span class="string">-XGET http://192.168.2.3:5000/v2/_catalog</span></span><br></pre>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </figure>
                  <table>
                    <thead>
                      <tr>
                        <th align="center">私服初始为空</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/70412cac95644bbba641c26ac7f83d53.png"></td>
                      </tr>
                    </tbody>
                  </table>
                </li>
                <li>
                  <p>将新镜像<hanla></hanla><code>coderitl/ubuntu</code>
                    <hanla></hanla>修改为符合私服规范的<hanla></hanla><code>Tag</code>
                  </p>
                  <figure class="highlight properties">
                    <table>
                      <tbody>
                        <tr>
                          <td class="gutter">
                            <pre><span class="line">1</span><br><span class="line">2</span><br></pre>
                          </td>
                          <td class="code">
                            <pre><span class="line"><span class="comment"># 语法: docker tag 镜像:tag Host(ip):Port/Repository:Tag</span></span><br><span class="line"><span class="attr">docker</span> <span class="string">tag coderitl/ubuntu:1.2 192.168.2.3:5000/coderitl/ubuntu:1.2</span></span><br></pre>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </figure>
                </li>
                <li>
                  <p>修改配置文件使之支持<hanla></hanla><code>http</code></p>
                  <figure class="highlight properties">
                    <table>
                      <tbody>
                        <tr>
                          <td class="gutter">
                            <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre>
                          </td>
                          <td class="code">
                            <pre><span class="line"><span class="comment"># 编辑 daemon.json</span></span><br><span class="line"><span class="attr">vim</span> <span class="string">/etc/docker/daemon.json</span></span><br><span class="line"><span class="comment"># 添加如下<hanla></hanla></span></span><br><span class="line"><span class="attr">{</span></span><br><span class="line">  <span class="attr">...</span> <span class="string">,</span></span><br><span class="line"><span class="comment">  # 在之前内容后补充，使用 "逗号" 分割 </span></span><br><span class="line">  <span class="attr">"insecure-registries"</span>:<span class="string">["192.168.2.3:5000"]</span></span><br><span class="line"><span class="attr">}</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># 上述保存退出后,<hanla></hanla>重新加载 daemon</span></span><br><span class="line"><span class="attr">systemctl</span> <span class="string">daemon-reload</span></span><br><span class="line"><span class="attr">systemctl</span> <span class="string">restart docker</span></span><br><span class="line"><span class="comment"># 添加原因: docker 默认不允许 http 方式推送镜像,<hanla></hanla>通过配置选项来取消这个限制 =&gt; 修改完如果不生效,<hanla></hanla>对 docker 进行重启</span></span><br></pre>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </figure>
                  <table>
                    <thead>
                      <tr>
                        <th align="center">修改<hanla></hanla><code>daemon.json</code>
                          <hanla></hanla>重启<hanla></hanla><code>docker</code>
                          <hanla></hanla>后,<hanla></hanla>需要重新启动<hanla></hanla><code>registry</code>
                        </th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/64ac20b262fd4593bb83644c6448436b.png"></td>
                      </tr>
                    </tbody>
                  </table>
                </li>
                <li>
                  <p><code>push</code>
                    <hanla></hanla>推送到私服库
                  </p>
                  <figure class="highlight properties">
                    <table>
                      <tbody>
                        <tr>
                          <td class="gutter">
                            <pre><span class="line">1</span><br></pre>
                          </td>
                          <td class="code">
                            <pre><span class="line"><span class="attr">docker</span> <span class="string">push 192.168.2.3:5000/coderitl/ubuntu:1.2</span></span><br></pre>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </figure>
                  <table>
                    <thead>
                      <tr>
                        <th align="center">推送时<hanla></hanla><code>registry</code>
                          <hanla></hanla>必须是启动的
                        </th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/ba5ce08fda374277afcffc06bb20006a.png"></td>
                      </tr>
                    </tbody>
                  </table>
                </li>
                <li>
                  <p><code>curl</code>
                    <hanla></hanla>验证私服库上有什么镜像
                  </p>
                  <figure class="highlight properties">
                    <table>
                      <tbody>
                        <tr>
                          <td class="gutter">
                            <pre><span class="line">1</span><br><span class="line">2</span><br></pre>
                          </td>
                          <td class="code">
                            <pre><span class="line"><span class="comment"># ip: 本机<hanla></hanla></span></span><br><span class="line"><span class="attr">curl</span> <span class="string">-XGET http://192.168.2.3:5000/v2/_catalog</span></span><br></pre>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </figure>
                  <table>
                    <thead>
                      <tr>
                        <th align="center">上传成功</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/90ed2abefe3046259a28fd7a976f0064.png"></td>
                      </tr>
                    </tbody>
                  </table>
                </li>
                <li>
                  <p>拉取到本地</p>
                  <figure class="highlight properties">
                    <table>
                      <tbody>
                        <tr>
                          <td class="gutter">
                            <pre><span class="line">1</span><br></pre>
                          </td>
                          <td class="code">
                            <pre><span class="line"><span class="attr">docker</span> <span class="string">pull 192.168.2.3:5000/coderitl/ubuntu:1.2</span></span><br></pre>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </figure>
                  <table>
                    <thead>
                      <tr>
                        <th align="center">拉取镜像</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/a6c824485b0640f281478a8ee1304718.png"></td>
                      </tr>
                    </tbody>
                  </table>
                </li>
              </ul>
            </li>
          </ul>
          <h4 id="容器数据卷"><a href="#容器数据卷" class="headerlink" title="容器数据卷"></a>容器数据卷</h4>
          <ul>
            <li>
              <p>是什么</p>
              <div class="note blue icon-padding modern"><i class="note-icon fas fa-bullhorn"></i>
                <p>可以将<hanla></hanla><code>docker</code>
                  <hanla></hanla>容器内的数据保存在宿主机的磁盘中
                </p>
                <p>卷: 卷就是一个目录，存在于一个或多个容器中,<hanla></hanla>由<hanla></hanla><code>docker</code>
                  <hanla></hanla>挂载到容器,<hanla></hanla>但不属于联合文件系统,<hanla></hanla>因此能够绕过<hanla></hanla><code>Unbion File System</code>
                  <hanla></hanla>提供的一些用于持续存储或共享数据的特性
                </p>
                <p>卷的设计目的就是<code>数据的持久化</code>,<hanla></hanla>完全独立于容器的生命周期，因此<hanla></hanla><code>Docker</code>
                  <hanla></hanla>不会在容器删除时删除其挂载的数据卷
                </p>
              </div>
            </li>
            <li>
              <p>权限问题</p>
              <div class="note blue icon-padding modern"><i class="note-icon fas fa-bullhorn"></i>
                <p><code>Docker</code>
                  <hanla></hanla>挂载目录访问<code>如果出现 cannout open directory.: Oermission denid</code>
                </p>
                <p>解决方法: 在挂载目录后多加一个<code>--privileged=true</code>
                  <hanla></hanla>参数即可
                </p>
                <p>原因: 如果是<hanla></hanla><code>Centos7</code>
                  <hanla></hanla>安全模块会比之前系统版本加强，不安全的会先禁止,<hanla></hanla>所以目录挂载的情况被默认认为不是安全的行为，在<hanla></hanla><code>SELinux</code>
                  <hanla></hanla>里面挂载目录被禁止掉了，如果要开启，只需要添加<code>--privileged=true</code>
                  <hanla></hanla>参数即可，可以扩大容器的权限解决挂载目录没有权限的问题，使用了该参数,<code>
                    <hanla></hanla>容器
                  </code>内的<hanla></hanla><code>root</code>
                  <hanla></hanla>将会拥有真正的<hanla></hanla><code>root</code>
                  <hanla></hanla>权限，否则,<code>root</code>
                  <hanla></hanla>将会只是一个普通<hanla></hanla><code>root</code>
                  <hanla></hanla>用户而已
                </p>
              </div>
            </li>
            <li>
              <p>运行一个带有容器数据卷存储功能的容器实例</p>
              <figure class="highlight properties">
                <table>
                  <tbody>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="attr">docker</span> <span class="string">run -it --privileged=true -v /<hanla></hanla>宿主机绝对路径目录:/<hanla></hanla>容器内目录 镜像名</span></span><br></pre>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </figure>
            </li>
            <li>
              <p>能做什么</p>
              <div class="note blue icon-padding modern"><i class="note-icon fas fa-bullhorn"></i>
                <p>将运行的环境打包成镜像,<code>run</code>
                  <hanla></hanla>后形成容器实例运行,<hanla></hanla>但是我们对数据的要求希望是持久化的
                </p>
                <p><code>Docker</code>
                  <hanla></hanla>容器产生的数据，如果我们不备份，那么当容器实例删除后,<hanla></hanla>容器内的数据自然也就没有了，为了能保存数据在<hanla></hanla><code>docker</code>
                  <hanla></hanla>中我们使用<code>卷</code>
                </p>
                <p>特点:</p>
                <ol>
                  <li>数据卷可以在容器之间共享或重用数据</li>
                  <li>卷中的更改可以直接试试生效</li>
                  <li>数据卷中的更改不会包含在镜像的更新中</li>
                  <li>数据卷的生命周期一致持续到没有容器使用它为止</li>
                </ol>
              </div>
            </li>
            <li>
              <p>创建带有数据卷的<hanla></hanla><code>ubuntu</code></p>
              <figure class="highlight properties">
                <table>
                  <tbody>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br><span class="line">2</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="comment"># 权限问题: 默认允许读写<hanla></hanla>(rw)，只读只需要添加配置 /tmp/centos_data:/tmp/docker_dat:ro【read only】</span></span><br><span class="line"><span class="attr">docker</span> <span class="string">run -it --privileged=true -v /tmp/centos_data:/tmp/docker_data --name="cut" ubuntu</span></span><br></pre>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </figure>
            </li>
            <li>
              <p>查看数据卷是否挂载成功</p>
              <figure class="highlight properties">
                <table>
                  <tbody>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="attr">docker</span> <span class="string">inspect 容器<hanla></hanla>id</span></span><br></pre>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </figure>
              <table>
                <thead>
                  <tr>
                    <th align="center">查看挂载目录</th>
                    <th align="center">容器与宿主机之间实现数据共享</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/20d11c3225254546873c06123a8cf87f.png"></td>
                    <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/e6a376c7d70a49648417d107823b579f.png"></td>
                  </tr>
                </tbody>
              </table>
            </li>
            <li>
              <p>卷的继承和共享</p>
              <figure class="highlight properties">
                <table>
                  <tbody>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="comment">#  父类: cut</span></span><br><span class="line"><span class="attr">docker</span> <span class="string">run -it --privileged=true -v /tmp/centos_data:/tmp/docker_data --name="cut" ubuntu</span></span><br><span class="line"><span class="comment"># name2 获取继承<hanla></hanla></span></span><br><span class="line"><span class="attr">docker</span> <span class="string">run -it --privileged=true --volumes-from 父类<hanla></hanla>(名称) --name="name2" ubuntu</span></span><br></pre>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </figure>
            </li>
          </ul>
          <h4 id="Docker-常规安装"><a href="#Docker-常规安装" class="headerlink" title="Docker-常规安装"></a>Docker-常规安装</h4>
          <h5 id="总体步骤"><a href="#总体步骤" class="headerlink" title="总体步骤"></a>总体步骤</h5>
          <ol>
            <li>搜索镜像</li>
            <li>拉取镜像</li>
            <li>查看镜像</li>
            <li>启动镜像</li>
            <li>停止镜像</li>
            <li>移除镜像</li>
          </ol>
          <h5 id="Tomcat"><a href="#Tomcat" class="headerlink" title="Tomcat"></a>Tomcat</h5>
          <ul>
            <li>
              <p>搜索</p>
              <figure class="highlight properties">
                <table>
                  <tbody>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="attr">docker</span> <span class="string">search --limit 1 tomcat</span></span><br></pre>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </figure>
            </li>
            <li>
              <p>拉取</p>
              <figure class="highlight properties">
                <table>
                  <tbody>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br><span class="line">2</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="comment"># Tomcat 10</span></span><br><span class="line"><span class="attr">docker</span> <span class="string">pull tomcat</span></span><br></pre>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </figure>
            </li>
            <li>
              <p>启动</p>
              <figure class="highlight properties">
                <table>
                  <tbody>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="attr">docker</span> <span class="string">run -d -p 8080:8080 --privileged=true --name="test-tomcat" tomcat</span></span><br></pre>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </figure>
            </li>
            <li>
              <p>新版发生改变</p>
              <ul>
                <li>
                  <p>首页发生变化</p>
                  <table>
                    <thead>
                      <tr>
                        <th align="center">出现如下</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/6803ee662291438090e0298b1e5a1921.png"></td>
                      </tr>
                    </tbody>
                  </table>
                </li>
                <li>
                  <p>进入<hanla></hanla><code>Tomcat</code>
                    <hanla></hanla>容器内部
                  </p>
                  <figure class="highlight properties">
                    <table>
                      <tbody>
                        <tr>
                          <td class="gutter">
                            <pre><span class="line">1</span><br></pre>
                          </td>
                          <td class="code">
                            <pre><span class="line"><span class="attr">docker</span> <span class="string">exec -it 容器<hanla></hanla>id bash</span></span><br></pre>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </figure>
                </li>
                <li>
                  <p>主要原因</p>
                  <table>
                    <thead>
                      <tr>
                        <th align="center">无法显示首页的原因</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/719af45e908d43d18bbeb25c0d5477e2.png"></td>
                      </tr>
                    </tbody>
                  </table>
                </li>
                <li>
                  <p>删除该文件夹</p>
                  <figure class="highlight properties">
                    <table>
                      <tbody>
                        <tr>
                          <td class="gutter">
                            <pre><span class="line">1</span><br></pre>
                          </td>
                          <td class="code">
                            <pre><span class="line"><span class="attr">rm</span> <span class="string">-r webapps </span></span><br></pre>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </figure>
                </li>
                <li>
                  <p>将<hanla></hanla><code>webapps.dist</code>
                    <hanla></hanla>重命名
                  </p>
                  <figure class="highlight properties">
                    <table>
                      <tbody>
                        <tr>
                          <td class="gutter">
                            <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre>
                          </td>
                          <td class="code">
                            <pre><span class="line"><span class="comment"># 1. 先进性备份<hanla></hanla></span></span><br><span class="line"><span class="attr">cp</span> <span class="string">webapps.dist/ -r webapps.dist.back/</span></span><br><span class="line"><span class="comment"># 2. 修改为 webapps</span></span><br><span class="line"><span class="attr">cp</span> <span class="string">-r webapps.dist webapps</span></span><br></pre>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </figure>
                  <table>
                    <thead>
                      <tr>
                        <th align="center">备份</th>
                        <th align="center">成功加载首页</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/a1eb52a955854b02a9d764ceb9e9ed39.png"></td>
                        <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/24839f3db5f14f0e8e91bfece96a7888.png"></td>
                      </tr>
                    </tbody>
                  </table>
                </li>
              </ul>
            </li>
            <li>
              <p>免修该版本下载</p>
              <figure class="highlight properties">
                <table>
                  <tbody>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br><span class="line">2</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="comment"># tomcat8</span></span><br><span class="line"><span class="attr">docker</span> <span class="string">run -d -p 8080:8080 --name mytomcat8 billygoo/tomcat8-jdk8</span></span><br></pre>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </figure>
            </li>
          </ul>
          <h5 id="MYSQL"><a href="#MYSQL" class="headerlink" title="MYSQL"></a>MYSQL</h5>
          <ul>
            <li>
              <p>安装</p>
              <figure class="highlight properties">
                <table>
                  <tbody>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="comment"># 本机已经安装了 mysql 需要注意端口<hanla></hanla></span></span><br><span class="line"><span class="attr">docker</span> <span class="string">run -d -p 3306:3306 --privileged=true \</span></span><br><span class="line"><span class="string">-v /coderitl/mysql/log:/var/log/mysql \</span></span><br><span class="line"><span class="string">-v /coderitl/mysql/data:/var/lib/mysql \</span></span><br><span class="line"><span class="string">-v /coderitl/mysql/conf:/etc/mysql/conf.d \</span></span><br><span class="line"><span class="string">-e MYSQL_ROOT_PASSWORD=root \</span></span><br><span class="line"><span class="string">--name mysql \</span></span><br><span class="line"><span class="string">mysql:5.7</span></span><br></pre>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </figure>
              <ul>
                <li>
                  <p>在目录<code> /coderitl/mysql/conf</code>
                    <hanla></hanla>下新建<hanla></hanla><code>my.cnf</code>
                  </p>
                  <table>
                    <thead>
                      <tr>
                        <th align="center">新建配置文件在数据卷挂载的<hanla></hanla><code>conf</code>
                          <hanla></hanla>目录下
                        </th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/514ac4a8572e47c8a39af59c5383e412.png"></td>
                      </tr>
                    </tbody>
                  </table>
                  <figure class="highlight properties">
                    <table>
                      <tbody>
                        <tr>
                          <td class="gutter">
                            <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre>
                          </td>
                          <td class="code">
                            <pre><span class="line"><span class="comment"># 通过容器卷同步给 mysql 容器实例<hanla></hanla></span></span><br><span class="line"><span class="attr">vim</span> <span class="string">my.cnf</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># 添加如下内容<hanla></hanla></span></span><br><span class="line"><span class="attr">[client]</span></span><br><span class="line"><span class="attr">default-character-set</span>=<span class="string">utf8</span></span><br><span class="line"><span class="attr">[mysqld]</span></span><br><span class="line"><span class="attr">character-set-server</span>=<span class="string">utf8</span></span><br><span class="line"><span class="attr">collation-server</span>=<span class="string">utf8_general_ci</span></span><br><span class="line"></span><br></pre>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </figure>
                  <figure class="highlight properties">
                    <table>
                      <tbody>
                        <tr>
                          <td class="gutter">
                            <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre>
                          </td>
                          <td class="code">
                            <pre><span class="line"><span class="comment"># 添加上下其一即可<hanla></hanla></span></span><br><span class="line"><span class="attr">[client]</span></span><br><span class="line"><span class="attr">default-character-set</span>=<span class="string">utf8</span></span><br><span class="line"><span class="attr">[mysql]</span></span><br><span class="line"><span class="attr">default-character-set</span>=<span class="string">utf8</span></span><br><span class="line"><span class="attr">[mysqld]</span></span><br><span class="line"><span class="attr">character-set-server</span>=<span class="string">utf8</span></span><br></pre>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </figure>
                  <figure class="highlight properties">
                    <table>
                      <tbody>
                        <tr>
                          <td class="gutter">
                            <pre><span class="line">1</span><br><span class="line">2</span><br></pre>
                          </td>
                          <td class="code">
                            <pre><span class="line"><span class="comment"># 查看字符集<hanla></hanla></span></span><br><span class="line"><span class="attr">show</span> <span class="string">variables like "character_%";</span></span><br></pre>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </figure>
                  <table>
                    <thead>
                      <tr>
                        <th align="center">字符集<hanla></hanla>(等待后查看)</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/13765ad309e9457f8b27a1c416b98235.png"></td>
                      </tr>
                    </tbody>
                  </table>
                </li>
                <li>
                  <p>重新启动<hanla></hanla><code>mysql</code>
                    <hanla></hanla>容器实例再重新进入并查看字符集编码
                  </p>
                  <figure class="highlight properties">
                    <table>
                      <tbody>
                        <tr>
                          <td class="gutter">
                            <pre><span class="line">1</span><br></pre>
                          </td>
                          <td class="code">
                            <pre><span class="line"><span class="attr">docker</span> <span class="string">restart mysql</span></span><br></pre>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </figure>
                </li>
                <li>
                  <p>在新建库新建表再插入中文测试</p>
                  <table>
                    <thead>
                      <tr>
                        <th align="center">成功显示中文数据</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/95c6627e057f416a8e2f8a8dfe53e74b.png"></td>
                      </tr>
                    </tbody>
                  </table>
                </li>
              </ul>
            </li>
            <li>
              <p><code>mysql</code>
                <hanla></hanla>最新版
              </p>
              <figure class="highlight properties">
                <table>
                  <tbody>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="attr">docker</span> <span class="string">run -d -p 3306:3306 --privileged=true \</span></span><br><span class="line"><span class="string">-v /coderitl/mysql/log:/var/log/mysql \</span></span><br><span class="line"><span class="string">-v /coderitl/mysql/data:/var/lib/mysql \</span></span><br><span class="line"><span class="string">-v /coderitl/mysql/conf:/etc/mysql/conf.d \</span></span><br><span class="line"><span class="string">-e MYSQL_ROOT_PASSWORD=root \</span></span><br><span class="line"><span class="string">--name mysql \</span></span><br><span class="line"><span class="string">mysql</span></span><br></pre>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </figure>
            </li>
          </ul>
          <h5 id="Redis"><a href="#Redis" class="headerlink" title="Redis"></a>Redis</h5>
          <ul>
            <li>
              <p>从<hanla></hanla><code>docker hub</code>
                <hanla></hanla>上拉取
              </p>
              <figure class="highlight properties">
                <table>
                  <tbody>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="attr">docker</span> <span class="string">pull redis:6.0.8</span></span><br></pre>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </figure>
            </li>
            <li>
              <p><code>Redis6.0</code>
                <hanla></hanla>的配置文件地址
              </p>
              <blockquote>
                <p><a target="_blank" rel="external nofollow noopener noreferrer" href="https://raw.githubusercontent.com/redis/redis/6.0/redis.conf">https://raw.githubusercontent.com/redis/redis/6.0/redis.conf</a></p>
              </blockquote>
              <ul>
                <li>
                  <p>修改配置文件</p>
                  <ul>
                    <li><code>protected-mode no</code></li>
                    <li><code># bind 127.0.0.1</code></li>
                    <li><code>daemonize no</code></li>
                  </ul>
                </li>
                <li>
                  <p>个人已修改使用的配置</p>
                  <details class="folding-tag" green="">
                    <summary> 获取配置 </summary>
                    <div class="content">
                      <figure class="highlight properties">
                        <table>
                          <tbody>
                            <tr>
                              <td class="gutter">
                                <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br></pre>
                              </td>
                              <td class="code">
                                <pre><span class="line"><span class="attr">protected-mode</span> <span class="string">no</span></span><br><span class="line"></span><br><span class="line"><span class="attr">port</span> <span class="string">6379</span></span><br><span class="line"></span><br><span class="line"><span class="attr">tcp-backlog</span> <span class="string">511</span></span><br><span class="line"></span><br><span class="line"><span class="attr">timeout</span> <span class="string">0</span></span><br><span class="line"></span><br><span class="line"><span class="attr">tcp-keepalive</span> <span class="string">300</span></span><br><span class="line"></span><br><span class="line"><span class="attr">daemonize</span> <span class="string">no</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">supervised</span> <span class="string">no</span></span><br><span class="line"></span><br><span class="line"><span class="attr">pidfile</span> <span class="string">/var/run/redis_6379.pid</span></span><br><span class="line"></span><br><span class="line"><span class="attr">loglevel</span> <span class="string">notice</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">logfile</span> <span class="string">""</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">databases</span> <span class="string">16</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">always-show-logo</span> <span class="string">yes</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">save</span> <span class="string">900 1</span></span><br><span class="line"><span class="attr">save</span> <span class="string">300 10</span></span><br><span class="line"><span class="attr">save</span> <span class="string">60 10000</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">stop-writes-on-bgsave-error</span> <span class="string">yes</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">rdbcompression</span> <span class="string">yes</span></span><br><span class="line"></span><br><span class="line"><span class="attr">dbfilename</span> <span class="string">dump.rdb</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">rdb-del-sync-files</span> <span class="string">no</span></span><br><span class="line"></span><br><span class="line"><span class="attr">dir</span> <span class="string">./</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">replica-serve-stale-data</span> <span class="string">yes</span></span><br><span class="line"></span><br><span class="line"><span class="attr">replica-read-only</span> <span class="string">yes</span></span><br><span class="line"></span><br><span class="line"><span class="attr">repl-diskless-sync</span> <span class="string">no</span></span><br><span class="line"></span><br><span class="line"><span class="attr">repl-diskless-sync-delay</span> <span class="string">5</span></span><br><span class="line"></span><br><span class="line"><span class="attr">repl-diskless-load</span> <span class="string">disabled</span></span><br><span class="line"></span><br><span class="line"><span class="attr">repl-disable-tcp-nodelay</span> <span class="string">no</span></span><br><span class="line"></span><br><span class="line"><span class="attr">replica-priority</span> <span class="string">100</span></span><br><span class="line"></span><br><span class="line"><span class="attr">acllog-max-len</span> <span class="string">128</span></span><br><span class="line"></span><br><span class="line"><span class="attr">lazyfree-lazy-eviction</span> <span class="string">no</span></span><br><span class="line"><span class="attr">lazyfree-lazy-expire</span> <span class="string">no</span></span><br><span class="line"><span class="attr">lazyfree-lazy-server-del</span> <span class="string">no</span></span><br><span class="line"><span class="attr">replica-lazy-flush</span> <span class="string">no</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">lazyfree-lazy-user-del</span> <span class="string">no</span></span><br><span class="line"></span><br><span class="line"><span class="attr">oom-score-adj</span> <span class="string">no</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">oom-score-adj-values</span> <span class="string">0 200 800</span></span><br><span class="line"></span><br><span class="line"><span class="attr">appendonly</span> <span class="string">no</span></span><br><span class="line"></span><br><span class="line"><span class="attr">appendfilename</span> <span class="string">"appendonly.aof"</span></span><br><span class="line"></span><br><span class="line"><span class="attr">appendfsync</span> <span class="string">everysec</span></span><br><span class="line"></span><br><span class="line"><span class="attr">no-appendfsync-on-rewrite</span> <span class="string">no</span></span><br><span class="line"></span><br><span class="line"><span class="attr">auto-aof-rewrite-percentage</span> <span class="string">100</span></span><br><span class="line"><span class="attr">auto-aof-rewrite-min-size</span> <span class="string">64mb</span></span><br><span class="line"></span><br><span class="line"><span class="attr">aof-load-truncated</span> <span class="string">yes</span></span><br><span class="line"></span><br><span class="line"><span class="attr">aof-use-rdb-preamble</span> <span class="string">yes</span></span><br><span class="line"></span><br><span class="line"><span class="attr">lua-time-limit</span> <span class="string">5000</span></span><br><span class="line"></span><br><span class="line"><span class="attr">slowlog-log-slower-than</span> <span class="string">10000</span></span><br><span class="line"></span><br><span class="line"><span class="attr">slowlog-max-len</span> <span class="string">128</span></span><br><span class="line"></span><br><span class="line"><span class="attr">latency-monitor-threshold</span> <span class="string">0</span></span><br><span class="line"></span><br><span class="line"><span class="attr">notify-keyspace-events</span> <span class="string">""</span></span><br><span class="line"></span><br><span class="line"><span class="attr">hash-max-ziplist-entries</span> <span class="string">512</span></span><br><span class="line"><span class="attr">hash-max-ziplist-value</span> <span class="string">64</span></span><br><span class="line"></span><br><span class="line"><span class="attr">list-max-ziplist-size</span> <span class="string">-2</span></span><br><span class="line"></span><br><span class="line"><span class="attr">list-compress-depth</span> <span class="string">0</span></span><br><span class="line"></span><br><span class="line"><span class="attr">set-max-intset-entries</span> <span class="string">512</span></span><br><span class="line"></span><br><span class="line"><span class="attr">zset-max-ziplist-entries</span> <span class="string">128</span></span><br><span class="line"><span class="attr">zset-max-ziplist-value</span> <span class="string">64</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">hll-sparse-max-bytes</span> <span class="string">3000</span></span><br><span class="line"></span><br><span class="line"><span class="attr">stream-node-max-bytes</span> <span class="string">4096</span></span><br><span class="line"><span class="attr">stream-node-max-entries</span> <span class="string">100</span></span><br><span class="line"></span><br><span class="line"><span class="attr">activerehashing</span> <span class="string">yes</span></span><br><span class="line"></span><br><span class="line"><span class="attr">client-output-buffer-limit</span> <span class="string">normal 0 0 0</span></span><br><span class="line"><span class="attr">client-output-buffer-limit</span> <span class="string">replica 256mb 64mb 60</span></span><br><span class="line"><span class="attr">client-output-buffer-limit</span> <span class="string">pubsub 32mb 8mb 60</span></span><br><span class="line"></span><br><span class="line"><span class="attr">hz</span> <span class="string">10</span></span><br><span class="line"></span><br><span class="line"><span class="attr">dynamic-hz</span> <span class="string">yes</span></span><br><span class="line"></span><br><span class="line"><span class="attr">aof-rewrite-incremental-fsync</span> <span class="string">yes</span></span><br><span class="line"></span><br><span class="line"><span class="attr">rdb-save-incremental-fsync</span> <span class="string">yes</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jemalloc-bg-thread</span> <span class="string">yes</span></span><br></pre>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </figure>
                    </div>
                  </details>
                </li>
              </ul>
            </li>
            <li>
              <p>创建容器</p>
              <figure class="highlight properties">
                <table>
                  <tbody>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="comment"># 创建目录<hanla></hanla></span></span><br><span class="line"><span class="attr">mkdir</span> <span class="string">-p /coderitl/redis/conf</span></span><br><span class="line"><span class="comment"># 添加 redis 的配置文件<hanla></hanla></span></span><br><span class="line"><span class="attr">cd</span> <span class="string">/coderitl/redis/conf</span></span><br><span class="line"><span class="comment"># 将提供的配置文件内容写入 redis.conf 文件中<hanla></hanla></span></span><br><span class="line"><span class="attr">vim</span> <span class="string">redis.conf</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># 注意宿主机是否已经安装 安装需要注意端口<hanla></hanla></span></span><br><span class="line"><span class="attr">docker</span> <span class="string">run -p 6379:6379 \</span></span><br><span class="line"><span class="string">    --name redis \</span></span><br><span class="line"><span class="string">    --restart=always \</span></span><br><span class="line"><span class="string">    --privileged=true \</span></span><br><span class="line"><span class="string">    -v /coderitl/redis/data/:/data \</span></span><br><span class="line"><span class="string">    -v /coderitl/redis/conf/redis.conf:/etc/redis/redis.conf \</span></span><br><span class="line"><span class="string">    -d redis:6.0.8 redis-server /etc/redis/redis.conf</span></span><br></pre>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </figure>
              <ul>
                <li>
                  <p>拉去镜像后更新添加选项</p>
                  <figure class="highlight properties">
                    <table>
                      <tbody>
                        <tr>
                          <td class="gutter">
                            <pre><span class="line">1</span><br><span class="line">2</span><br></pre>
                          </td>
                          <td class="code">
                            <pre><span class="line"><span class="comment"># 未添加时执行,<hanla></hanla>作用: 当启动 linux 时跟随启动,<hanla></hanla>不常用 Redis 时慎用<hanla></hanla></span></span><br><span class="line"><span class="attr">docker</span> <span class="string">update redis --restart=always</span></span><br></pre>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </figure>
                </li>
              </ul>
            </li>
          </ul>
          <h4 id="NotePad"><a href="#NotePad" class="headerlink" title="NotePad++"></a>NotePad++</h4>
          <ul>
            <li>
              <p>插件</p>
              <figure class="highlight properties">
                <table>
                  <tbody>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="attr">NppFTP</span></span><br></pre>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </figure>
            </li>
            <li>
              <p>使用</p>
              <table>
                <thead>
                  <tr>
                    <th align="center"><code>SFTP</code></th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/04f7a68bb98d40daadb619389897858f.png"></td>
                  </tr>
                </tbody>
              </table>
            </li>
            <li>
              <p>作用</p>
              <blockquote>
                <p>可以直接修改虚拟机内部文件，支持语法高亮</p>
              </blockquote>
            </li>
            <li>
              <p>文件打开</p>
              <table>
                <thead>
                  <tr>
                    <th align="center">双击打开的文件</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/e60e58a2bcaa4a889b2c45987e27008c.png"></td>
                  </tr>
                </tbody>
              </table>
            </li>
          </ul>
          <h4 id="MYSQL-主从复制-Docker"><a href="#MYSQL-主从复制-Docker" class="headerlink" title="MYSQL-主从复制-Docker"></a>MYSQL-主从复制-Docker</h4>
          <ul>
            <li>
              <p>步骤</p>
              <ol>
                <li>
                  <p>新建主服务器容器实例<hanla></hanla><code>3307</code></p>
                  <figure class="highlight properties">
                    <table>
                      <tbody>
                        <tr>
                          <td class="gutter">
                            <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre>
                          </td>
                          <td class="code">
                            <pre><span class="line"><span class="attr">docker</span> <span class="string">run -p 3307:3306 --name mysql-master \</span></span><br><span class="line"><span class="string">-v /mydata/mysql-master/log:/var/log/mysql \</span></span><br><span class="line"><span class="string">-v /mydata/mysql-master/data:/var/lib/mysql \</span></span><br><span class="line"><span class="string">-v /mydata/mysql-master/conf:/etc/mysql \</span></span><br><span class="line"><span class="string">-e MYSQL_ROOT_PASSWORD=root \</span></span><br><span class="line"><span class="string">-d mysql:5.7</span></span><br></pre>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </figure>
                </li>
                <li>
                  <p>进入<hanla></hanla><code>/mydata/mysql-master/conf</code>
                    <hanla></hanla>目录下新建<hanla></hanla><code>my.cnf</code>
                  </p>
                  <figure class="highlight properties">
                    <table>
                      <tbody>
                        <tr>
                          <td class="gutter">
                            <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre>
                          </td>
                          <td class="code">
                            <pre><span class="line"><span class="attr">[mysqld]</span></span><br><span class="line"><span class="comment">## 设置<hanla></hanla>server_id，同一局域网中需要唯一<hanla></hanla></span></span><br><span class="line"><span class="attr">server_id</span>=<span class="string">101 </span></span><br><span class="line"><span class="comment">## 指定不需要同步的数据库名称<hanla></hanla></span></span><br><span class="line"><span class="attr">binlog-ignore-db</span>=<span class="string">mysql  </span></span><br><span class="line"><span class="comment">## 开启二进制日志功能<hanla></hanla></span></span><br><span class="line"><span class="attr">log-bin</span>=<span class="string">mall-mysql-bin  </span></span><br><span class="line"><span class="comment">## 设置二进制日志使用内存大小（事务）</span></span><br><span class="line"><span class="attr">binlog_cache_size</span>=<span class="string">1M  </span></span><br><span class="line"><span class="comment">## 设置使用的二进制日志格式（mixed,statement,row）</span></span><br><span class="line"><span class="attr">binlog_format</span>=<span class="string">mixed  </span></span><br><span class="line"><span class="comment">## 二进制日志过期清理时间。默认值为<hanla></hanla>0，表示不自动清理。</span></span><br><span class="line"><span class="attr">expire_logs_days</span>=<span class="string">7  </span></span><br><span class="line"><span class="comment">## 跳过主从复制中遇到的所有错误或指定类型的错误，避免<hanla></hanla>slave<hanla></hanla>端复制中断。</span></span><br><span class="line"><span class="comment">## 如：1062<hanla></hanla>错误是指一些主键重复，1032<hanla></hanla>错误是因为主从数据库数据不一致<hanla></hanla></span></span><br><span class="line"><span class="attr">slave_skip_errors</span>=<span class="string">1062</span></span><br></pre>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </figure>
                </li>
                <li>
                  <p>修改完配置后重启<hanla></hanla><code>master</code>
                    <hanla></hanla>实例
                  </p>
                  <figure class="highlight properties">
                    <table>
                      <tbody>
                        <tr>
                          <td class="gutter">
                            <pre><span class="line">1</span><br></pre>
                          </td>
                          <td class="code">
                            <pre><span class="line"><span class="attr">docker</span> <span class="string">restart mysql-master</span></span><br></pre>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </figure>
                </li>
                <li>
                  <p>进入<hanla></hanla><code>mysql-master</code>
                    <hanla></hanla>容器
                  </p>
                  <figure class="highlight properties">
                    <table>
                      <tbody>
                        <tr>
                          <td class="gutter">
                            <pre><span class="line">1</span><br><span class="line">2</span><br></pre>
                          </td>
                          <td class="code">
                            <pre><span class="line"><span class="comment"># 进入容器 测试是否可以登录成功<hanla></hanla></span></span><br><span class="line"><span class="attr">docker</span> <span class="string">exec -it id bash </span></span><br></pre>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </figure>
                  <table>
                    <thead>
                      <tr>
                        <th align="center">测试是否可以登录成功</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/daa1c10a4b5843babd80c180db52e16e.png"></td>
                      </tr>
                    </tbody>
                  </table>
                </li>
                <li>
                  <p><code>master</code>
                    <hanla></hanla>容器实例内创建数据同步用户
                  </p>
                  <figure class="highlight sql">
                    <table>
                      <tbody>
                        <tr>
                          <td class="gutter">
                            <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre>
                          </td>
                          <td class="code">
                            <pre><span class="line"># 创建用户<hanla></hanla></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">user</span> <span class="string">'slave'</span>@<span class="string">'%'</span> identified <span class="keyword">by</span> <span class="string">'123456'</span>;</span><br><span class="line"># 授权【虚拟机内的 MSQL 没有忽略大小写】</span><br><span class="line"><span class="keyword">GRANT</span> REPLICATION SLAVE, REPLICATION CLIENT <span class="keyword">ON</span> <span class="operator">*</span>.<span class="operator">*</span> <span class="keyword">TO</span> <span class="string">'slave'</span>@<span class="string">'%'</span>;</span><br></pre>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </figure>
                  <table>
                    <thead>
                      <tr>
                        <th align="center"><code>windows</code>
                          <hanla></hanla>忽略大小写
                        </th>
                        <th align="center"><code>Linux</code>
                          <hanla></hanla>大小写敏感
                        </th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/f508033750b84eeeae344724579ed769.png"></td>
                        <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/7bd5c2df72624f5f982ceaf870dbf8a2.png"></td>
                      </tr>
                    </tbody>
                  </table>
                </li>
                <li>
                  <p>新建从服务器实例容器<hanla></hanla><code>3308</code></p>
                  <figure class="highlight properties">
                    <table>
                      <tbody>
                        <tr>
                          <td class="gutter">
                            <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre>
                          </td>
                          <td class="code">
                            <pre><span class="line"><span class="attr">docker</span> <span class="string">run -p 3308:3306 --name mysql-slave \</span></span><br><span class="line"><span class="string">-v /mydata/mysql-slave/log:/var/log/mysql \</span></span><br><span class="line"><span class="string">-v /mydata/mysql-slave/data:/var/lib/mysql \</span></span><br><span class="line"><span class="string">-v /mydata/mysql-slave/conf:/etc/mysql \</span></span><br><span class="line"><span class="string">-e MYSQL_ROOT_PASSWORD=root  \</span></span><br><span class="line"><span class="string">-d mysql:5.7</span></span><br></pre>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </figure>
                </li>
                <li>
                  <p>进入<hanla></hanla><code>/mydata/mysql-slave/conf</code>
                    <hanla></hanla>目录下新建<hanla></hanla><code>my.cnf</code>
                  </p>
                  <figure class="highlight properties">
                    <table>
                      <tbody>
                        <tr>
                          <td class="gutter">
                            <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre>
                          </td>
                          <td class="code">
                            <pre><span class="line"><span class="attr">[mysqld]</span></span><br><span class="line"><span class="comment">## 设置<hanla></hanla>server_id，同一局域网中需要唯一<hanla></hanla></span></span><br><span class="line"><span class="attr">server_id</span>=<span class="string">102</span></span><br><span class="line"><span class="comment">## 指定不需要同步的数据库名称<hanla></hanla></span></span><br><span class="line"><span class="attr">binlog-ignore-db</span>=<span class="string">mysql  </span></span><br><span class="line"><span class="comment">## 开启二进制日志功能，以备<hanla></hanla>Slave<hanla></hanla>作为其它数据库实例的<hanla></hanla>Master<hanla></hanla>时使用<hanla></hanla></span></span><br><span class="line"><span class="attr">log-bin</span>=<span class="string">mall-mysql-slave1-bin  </span></span><br><span class="line"><span class="comment">## 设置二进制日志使用内存大小（事务）</span></span><br><span class="line"><span class="attr">binlog_cache_size</span>=<span class="string">1M  </span></span><br><span class="line"><span class="comment">## 设置使用的二进制日志格式（mixed,statement,row）</span></span><br><span class="line"><span class="attr">binlog_format</span>=<span class="string">mixed  </span></span><br><span class="line"><span class="comment">## 二进制日志过期清理时间。默认值为<hanla></hanla>0，表示不自动清理。</span></span><br><span class="line"><span class="attr">expire_logs_days</span>=<span class="string">7  </span></span><br><span class="line"><span class="comment">## 跳过主从复制中遇到的所有错误或指定类型的错误，避免<hanla></hanla>slave<hanla></hanla>端复制中断。</span></span><br><span class="line"><span class="comment">## 如：1062<hanla></hanla>错误是指一些主键重复，1032<hanla></hanla>错误是因为主从数据库数据不一致<hanla></hanla></span></span><br><span class="line"><span class="attr">slave_skip_errors</span>=<span class="string">1062  </span></span><br><span class="line"><span class="comment">## relay_log<hanla></hanla>配置中继日志<hanla></hanla></span></span><br><span class="line"><span class="attr">relay_log</span>=<span class="string">mall-mysql-relay-bin  </span></span><br><span class="line"><span class="comment">## log_slave_updates<hanla></hanla>表示<hanla></hanla>slave<hanla></hanla>将复制事件写进自己的二进制日志<hanla></hanla></span></span><br><span class="line"><span class="attr">log_slave_updates</span>=<span class="string">1  </span></span><br><span class="line"><span class="comment">## slave<hanla></hanla>设置为只读（具有<hanla></hanla>super<hanla></hanla>权限的用户除外）</span></span><br><span class="line"><span class="attr">read_only</span>=<span class="string">1</span></span><br></pre>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </figure>
                </li>
                <li>
                  <p>修改完配置后重启<hanla></hanla><code>slave</code>
                    <hanla></hanla>实例
                  </p>
                  <figure class="highlight properties">
                    <table>
                      <tbody>
                        <tr>
                          <td class="gutter">
                            <pre><span class="line">1</span><br></pre>
                          </td>
                          <td class="code">
                            <pre><span class="line"><span class="attr">docker</span> <span class="string">restart mysql-slave</span></span><br></pre>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </figure>
                </li>
                <li>
                  <p>在主数据库中查看主从同步状态</p>
                  <figure class="highlight properties">
                    <table>
                      <tbody>
                        <tr>
                          <td class="gutter">
                            <pre><span class="line">1</span><br></pre>
                          </td>
                          <td class="code">
                            <pre><span class="line"><span class="attr">show</span> <span class="string">master status;</span></span><br></pre>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </figure>
                </li>
                <li>
                  <p>进入<hanla></hanla><code>mysql-slave</code>
                    <hanla></hanla>容器
                  </p>
                  <figure class="highlight properties">
                    <table>
                      <tbody>
                        <tr>
                          <td class="gutter">
                            <pre><span class="line">1</span><br></pre>
                          </td>
                          <td class="code">
                            <pre><span class="line"><span class="attr">docker</span> <span class="string">exec -it mysql-slave bash</span></span><br></pre>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </figure>
                </li>
                <li>
                  <p>在<code>从数据库</code>中配置主从复制</p>
                  <figure class="highlight sql">
                    <table>
                      <tbody>
                        <tr>
                          <td class="gutter">
                            <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre>
                          </td>
                          <td class="code">
                            <pre><span class="line"># change master <span class="keyword">to</span> master_host<span class="operator">=</span><span class="string">'宿主机<hanla></hanla>ip'</span>, master_user<span class="operator">=</span><span class="string">'slave'</span>, master_password<span class="operator">=</span><span class="string">'123456'</span>, master_port<span class="operator">=</span><span class="number">3307</span>, master_log_file<span class="operator">=</span><span class="string">'mall-mysql-bin.000001'</span>, master_log_pos<span class="operator">=</span><span class="number">617</span>, master_connect_retry<span class="operator">=</span><span class="number">30</span>;</span><br><span class="line"></span><br><span class="line"># 需要启动的命令<hanla></hanla></span><br><span class="line">change master <span class="keyword">to</span> master_host<span class="operator">=</span><span class="string">'192.168.2.3'</span>, master_user<span class="operator">=</span><span class="string">'slave'</span>, master_password<span class="operator">=</span><span class="string">'123456'</span>, master_port<span class="operator">=</span><span class="number">3307</span>, master_log_file<span class="operator">=</span><span class="string">'mall-mysql-bin.000002'</span>, master_log_pos<span class="operator">=</span><span class="number">154</span>, master_connect_retry<span class="operator">=</span><span class="number">30</span>;</span><br><span class="line"></span><br><span class="line"># 参数解释说明<hanla></hanla></span><br><span class="line">master_host：主数据库的<hanla></hanla>IP<hanla></hanla>地址；</span><br><span class="line">master_port：主数据库的运行端口；</span><br><span class="line">master_user：在主数据库创建的用于同步数据的用户账号；</span><br><span class="line">master_password：在主数据库创建的用于同步数据的用户密码；</span><br><span class="line">master_log_file：指定从数据库要复制数据的日志文件，通过查看主数据的状态，获取<hanla></hanla>File<hanla></hanla>参数；</span><br><span class="line">master_log_pos：指定从数据库从哪个位置开始复制数据，通过查看主数据的状态，获取<hanla></hanla>Position<hanla></hanla>参数；</span><br><span class="line">master_connect_retry：连接失败重试的时间间隔，单位为秒。</span><br><span class="line"></span><br><span class="line"></span><br></pre>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </figure>
                </li>
                <li>
                  <p>在<code>从数据库</code>中查看主从同步状态</p>
                  <figure class="highlight sql">
                    <table>
                      <tbody>
                        <tr>
                          <td class="gutter">
                            <pre><span class="line">1</span><br></pre>
                          </td>
                          <td class="code">
                            <pre><span class="line"><span class="keyword">show</span> slave status\G;</span><br></pre>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </figure>
                  <table>
                    <thead>
                      <tr>
                        <th align="center">还未开始</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/7b48664313e941fa866fbb328a23441a.png"></td>
                      </tr>
                    </tbody>
                  </table>
                </li>
                <li>
                  <p>在<code>从数据库</code>中开启主从同步</p>
                  <figure class="highlight properties">
                    <table>
                      <tbody>
                        <tr>
                          <td class="gutter">
                            <pre><span class="line">1</span><br></pre>
                          </td>
                          <td class="code">
                            <pre><span class="line"><span class="attr">start</span> <span class="string">slave;</span></span><br></pre>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </figure>
                </li>
                <li>
                  <p>查看<code>从数据库</code>状态发现已经同步</p>
                  <table>
                    <thead>
                      <tr>
                        <th align="center">主从同步已开启</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/db5092abbd0e44e0ac40d38a98556377.png"></td>
                      </tr>
                    </tbody>
                  </table>
                </li>
                <li>
                  <p>主从复制测试</p>
                  <ul>
                    <li>
                      <p><code>主机</code>新建库-使用库-新建表-插入数据</p>
                    </li>
                    <li>
                      <p>从机使用库-查看记录</p>
                      <table>
                        <thead>
                          <tr>
                            <th align="center">主从测试</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr>
                            <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/7593bd9b733449e299838ef46d445565.png"></td>
                          </tr>
                        </tbody>
                      </table>
                    </li>
                  </ul>
                </li>
              </ol>
            </li>
          </ul>
          <h4 id="安装Redis集群-分布式存储案例真题"><a href="#安装Redis集群-分布式存储案例真题" class="headerlink" title="安装Redis集群-分布式存储案例真题"></a>安装<hanla></hanla>Redis<hanla></hanla>集群-分布式存储案例真题</h4>
          <ul>
            <li>
              <p><code>cluster(集群模式)-docker</code>：哈希槽分区进行亿级数据存储</p>
            </li>
            <li>
              <p>面试题</p>
              <ul>
                <li>
                  <p><code>1~2</code>
                    <hanla></hanla>亿条数据需要缓存，请问如何设计这个存储案例
                  </p>
                  <blockquote>
                    <p>解决方案如下:</p>
                  </blockquote>
                  <ul>
                    <li>
                      <p>哈希取余分区</p>
                      <table>
                        <thead>
                          <tr>
                            <th align="center">模型</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr>
                            <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/b6b1f07656fb441f818d8854f77e5986.png"></td>
                          </tr>
                        </tbody>
                      </table>
                      <blockquote>
                        <p><code>2</code>
                          <hanla></hanla>亿条记录就是<hanla></hanla><code>2</code>
                          <hanla></hanla>亿个<hanla></hanla><code>k,v</code>,<hanla></hanla>我们<code>单机</code>不行必须要用分布式多机,<hanla></hanla>假设有<hanla></hanla><code>3</code>
                          <hanla></hanla>台机器构成一个集群，用户每次读写操作都是根据公式:<code>hash(key)%N</code>
                          <hanla></hanla>个机器台数,<hanla></hanla>计算出哈希值,<hanla></hanla>用来决定数据映射到哪一个节点上。
                        </p>
                      </blockquote>
                      <ul>
                        <li>
                          <p>优点</p>
                          <blockquote>
                            <p>简单粗暴,<hanla></hanla>直接有效，只需要预估好数据规划好节点，例如<hanla></hanla><code>3<hanla></hanla>台、8<hanla></hanla>台、10<hanla></hanla>台</code>,<hanla></hanla>就能保证一段时间的数据支撑。使用<hanla></hanla><code>Hash</code>
                              <hanla></hanla>算法让固定的一部分请求落到同一台服务器，这样每台服务器固定处理一部分请求，起到负载均衡和分而治之的作用
                            </p>
                          </blockquote>
                        </li>
                        <li>
                          <p>缺点</p>
                          <blockquote>
                            <p>原来规划好的节点，进行扩容或者缩容就比较麻烦了，不管扩容、每次数据变动导致节点有变动，映射关系需要重新进行计算，在服务器个数固定不变时没有问题，如果需要弹性扩容或故障停机的情况下，原来的取模公式就会发生变化:<code>Hash*(key)/3</code>
                              <hanla></hanla>会变成<hanla></hanla><code>Hash(key)/?</code>.<hanla></hanla>此时地址经过某个<hanla></hanla><code>Redis</code>
                              <hanla></hanla>机器宕机了，由于台数数量变化,<hanla></hanla>会导致<hanla></hanla><code>Hash<hanla></hanla>取余全部数据重新洗牌</code>
                            </p>
                          </blockquote>
                        </li>
                      </ul>
                    </li>
                    <li>
                      <p>一致性哈希算法分区</p>
                      <ul>
                        <li>
                          <p>背景</p>
                          <blockquote>
                            <p>一致性算法在<hanla></hanla><code>1997</code>
                              <hanla></hanla>年由麻省理工学院中剔除,<hanla></hanla>设计目标是为了解决<code>分布式缓存数据变动和映射问题</code>，<code>某个机器宕机了,<hanla></hanla>分母数量改变了，自然取余数就不<hanla></hanla>OK</code>
                              <hanla></hanla>了
                            </p>
                          </blockquote>
                        </li>
                        <li>
                          <p>作用</p>
                          <blockquote>
                            <p>提出一致性<hanla></hanla><code>Hash</code>
                              <hanla></hanla>解决方案，目的是当服务器个数发生变动时，尽量减少影响客户端到服务器的映射关系
                            </p>
                          </blockquote>
                        </li>
                        <li>
                          <p>实现的三大步骤</p>
                          <ul>
                            <li>
                              <p>算法构建一致性哈希环</p>
                              <blockquote>
                                <p>一致性哈希算法必然有个<hanla></hanla><code>hash</code>
                                  <hanla></hanla>函数并按照算法产生<hanla></hanla><code>hash</code>
                                  <hanla></hanla>值,<hanla></hanla>这个算法的所有可能哈希值会构成一个全量集，这个集合可以成为一个<hanla></hanla><code>hash</code>
                                  <hanla></hanla>空间【<code>0,2^32-1</code>】，这个是一个线性空间，但是在算法中,<hanla></hanla>我们通过适当的逻辑控制它首尾相连<hanla></hanla>(<code>0=2^32</code>)，这样让他逻辑上形成了一个环形空间
                                </p>
                                <p>它也是按照使用取模的方法,<hanla></hanla>前面提到的是对服务器数量进行取模。而一致性<hanla></hanla><code>Hash</code>
                                  <hanla></hanla>算法是对<hanla></hanla><code>2^32</code>
                                  <hanla></hanla>取模,<hanla></hanla>简单来说:<code>
                                    <hanla></hanla>一致性 Hash 算法将整个哈希值空间组织成一个虚拟的圆环
                                  </code>,<hanla></hanla>如果假设某哈希函数<hanla></hanla><code>H</code>
                                  <hanla></hanla>的值空间为<hanla></hanla><code>0-2^32-1(即哈希值是一个 32 位无符号整型)</code>，整个哈希环如下: 整个空间按顺时针方向组织,<hanla></hanla>圆环的正上方的点代表<hanla></hanla><code>0</code>，<code>0</code>
                                  <hanla></hanla>点右侧的第一个点代表<hanla></hanla><code>1</code>，依次类推，直到<hanla></hanla><code>2^32-1</code>，也就是说<hanla></hanla><code>0</code>
                                  <hanla></hanla>点左侧的第一个点代表<hanla></hanla><code>2^32-1</code>，<code>0</code>
                                  <hanla></hanla>和<hanla></hanla><code>2^32-1</code>
                                  <hanla></hanla>在零点房中重合，我们把这个由<hanla></hanla><code>2^32</code>
                                  <hanla></hanla>个点组成的圆环称为<hanla></hanla><code>Hash</code>
                                  <hanla></hanla>环
                                </p>
                                <table>
                                  <thead>
                                    <tr>
                                      <th align="center">哈希环</th>
                                    </tr>
                                  </thead>
                                  <tbody>
                                    <tr>
                                      <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/4fd0d86be4d24e568f02cd23ddc11890.png"></td>
                                    </tr>
                                  </tbody>
                                </table>
                              </blockquote>
                            </li>
                            <li>
                              <p>服务器<hanla></hanla><code>IP</code>
                                <hanla></hanla>节点映射
                              </p>
                              <blockquote>
                                <p>将集群中各个<hanla></hanla><code>IP</code>
                                  <hanla></hanla>节点映射到环上的某一个位置。
                                </p>
                                <p>将各个服务器使用<hanla></hanla><code>Hash</code>
                                  <hanla></hanla>进行一个<code>哈希</code>,<hanla></hanla>具体可以选择服务器的<hanla></hanla><code>IP</code>
                                  <hanla></hanla>或主机名作为关键字进行哈希,<hanla></hanla>这样每台机器就能确定其在哈希环上的位置。假如:<code>4</code>
                                  <hanla></hanla>个节点<hanla></hanla><code>A、B、C、D</code>
                                  <hanla></hanla>经过<hanla></hanla><code>IP</code>
                                  <hanla></hanla>地址的<code>哈希函数计算<hanla></hanla>(hash(ip))</code>，使用<hanla></hanla><code>IP</code>
                                  <hanla></hanla>地址后在环空间的位置如下:
                                </p>
                                <table>
                                  <thead>
                                    <tr>
                                      <th align="center">服务器<hanla></hanla><code>IP</code>
                                        <hanla></hanla>节点映射<hanla></hanla>(Eg)
                                      </th>
                                    </tr>
                                  </thead>
                                  <tbody>
                                    <tr>
                                      <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/f56f370ba9c041f0a9d3003110209a88.png"></td>
                                    </tr>
                                  </tbody>
                                </table>
                              </blockquote>
                            </li>
                            <li>
                              <p><code>key</code>
                                <hanla></hanla>落到服务器的落键规则
                              </p>
                              <blockquote>
                                <p>当我们需要存储一个<hanla></hanla><code>kv</code>
                                  <hanla></hanla>键值对时,<hanla></hanla>首先计算<hanla></hanla><code>key</code>
                                  <hanla></hanla>的<hanla></hanla><code>hash</code>
                                  <hanla></hanla>值,<code>hash(key)</code>,<hanla></hanla>将这个<hanla></hanla><code>key</code>
                                  <hanla></hanla>使用相同的函数<hanla></hanla><code>Hash</code>
                                  <hanla></hanla>计算出哈希值并确定此数据在环上的位置,<code>
                                    <hanla></hanla>从此位置沿环顺时针"行走"
                                  </code>,<hanla></hanla>第一台遇到的服务器就是其应该定位到的服务器,<hanla></hanla>并将该键值对存储在该节点上。
                                </p>
                                <p>如果我们有<hanla></hanla><code>Object A、B、C、D</code>
                                  <hanla></hanla>四个数据对象,<hanla></hanla>经过哈希计算后,<hanla></hanla>在环空间的位置如下: 根据一致性<hanla></hanla><code>Hash</code>
                                  <hanla></hanla>算法,<hanla></hanla>数据<hanla></hanla><code>A</code>
                                  <hanla></hanla>会被定位到<hanla></hanla><code>Node A</code>
                                  <hanla></hanla>上,…
                                </p>
                                <table>
                                  <thead>
                                    <tr>
                                      <th align="center">落键规则</th>
                                    </tr>
                                  </thead>
                                  <tbody>
                                    <tr>
                                      <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/e8bfb29f81e84dd6bc35eee942d2dca6.png"></td>
                                    </tr>
                                  </tbody>
                                </table>
                              </blockquote>
                            </li>
                          </ul>
                        </li>
                        <li>
                          <p>优点</p>
                          <ul>
                            <li>
                              <p>一致性哈希算法的<code>容错性</code></p>
                              <blockquote>
                                <p>假设<hanla></hanla><code>Node C</code>
                                  <hanla></hanla>宕机，可以看到此时对象<hanla></hanla><code>A、B、D</code>
                                  <hanla></hanla>不会受到影响，只有<hanla></hanla><code>C</code>
                                  <hanla></hanla>对象被重定位到<hanla></hanla><code>Node D</code>。一般的，在一致性<hanla></hanla><code>Hash</code>
                                  <hanla></hanla>算法中，如果一台服务器不可用，则受影响的数据仅仅是此服务器到其环空间中前一台服务器（即沿着逆时针方向行走遇到的第一台服务器）之间数据，其它不会受到影响。简单说，就是<hanla></hanla>C<hanla></hanla>挂了，受到影响的只是<hanla></hanla>B、C<hanla></hanla>之间的数据，并且这些数据会转移到<hanla></hanla>D<hanla></hanla>进行存储。
                                </p>
                              </blockquote>
                            </li>
                            <li>
                              <p>一致性哈希算法的<code>扩展性</code></p>
                              <blockquote>
                                <p>数据量增加了，需要增加一台节点<hanla></hanla>NodeX，X<hanla></hanla>的位置在<hanla></hanla>A<hanla></hanla>和<hanla></hanla>B<hanla></hanla>之间，那收到影响的也就是<hanla></hanla>A<hanla></hanla>到<hanla></hanla>X<hanla></hanla>之间的数据，重新把<hanla></hanla>A<hanla></hanla>到<hanla></hanla>X<hanla></hanla>的数据录入到<hanla></hanla>X<hanla></hanla>上即可，</p>
                                <p>不会导致<hanla></hanla>hash<hanla></hanla>取余全部数据重新洗牌。</p>
                              </blockquote>
                            </li>
                          </ul>
                        </li>
                        <li>
                          <p>缺点</p>
                          <blockquote>
                            <p>一致性<hanla></hanla>Hash<hanla></hanla>算法在服务<strong>节点太少时</strong>，容易因为节点分布不均匀而造成<strong>数据倾斜</strong>（被缓存的对象大部分集中缓存在某一台服务器上）问题，</p>
                          </blockquote>
                        </li>
                      </ul>
                    </li>
                    <li>
                      <p>哈希槽分区</p>
                      <ul>
                        <li>
                          <p>为什么会出现</p>
                          <blockquote>
                            <p>是由于<code>一致性哈希算法中数据倾斜</code></p>
                            <p>哈希槽实质上就是一个数组,<hanla></hanla>数组<hanla></hanla><code>[0,2^14-1]</code>
                              <hanla></hanla>形成一个<hanla></hanla><code>hash slot</code>
                              <hanla></hanla>空间
                            </p>
                          </blockquote>
                        </li>
                        <li>
                          <p>能干什么</p>
                          <blockquote>
                            <p>解决均匀分配的问题，<code>在数据和节点之间又加入了一层,<hanla></hanla>把这层称为哈希槽<hanla></hanla>(slot)，用于管理数据和节点之间的关系</code>，现在就相当于节点上放的是槽,<hanla></hanla>槽里放的是数据。</p>
                            <p>槽解决的是粒度问题，相当于把粒度变大了，这样方便于数据移动</p>
                            <p>哈希解决的是映射问题,<hanla></hanla>使用<hanla></hanla><code>key</code>
                              <hanla></hanla>的哈希值来计算所在的槽,<hanla></hanla>便于数据分配
                            </p>
                          </blockquote>
                        </li>
                        <li>
                          <p>多少个<hanla></hanla><code>hash</code>
                            <hanla></hanla>槽
                          </p>
                          <blockquote>
                            <p>一个集群只能有<hanla></hanla><code>16384</code>
                              <hanla></hanla>个槽，编号<hanla></hanla><code>0-16383（0-2^14-1）</code>。这些槽会分配给集群中的所有主节点，分配策略没有要求。可以指定哪些编号的槽分配给哪个主节点。集群会记录节点和槽的对应关系。解决了节点和槽的关系后，接下来就需要对<hanla></hanla><code>key</code>
                              <hanla></hanla>求哈希值，然后对<hanla></hanla><code>16384</code>
                              <hanla></hanla>取余，余数是几<hanla></hanla><code>key</code>
                              <hanla></hanla>就落入对应的槽里。<code>slot = CRC16(key) % 16384</code>。以槽为单位移动数据，因为槽的数目是固定的，处理起来比较容易，这样数据移动问题就解决了。
                            </p>
                          </blockquote>
                        </li>
                        <li>
                          <p>哈希槽计算</p>
                          <blockquote>
                            <p>Redis 集群中内置了 16384 个哈希槽，redis 会根据节点数量大致均等的将哈希槽映射到不同的节点。当需要在 Redis 集群中放置一个 key-value<hanla></hanla>时，redis 先对 key 使用 crc16 算法算出一个结果，然后把结果对 16384 求余数，这样每个 key 都会对应一个编号在 0-16383 之间的哈希槽，也就是映射到某个节点上。如下代码，key<hanla></hanla>之<hanla></hanla>A 、B<hanla></hanla>在<hanla></hanla>Node2， key<hanla></hanla>之<hanla></hanla>C<hanla></hanla>落在<hanla></hanla>Node3<hanla></hanla>上</p>
                          </blockquote>
                        </li>
                        <li>
                          <p><code>3</code>
                            <hanla></hanla>主<hanla></hanla><code>3</code>
                            <hanla></hanla>从
                          </p>
                          <ul>
                            <li>
                              <p>分段</p>
                              <table>
                                <thead>
                                  <tr>
                                    <th align="center"><code>分段</code></th>
                                  </tr>
                                </thead>
                                <tbody>
                                  <tr>
                                    <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/ce8759ddd5bc4845bc58049f0a7c1bb1.png"></td>
                                  </tr>
                                </tbody>
                              </table>
                            </li>
                            <li>
                              <p>创建实例</p>
                              <figure class="highlight properties">
                                <table>
                                  <tbody>
                                    <tr>
                                      <td class="gutter">
                                        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre>
                                      </td>
                                      <td class="code">
                                        <pre><span class="line"><span class="comment"># --cluster-enabled yes【开启集群】 --appendonly yes【持久化】</span></span><br><span class="line"><span class="attr">docker</span> <span class="string">run -d --name redis-node-1 --net host --privileged=true -v /data/redis/share/redis-node-1:/data redis:6.0.8 --cluster-enabled yes --appendonly yes --port 6381</span></span><br><span class="line"></span><br><span class="line"><span class="attr">docker</span> <span class="string">run -d --name redis-node-2 --net host --privileged=true -v /data/redis/share/redis-node-2:/data redis:6.0.8 --cluster-enabled yes --appendonly yes --port 6382</span></span><br><span class="line"></span><br><span class="line"><span class="attr">docker</span> <span class="string">run -d --name redis-node-3 --net host --privileged=true -v /data/redis/share/redis-node-3:/data redis:6.0.8 --cluster-enabled yes --appendonly yes --port 6383</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">docker</span> <span class="string">run -d --name redis-node-4 --net host --privileged=true -v /data/redis/share/redis-node-4:/data redis:6.0.8 --cluster-enabled yes --appendonly yes --port 6384</span></span><br><span class="line"></span><br><span class="line"><span class="attr">docker</span> <span class="string">run -d --name redis-node-5 --net host --privileged=true -v /data/redis/share/redis-node-5:/data redis:6.0.8 --cluster-enabled yes --appendonly yes --port 6385</span></span><br><span class="line"></span><br><span class="line"><span class="attr">docker</span> <span class="string">run -d --name redis-node-6 --net host --privileged=true -v /data/redis/share/redis-node-6:/data redis:6.0.8 --cluster-enabled yes --appendonly yes --port 6386</span></span><br><span class="line"></span><br><span class="line"></span><br></pre>
                                      </td>
                                    </tr>
                                  </tbody>
                                </table>
                              </figure>
                              <table>
                                <thead>
                                  <tr>
                                    <th align="center">启动查看</th>
                                  </tr>
                                </thead>
                                <tbody>
                                  <tr>
                                    <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/69c001800297449f87a551d2e77ccd92.png"></td>
                                  </tr>
                                </tbody>
                              </table>
                            </li>
                            <li>
                              <p>进入容器<hanla></hanla><code>redis-node-1</code>
                                <hanla></hanla>并为<hanla></hanla><code>6</code>
                                <hanla></hanla>台机器构建集群关系
                              </p>
                              <figure class="highlight properties">
                                <table>
                                  <tbody>
                                    <tr>
                                      <td class="gutter">
                                        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre>
                                      </td>
                                      <td class="code">
                                        <pre><span class="line"><span class="comment"># 进入 redis-node-1</span></span><br><span class="line"><span class="attr">docker</span> <span class="string">exec -it redis-node-1 bash</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># -cluster-replicas 1 表示为每个<hanla></hanla>master<hanla></hanla>创建一个<hanla></hanla>slave<hanla></hanla>节点<hanla></hanla></span></span><br><span class="line"><span class="attr">redis-cli</span> <span class="string">--cluster create 192.168.2.3:6381 192.168.2.3:6382 192.168.2.3:6383 192.168.2.3:6384 192.168.2.3:6385 192.168.2.3:6386 --cluster-replicas 1</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># 之后输入: yes</span></span><br><span class="line"></span><br></pre>
                                      </td>
                                    </tr>
                                  </tbody>
                                </table>
                              </figure>
                              <table>
                                <thead>
                                  <tr>
                                    <th align="center">关系构建<hanla></hanla>(分段)</th>
                                  </tr>
                                </thead>
                                <tbody>
                                  <tr>
                                    <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/5e477ef4036342e196d5b2352de28d7c.png"></td>
                                  </tr>
                                </tbody>
                              </table>
                            </li>
                          </ul>
                        </li>
                        <li>
                          <p>链接进入<hanla></hanla><code>6381</code>
                            <hanla></hanla>作为切入点,<hanla></hanla>查看集群状态
                          </p>
                          <figure class="highlight properties">
                            <table>
                              <tbody>
                                <tr>
                                  <td class="gutter">
                                    <pre><span class="line">1</span><br><span class="line">2</span><br></pre>
                                  </td>
                                  <td class="code">
                                    <pre><span class="line"><span class="comment"># 在 redis-node-1 容器内部<hanla></hanla></span></span><br><span class="line"><span class="attr">redis-cli</span> <span class="string">-p 6381</span></span><br></pre>
                                  </td>
                                </tr>
                              </tbody>
                            </table>
                          </figure>
                          <table>
                            <thead>
                              <tr>
                                <th align="center">整体情况</th>
                                <th align="center">节点信息</th>
                              </tr>
                            </thead>
                            <tbody>
                              <tr>
                                <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/2f38a3e21b3e4b0c80a99e7252544357.png"></td>
                                <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/d70a868ea9b240d2a7ac473fe2987001.png"></td>
                              </tr>
                            </tbody>
                          </table>
                        </li>
                        <li>
                          <p>主机下挂载从机情况</p>
                          <table>
                            <thead>
                              <tr>
                                <th align="center">通过<hanla></hanla><code>cluster nodes</code>
                                  <hanla></hanla>查看
                                </th>
                              </tr>
                            </thead>
                            <tbody>
                              <tr>
                                <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/ffafc6aac9e94c0e86abdd280a859391.png"></td>
                              </tr>
                            </tbody>
                          </table>
                        </li>
                      </ul>
                    </li>
                  </ul>
                </li>
              </ul>
            </li>
            <li>
              <p>主从容错切换迁移案例</p>
              <ul>
                <li>
                  <p>数据读写存储</p>
                  <ul>
                    <li>
                      <p>启动<hanla></hanla><code>3</code>
                        <hanla></hanla>主<hanla></hanla><code>3</code>
                        <hanla></hanla>从,<hanla></hanla>进入<hanla></hanla><code>redis-node-1</code>
                      </p>
                      <table>
                        <thead>
                          <tr>
                            <th align="center">正常启动</th>
                            <th align="center">连接<hanla></hanla><code>6381</code></th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr>
                            <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/69c001800297449f87a551d2e77ccd92.png"></td>
                            <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/8f9f776e5a934f7f940df1dfeb708a76.png"></td>
                          </tr>
                        </tbody>
                      </table>
                    </li>
                    <li>
                      <p>连接<hanla></hanla><code>6381</code>，添加<hanla></hanla><code>2<hanla></hanla>个<hanla></hanla>key</code></p>
                      <table>
                        <thead>
                          <tr>
                            <th align="center">添加情况，原因是由于集群分槽导致的，如果在某一个槽超出，将无法插入数据</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr>
                            <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/1141815bc74e4bffa30cd93a3218c52e.png"></td>
                          </tr>
                        </tbody>
                      </table>
                    </li>
                    <li>
                      <p>防止路由失效加参数<code>-c</code>
                        <hanla></hanla>并再次新增<hanla></hanla><code>2 个 key</code>
                      </p>
                      <figure class="highlight properties">
                        <table>
                          <tbody>
                            <tr>
                              <td class="gutter">
                                <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre>
                              </td>
                              <td class="code">
                                <pre><span class="line"><span class="comment"># 单机连接方式<hanla></hanla></span></span><br><span class="line"><span class="attr">redis-cli</span> <span class="string">-p 6381</span></span><br><span class="line"><span class="comment"># 由于现在是集群环境,<hanla></hanla>所以退出单机登录,<hanla></hanla>添加 -c 参数【集群启动】</span></span><br><span class="line"><span class="attr">redis-cli</span> <span class="string">-p 6381 -c</span></span><br></pre>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </figure>
                      <table>
                        <thead>
                          <tr>
                            <th align="center">添加情况</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr>
                            <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/2862a956e97c41a3b8e3e365ce8379fb.png"></td>
                          </tr>
                        </tbody>
                      </table>
                    </li>
                    <li>
                      <p>查看集群信息</p>
                      <figure class="highlight properties">
                        <table>
                          <tbody>
                            <tr>
                              <td class="gutter">
                                <pre><span class="line">1</span><br></pre>
                              </td>
                              <td class="code">
                                <pre><span class="line"><span class="attr">redis-cli</span> <span class="string">--cluster check 192.168.2.3:6381</span></span><br></pre>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </figure>
                      <table>
                        <thead>
                          <tr>
                            <th align="center">集群检查</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr>
                            <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/fdb0799aa7754269a1867cb82a805ea6.png"></td>
                          </tr>
                        </tbody>
                      </table>
                    </li>
                  </ul>
                </li>
              </ul>
            </li>
            <li>
              <p>容错切换迁移</p>
              <ul>
                <li>
                  <p>主<hanla></hanla><code>6381</code>
                    <hanla></hanla>和<code>从机切换</code>,<hanla></hanla>先停止<code>主机 6381</code>
                  </p>
                  <table>
                    <thead>
                      <tr>
                        <th align="center"><code>6381</code>
                          <hanla></hanla>停止
                        </th>
                        <th align="center">停止</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/4e602455017647de9e51ffe9ba69effc.png"></td>
                        <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/63c6d0c3552f4a7aac45c274d659123f.png"></td>
                      </tr>
                    </tbody>
                  </table>
                </li>
                <li>
                  <p>再次查看集群情况</p>
                  <table>
                    <thead>
                      <tr>
                        <th align="center">当前情况</th>
                        <th align="center">从机上位,<hanla></hanla>对数据未造成影响</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/ae5b37f64387475790d187f6b0575c70.png"></td>
                        <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/c4dfd39770f94c75a7f6aeb28cea7d46.png"></td>
                      </tr>
                    </tbody>
                  </table>
                </li>
                <li>
                  <p>先还原之前的<hanla></hanla><code>3</code>
                    <hanla></hanla>主<hanla></hanla><code>3</code>
                    <hanla></hanla>从
                  </p>
                  <figure class="highlight properties">
                    <table>
                      <tbody>
                        <tr>
                          <td class="gutter">
                            <pre><span class="line">1</span><br><span class="line">2</span><br></pre>
                          </td>
                          <td class="code">
                            <pre><span class="line"><span class="comment"># 启动 reids-node-1</span></span><br><span class="line"><span class="attr">docker</span> <span class="string">start reids-node-1</span></span><br></pre>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </figure>
                  <table>
                    <thead>
                      <tr>
                        <th align="center">恢复</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/d6a2f43790fa4ce1bc9b08a170de5623.png"></td>
                      </tr>
                    </tbody>
                  </table>
                </li>
                <li>
                  <p>查看集群状态</p>
                  <table>
                    <thead>
                      <tr>
                        <th align="center">当前状态</th>
                        <th align="center">挂载情况</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/8cf645ca0e674f13bdc9795a4a67f9bf.png"></td>
                        <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/cfb4bfbdac734dba8405ac2779d7f79f.png"></td>
                      </tr>
                    </tbody>
                  </table>
                  <blockquote>
                    <p>恢复的主机并不会再次成为<code>主机</code>,<hanla></hanla>而是成为其中的一个<code>从机</code></p>
                  </blockquote>
                </li>
              </ul>
            </li>
            <li>
              <p>主从扩容</p>
              <ul>
                <li>
                  <p>新建<hanla></hanla><code>6387,6388</code>
                    <hanla></hanla>两个节点<hanla></hanla>+<hanla></hanla>新建后启动<hanla></hanla>+<hanla></hanla>查看是否是<hanla></hanla><code>8</code>
                    <hanla></hanla>节点
                  </p>
                  <figure class="highlight properties">
                    <table>
                      <tbody>
                        <tr>
                          <td class="gutter">
                            <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre>
                          </td>
                          <td class="code">
                            <pre><span class="line"><span class="attr">docker</span> <span class="string">run -d --name redis-node-7 --net host --privileged=true -v /data/redis/share/redis-node-7:/data redis:6.0.8 --cluster-enabled yes --appendonly yes --port 6387</span></span><br><span class="line"></span><br><span class="line"><span class="attr">docker</span> <span class="string">run -d --name redis-node-8 --net host --privileged=true -v /data/redis/share/redis-node-8:/data redis:6.0.8 --cluster-enabled yes --appendonly yes --port 6388</span></span><br></pre>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </figure>
                  <table>
                    <thead>
                      <tr>
                        <th align="center">成功启动<hanla></hanla><code>8</code>
                          <hanla></hanla>台容器
                        </th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/79df759db712442f96bb416b5f89dd64.png"></td>
                      </tr>
                    </tbody>
                  </table>
                </li>
                <li>
                  <p>进入<hanla></hanla><code>6387</code>
                    <hanla></hanla>容器内部实例
                  </p>
                  <figure class="highlight properties">
                    <table>
                      <tbody>
                        <tr>
                          <td class="gutter">
                            <pre><span class="line">1</span><br></pre>
                          </td>
                          <td class="code">
                            <pre><span class="line"><span class="attr">docker</span> <span class="string">exec -it redis-node-7 bash</span></span><br></pre>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </figure>
                </li>
                <li>
                  <p>将新增的<hanla></hanla><code>6387</code>
                    <hanla></hanla>节点<hanla></hanla>(<code>空槽好</code>)<hanla></hanla>作为<hanla></hanla><code>master</code>
                    <hanla></hanla>节点加入原集群
                  </p>
                  <figure class="highlight properties">
                    <table>
                      <tbody>
                        <tr>
                          <td class="gutter">
                            <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre>
                          </td>
                          <td class="code">
                            <pre><span class="line"><span class="comment"># 将新增的<hanla></hanla>6387<hanla></hanla>作为<hanla></hanla>master<hanla></hanla>节点加入集群<hanla></hanla></span></span><br><span class="line"><span class="attr">redis-cli</span> <span class="string">--cluster add-node 自己实际<hanla></hanla>IP<hanla></hanla>地址:6387 自己实际<hanla></hanla>IP<hanla></hanla>地址:6381</span></span><br><span class="line"></span><br><span class="line"><span class="attr">redis-cli</span> <span class="string">--cluster add-node 192.168.2.3:6387 192.168.2.3:6381</span></span><br><span class="line"></span><br><span class="line"><span class="attr">6387</span> <span class="string">就是将要作为<hanla></hanla>master<hanla></hanla>新增节点<hanla></hanla></span></span><br><span class="line"><span class="attr">6381</span> <span class="string">就是原来集群节点里面的领路人，相当于<hanla></hanla>6387<hanla></hanla>拜拜<hanla></hanla>6381<hanla></hanla>的码头从而找到组织加入集群</span></span><br></pre>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </figure>
                  <table>
                    <thead>
                      <tr>
                        <th align="center">添加节点</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/6c587c58f8b94eee92bbf72fff654f98.png"></td>
                      </tr>
                    </tbody>
                  </table>
                </li>
                <li>
                  <p>检查集群情况第一次</p>
                  <figure class="highlight properties">
                    <table>
                      <tbody>
                        <tr>
                          <td class="gutter">
                            <pre><span class="line">1</span><br><span class="line">2</span><br></pre>
                          </td>
                          <td class="code">
                            <pre><span class="line"><span class="comment"># redis-cli --cluster check 真实<hanla></hanla>ip<hanla></hanla>地址:6381</span></span><br><span class="line"><span class="attr">redis-cli</span> <span class="string">--cluster check 192.168.2.3:6381</span></span><br></pre>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </figure>
                  <table>
                    <thead>
                      <tr>
                        <th align="center">成功添加</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/5ce5ae27c0ac4407ae0d00a4273b2d6a.png"></td>
                      </tr>
                    </tbody>
                  </table>
                </li>
                <li>
                  <p>重新分配槽号</p>
                  <figure class="highlight properties">
                    <table>
                      <tbody>
                        <tr>
                          <td class="gutter">
                            <pre><span class="line">1</span><br><span class="line">2</span><br></pre>
                          </td>
                          <td class="code">
                            <pre><span class="line"><span class="comment"># 重新分派槽号 命令: redis-cli --cluster reshard IP<hanla></hanla>地址:<hanla></hanla>端口号<hanla></hanla></span></span><br><span class="line"><span class="attr">redis-cli</span> <span class="string">--cluster reshard 192.168.2.3:6381</span></span><br></pre>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </figure>
                  <table>
                    <thead>
                      <tr>
                        <th align="center">添加节点后槽位信息为空</th>
                        <th align="center"><code>16384/master<hanla></hanla>数<hanla></hanla></code>=4096</th>
                        <th align="center">选择分配的容器<hanla></hanla>id,<hanla></hanla>后续输入<hanla></hanla><code>yes</code></th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/d8efd66ec60f4fb590b35d1182cd83bc.png"></td>
                        <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/ebeabf6ea14b4cef87e66be86c4995a1.png"></td>
                        <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/5db9cde670e5422297ea0d0fd4e63228.png"></td>
                      </tr>
                    </tbody>
                  </table>
                </li>
                <li>
                  <p>检查集群情况第二次</p>
                  <table>
                    <thead>
                      <tr>
                        <th align="center">再次查看槽位信息<hanla></hanla>(6387<hanla></hanla>槽位来自于其他三个的分配组成了<hanla></hanla><code>4096</code>)</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/9121572da7fd44a59eaea8653bda5bb9.png"></td>
                      </tr>
                    </tbody>
                  </table>
                  <blockquote>
                    <p>为什么<hanla></hanla><code>6387</code>
                      <hanla></hanla>是<hanla></hanla><code>3</code>
                      <hanla></hanla>个新的区间，以前的还是连续？
                    </p>
                    <blockquote>
                      <p> 重新分配成本太高，所以前<hanla></hanla><code>3</code>
                        <hanla></hanla>家各自匀出来一部分，从<hanla></hanla><code>6381/6382/6383</code>
                        <hanla></hanla>三个旧节点分别匀出<hanla></hanla><code>1364</code>
                        <hanla></hanla>个坑位给新节点<hanla></hanla><code>6387</code>
                      </p>
                    </blockquote>
                  </blockquote>
                </li>
                <li>
                  <p>为主节点<hanla></hanla><code>6387</code>
                    <hanla></hanla>分配从节点<hanla></hanla><code>6388</code>
                  </p>
                  <figure class="highlight properties">
                    <table>
                      <tbody>
                        <tr>
                          <td class="gutter">
                            <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre>
                          </td>
                          <td class="code">
                            <pre><span class="line"><span class="comment"># 命令：redis-cli --cluster add-node ip:<hanla></hanla>新<hanla></hanla>slave<hanla></hanla>端口 ip:<hanla></hanla>新<hanla></hanla>master<hanla></hanla>端口 --cluster-slave --cluster-master-id 新主机节点<hanla></hanla>ID</span></span><br><span class="line"><span class="comment"> </span></span><br><span class="line"><span class="comment"># 查看 id</span></span><br><span class="line"><span class="attr">redis-cli</span> <span class="string">--cluster check 192.168.2.3:6381</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># 364259ffcb88b0f84cc14c1e3686bf94ed3708d4: -------这个是<hanla></hanla>6387<hanla></hanla>的编号，按照自己实际情况</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># 分配<hanla></hanla></span></span><br><span class="line"><span class="attr">redis-cli</span> <span class="string">--cluster add-node 192.168.2.3:6388 192.168.2.3:6387 --cluster-slave --cluster-master-id 364259ffcb88b0f84cc14c1e3686bf94ed3708d4</span></span><br><span class="line"></span><br></pre>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </figure>
                  <table>
                    <thead>
                      <tr>
                        <th align="center"><code>主节点: 6387</code></th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/f8154118ed254957a45c943b2860aa73.png"></td>
                      </tr>
                    </tbody>
                  </table>
                </li>
                <li>
                  <p>检查集群情况第三次</p>
                  <table>
                    <thead>
                      <tr>
                        <th align="center"><code>4<hanla></hanla>主<hanla></hanla>4<hanla></hanla>从</code></th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/3e04dc29969843df87ddaa0ba5d97921.png"></td>
                      </tr>
                    </tbody>
                  </table>
                </li>
              </ul>
            </li>
            <li>
              <p>主从缩容</p>
              <ul>
                <li>
                  <p>目的: <code>6387<hanla></hanla>和<hanla></hanla>6388</code>
                    <hanla></hanla>下线
                  </p>
                </li>
                <li>
                  <p>检查集群情况获得<hanla></hanla><code>6388(从机端口)</code>
                    <hanla></hanla>的节点<hanla></hanla><code>ID</code>
                  </p>
                  <figure class="highlight properties">
                    <table>
                      <tbody>
                        <tr>
                          <td class="gutter">
                            <pre><span class="line">1</span><br><span class="line">2</span><br></pre>
                          </td>
                          <td class="code">
                            <pre><span class="line"><span class="attr">redis-cli</span> <span class="string">--cluster check 192.168.2.3:6381</span></span><br><span class="line"><span class="attr">slave</span>: <span class="string">38829c4b96974ad6002a8c71c55722a6787a14c5</span></span><br></pre>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </figure>
                </li>
                <li>
                  <p>将<hanla></hanla><code>6388</code>
                    <hanla></hanla>删除,<hanla></hanla>从集群中将<hanla></hanla><code>4<hanla></hanla>号从节点 6388 删除</code>
                  </p>
                  <figure class="highlight properties">
                    <table>
                      <tbody>
                        <tr>
                          <td class="gutter">
                            <pre><span class="line">1</span><br><span class="line">2</span><br></pre>
                          </td>
                          <td class="code">
                            <pre><span class="line"><span class="comment"># 命令：redis-cli --cluster del-node ip:<hanla></hanla>从机端口 从机<hanla></hanla>6388<hanla></hanla>节点<hanla></hanla>ID</span></span><br><span class="line"><span class="attr">redis-cli</span> <span class="string">--cluster del-node 192.168.2.3:6388 38829c4b96974ad6002a8c71c55722a6787a14c5</span></span><br></pre>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </figure>
                </li>
                <li>
                  <p>将<hanla></hanla><code>6387</code>
                    <hanla></hanla>的槽号清空,<hanla></hanla>重新分配,<hanla></hanla>本例将清出来的槽号都给<hanla></hanla><code>6381</code>
                  </p>
                  <figure class="highlight properties">
                    <table>
                      <tbody>
                        <tr>
                          <td class="gutter">
                            <pre><span class="line">1</span><br></pre>
                          </td>
                          <td class="code">
                            <pre><span class="line"><span class="attr">redis-cli</span> <span class="string">--cluster reshard 192.168.2.3:6381</span></span><br></pre>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </figure>
                  <table>
                    <thead>
                      <tr>
                        <th align="center">输入</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/3b40fb8840134a8fbe81c12712f75022.png"></td>
                      </tr>
                    </tbody>
                  </table>
                </li>
                <li>
                  <p>检查集群情况第二次</p>
                  <table>
                    <thead>
                      <tr>
                        <th align="center">4 主<hanla></hanla>3<hanla></hanla>从</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/e5061cf310274987a86ab473f5b246db.png"></td>
                      </tr>
                    </tbody>
                  </table>
                </li>
                <li>
                  <p>将<hanla></hanla><code>6387(主)</code>
                    <hanla></hanla>删除
                  </p>
                  <figure class="highlight properties">
                    <table>
                      <tbody>
                        <tr>
                          <td class="gutter">
                            <pre><span class="line">1</span><br><span class="line">2</span><br></pre>
                          </td>
                          <td class="code">
                            <pre><span class="line"><span class="comment"># 命令：redis-cli --cluster del-node ip:<hanla></hanla>端口 6387<hanla></hanla>节点<hanla></hanla>ID</span></span><br><span class="line"><span class="attr">redis-cli</span> <span class="string">--cluster del-node 192.168.2.3:6387 364259ffcb88b0f84cc14c1e3686bf94ed3708d4</span></span><br></pre>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </figure>
                </li>
                <li>
                  <p>检查集群情况第三次</p>
                  <table>
                    <thead>
                      <tr>
                        <th align="center">恢复<hanla></hanla><code>3<hanla></hanla>主<hanla></hanla>3<hanla></hanla>从</code></th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/8b23b38b89384a2e9154d5c595f68640.png"></td>
                      </tr>
                    </tbody>
                  </table>
                </li>
              </ul>
            </li>
          </ul>
          <h4 id="Dockerfile"><a href="#Dockerfile" class="headerlink" title="Dockerfile"></a>Dockerfile</h4>
          <ul>
            <li>
              <p>是什么</p>
              <blockquote>
                <p><code>Dockerfile</code> 使用来构建<hanla></hanla><code>Docker</code>
                  <hanla></hanla>镜像的文本文件，是由一条条构建镜像所需的指令和参数构成的脚本
                </p>
              </blockquote>
            </li>
            <li>
              <p>构建三步骤</p>
              <ul>
                <li>编写<hanla></hanla><code>Dockerfile</code>
                  <hanla></hanla>文件
                </li>
                <li><code>docker build</code>
                  <hanla></hanla>命令构建镜像
                </li>
                <li><code>docker run</code>
                  <hanla></hanla>以镜像运行容器实例
                </li>
              </ul>
            </li>
            <li>
              <p>Dockerfile-构建过程解析</p>
              <ul>
                <li>
                  <p>基础内容</p>
                  <ul>
                    <li>每条保留字指令都<code>必须为大写字母</code>且后面要跟随至少一个参数</li>
                    <li>指令按照从上到下，顺序执行</li>
                    <li><code>#</code> 表示注释</li>
                    <li>每条指令都会创建一个新的镜像曾并对镜像进行提交</li>
                  </ul>
                </li>
                <li>
                  <p>大致流程</p>
                  <ul>
                    <li><code>docker</code>
                      <hanla></hanla>从基础镜像运行一个容器
                    </li>
                    <li>执行一条指令并对容器做出修改</li>
                    <li>执行类似<hanla></hanla><code>docker commit</code>
                      <hanla></hanla>的操作提交一个新的镜像层
                    </li>
                    <li>执行<hanla></hanla><code>dockerfile</code>
                      <hanla></hanla>中的下一条指令直到所有指令都执行完成
                    </li>
                  </ul>
                </li>
              </ul>
            </li>
            <li>
              <p>保留字</p>
              <ul>
                <li>
                  <p><code>FROM</code>: 基础镜像，当前新镜像是基于那个镜像的,<hanla></hanla>指定一个已经存在的镜像作为模板,<hanla></hanla>第一条必须是<hanla></hanla><code>FROM</code></p>
                </li>
                <li>
                  <p><code>MAINTAINER</code>: 镜像维护者的姓名和邮箱地址</p>
                </li>
                <li>
                  <p><code>RUN</code>: 容器构建时需要运行的命令</p>
                  <ul>
                    <li>
                      <p><code>shell</code>
                        <hanla></hanla>格式
                      </p>
                      <figure class="highlight properties">
                        <table>
                          <tbody>
                            <tr>
                              <td class="gutter">
                                <pre><span class="line">1</span><br></pre>
                              </td>
                              <td class="code">
                                <pre><span class="line"><span class="attr">RUN</span> <span class="string">yum -y install vim</span></span><br></pre>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </figure>
                    </li>
                    <li>
                      <p><code>exec</code>
                        <hanla></hanla>格式
                      </p>
                    </li>
                  </ul>
                </li>
                <li>
                  <p><code>EXPOSE</code>: 当前容器对外暴露的端口</p>
                </li>
                <li>
                  <p><code>WORKDIR</code>： 指定在创建容器后,<hanla></hanla>终端默认登录的进来工作目录,<hanla></hanla>一个落脚点</p>
                </li>
                <li>
                  <p><code>USER</code>: 指定该镜像以什么样的用户去执行，如果都不指定,<hanla></hanla>默认是<hanla></hanla><code>root</code></p>
                </li>
                <li>
                  <p><code>ENV</code>: 用来在构建镜像过程中设置环境变量</p>
                </li>
                <li>
                  <p><code>ADD</code>：将宿主机目录下的文件拷贝进镜像切会自动处理<hanla></hanla><code>URL</code>
                    <hanla></hanla>和解压<hanla></hanla><code>tar</code>
                    <hanla></hanla>压缩包
                  </p>
                </li>
                <li>
                  <p><code>COPY</code></p>
                </li>
                <li>
                  <p><code>VOLUME</code>: 容器数据卷,<hanla></hanla>用于数据保存和持久化工作</p>
                </li>
                <li>
                  <p><code>CMD</code></p>
                  <ul>
                    <li>指定容器启动后要干的事情，可以有多个,<hanla></hanla>但只有最有一条生效</li>
                    <li>和<hanla></hanla><code>RUN</code>
                      <hanla></hanla>的区别<ul>
                        <li><code>CMD</code>
                          <hanla></hanla>是在<hanla></hanla><code>docker run </code>时运行
                        </li>
                        <li><code>RUN</code>
                          <hanla></hanla>是在<hanla></hanla><code>docker build</code>
                          <hanla></hanla>时运行
                        </li>
                      </ul>
                    </li>
                  </ul>
                </li>
                <li>
                  <p><code>ENTRYPOINT</code></p>
                  <ul>
                    <li>是用来指定一个容器启动时要运行的命令</li>
                    <li>类似于<hanla></hanla><code>CMD</code>
                      <hanla></hanla>指令,<hanla></hanla>但是<hanla></hanla><code>ENTRYPOINT</code>
                      <hanla></hanla>不会被<hanla></hanla><code>docker run</code>
                      <hanla></hanla>后面的命令覆盖，而且这些命令行参数<code>会被当做参数送给 ENTRYPOINT</code>
                      <hanla></hanla>指令指定的程序
                    </li>
                    <li>优点: 在执行<hanla></hanla><code>docker run</code>
                      <hanla></hanla>的时候可以指定<hanla></hanla><code>ENTRYPOINT</code>
                      <hanla></hanla>运行时所需的参数
                    </li>
                    <li>注意: 如果<hanla></hanla><code>Dockerfile</code>
                      <hanla></hanla>中如果存在多个<hanla></hanla><code>ENTRYPOINT</code>
                      <hanla></hanla>指令,<hanla></hanla>仅最后一个生效
                    </li>
                  </ul>
                </li>
              </ul>
            </li>
            <li>
              <p>实战</p>
              <ul>
                <li>
                  <p>镜像地址</p>
                  <blockquote>
                    <p><a target="_blank" rel="external nofollow noopener noreferrer" href="https://mirrors.yangxingzhen.com/">https://mirrors.yangxingzhen.com/</a></p>
                  </blockquote>
                </li>
                <li>
                  <p>目标: 自定义镜像</p>
                  <ul>
                    <li>基础镜像<hanla></hanla><code>centos</code></li>
                    <li>添加<hanla></hanla><code>vim</code></li>
                    <li>添加<hanla></hanla><code>net-tools</code></li>
                  </ul>
                </li>
                <li>
                  <p>步骤</p>
                  <ul>
                    <li>编写<hanla></hanla><code>Dockerfile</code>
                      <hanla></hanla>文件名就是<hanla></hanla><code>Dockerfile</code>
                    </li>
                  </ul>
                  <figure class="highlight dockerfile">
                    <table>
                      <tbody>
                        <tr>
                          <td class="gutter">
                            <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre>
                          </td>
                          <td class="code">
                            <pre><span class="line"><span class="keyword">FROM</span> centos</span><br><span class="line"><span class="keyword">MAINTAINER</span> coderitl&lt;<span class="number">3327511395</span>@qq.com&gt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">ENV</span> MYPATH /usr/local</span><br><span class="line"><span class="keyword">WORKDIR</span><span class="language-bash"> <span class="variable">$MYPATH</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 更新<hanla></hanla>yum</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> <span class="built_in">cd</span> /etc/yum.repos.d/</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> sed -i <span class="string">'s/mirrorlist/#mirrorlist/g'</span> /etc/yum.repos.d/CentOS-*</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> sed -i <span class="string">'s|#baseurl=http://mirror.centos.org|baseurl=http://vault.centos.org|g'</span> /etc/yum.repos.d/CentOS-*</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> yum -y update</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> yum makecache</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#安装 vim 编辑器<hanla></hanla></span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> yum -y install vim</span></span><br><span class="line"><span class="comment">#安装<hanla></hanla>ifconfig<hanla></hanla>命令查看网络<hanla></hanla>IP</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> yum -y install net-tools</span></span><br><span class="line"><span class="comment">#安装<hanla></hanla>java8<hanla></hanla>及<hanla></hanla>lib<hanla></hanla>库<hanla></hanla></span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> yum -y install glibc.i686</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> <span class="built_in">mkdir</span> /usr/local/java</span></span><br><span class="line"><span class="comment"># ADD 是相对路径<hanla></hanla>jar,<hanla></hanla>把<hanla></hanla>jdk-8u171-linux-x64.tar.gz<hanla></hanla>添加到容器中,<hanla></hanla>安装包必须要和<hanla></hanla>Dockerfile<hanla></hanla>文件在同一位置<hanla></hanla></span></span><br><span class="line"><span class="keyword">ADD</span><span class="language-bash"> jdk-8u171-linux-x64.tar.gz /usr/local/java/</span></span><br><span class="line"><span class="comment">#配置<hanla></hanla>java<hanla></hanla>环境变量<hanla></hanla></span></span><br><span class="line"><span class="keyword">ENV</span> JAVA_HOME /usr/local/java/jdk1.<span class="number">8.0</span>_171</span><br><span class="line"><span class="keyword">ENV</span> JRE_HOME $JAVA_HOME/jre</span><br><span class="line"><span class="keyword">ENV</span> CLASSPATH $JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar:$JRE_HOME/lib:$CLASSPATH</span><br><span class="line"><span class="keyword">ENV</span> PATH $JAVA_HOME/bin:$PATH</span><br><span class="line"></span><br><span class="line"><span class="keyword">EXPOSE</span> <span class="number">80</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">CMD</span><span class="language-bash"> <span class="built_in">echo</span> <span class="variable">$MYPATH</span></span></span><br><span class="line"><span class="keyword">CMD</span><span class="language-bash"> <span class="built_in">echo</span> <span class="string">"success--------------ok"</span></span></span><br><span class="line"><span class="keyword">CMD</span><span class="language-bash"> /bin/bash</span></span><br></pre>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </figure>
                  <ul>
                    <li>
                      <p>构建</p>
                      <figure class="highlight properties">
                        <table>
                          <tbody>
                            <tr>
                              <td class="gutter">
                                <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre>
                              </td>
                              <td class="code">
                                <pre><span class="line"><span class="comment"># 语法: 最后有一个 点<hanla></hanla></span></span><br><span class="line"><span class="attr">docker</span> <span class="string">build -t 镜像名称:TAG .</span></span><br><span class="line"><span class="comment"># 构建<hanla></hanla></span></span><br><span class="line"><span class="attr">docker</span> <span class="string">build -t centos-java8:1.0 .</span></span><br></pre>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </figure>
                      <table>
                        <thead>
                          <tr>
                            <th align="center">构建</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr>
                            <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/856d23e60c1740348820690b62b736dc.png"></td>
                          </tr>
                        </tbody>
                      </table>
                    </li>
                    <li>
                      <p>运行</p>
                      <figure class="highlight properties">
                        <table>
                          <tbody>
                            <tr>
                              <td class="gutter">
                                <pre><span class="line">1</span><br></pre>
                              </td>
                              <td class="code">
                                <pre><span class="line"><span class="attr">docker</span> <span class="string">run -it 新镜像名称:TAG</span></span><br></pre>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </figure>
                      <table>
                        <thead>
                          <tr>
                            <th align="center">测试</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr>
                            <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/55ebceeeeaad4145b4f95dc158009abb.png"></td>
                          </tr>
                        </tbody>
                      </table>
                    </li>
                  </ul>
                </li>
              </ul>
            </li>
            <li>
              <p>虚悬镜像</p>
              <table>
                <thead>
                  <tr>
                    <th align="center">虚悬镜像</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/ded9664545ae456589d6fb4e01ef835b.png"></td>
                  </tr>
                </tbody>
              </table>
              <ul>
                <li>
                  <p>查看所有虚悬镜像</p>
                  <figure class="highlight properties">
                    <table>
                      <tbody>
                        <tr>
                          <td class="gutter">
                            <pre><span class="line">1</span><br></pre>
                          </td>
                          <td class="code">
                            <pre><span class="line"><span class="attr">docker</span> <span class="string">image ls -f dangling=true</span></span><br></pre>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </figure>
                </li>
                <li>
                  <p>删除</p>
                  <figure class="highlight properties">
                    <table>
                      <tbody>
                        <tr>
                          <td class="gutter">
                            <pre><span class="line">1</span><br><span class="line">2</span><br></pre>
                          </td>
                          <td class="code">
                            <pre><span class="line"><span class="comment"># 虚悬镜像已经失去存在价值,<hanla></hanla>可以删除<hanla></hanla></span></span><br><span class="line"><span class="attr">docker</span> <span class="string">image  prune </span></span><br></pre>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </figure>
                </li>
              </ul>
            </li>
          </ul>
          <h4 id="Docker-网络"><a href="#Docker-网络" class="headerlink" title="Docker-网络"></a>Docker-网络</h4>
          <ul>
            <li>
              <p>虚拟网桥</p>
              <table>
                <thead>
                  <tr>
                    <th align="center"><code>docker0</code></th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/7483847af4b44af0843a376ebed7121e.png"></td>
                  </tr>
                </tbody>
              </table>
            </li>
            <li>
              <p>查看<hanla></hanla><code>docker</code>
                <hanla></hanla>网络模式命令
              </p>
              <figure class="highlight properties">
                <table>
                  <tbody>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="attr">docker</span> <span class="string">network ls</span></span><br></pre>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </figure>
              <table>
                <thead>
                  <tr>
                    <th align="center">网络模式</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/e1f08bde287f4def94d839f2ac6cba8a.png"></td>
                  </tr>
                </tbody>
              </table>
            </li>
            <li>
              <p>能干什么</p>
              <ul>
                <li>容器间的互联和通信以及端口映射</li>
                <li>容器<hanla></hanla><code>IP</code>
                  <hanla></hanla>变动时候可以通过服务名直接网络通信而不受到影响
                </li>
              </ul>
            </li>
            <li>
              <p><code>docker0</code></p>
              <blockquote>
                <p><code>Docker</code>
                  <hanla></hanla>服务默认会创建一个<hanla></hanla><code>docker0</code>
                  <hanla></hanla>网桥<hanla></hanla>(其上有一个<hanla></hanla><code>docker0</code>
                  <hanla></hanla>内部接口),<hanla></hanla>该桥接网络的名称为<hanla></hanla><code>docker0</code>,<hanla></hanla>它在<code>内核层</code>连通了其他的物理或虚拟网卡,<hanla></hanla>这就将所有容器和本地主机都放到<code>同一个物理网络</code>,<code>Docker</code>
                  <hanla></hanla>默认指定了<hanla></hanla><code>docker0</code>
                  <hanla></hanla>接口的<hanla></hanla><code>IP</code>
                  <hanla></hanla>地址和子网掩码,<code>
                    <hanla></hanla>让主机和容器之间可以通过网桥相互通信
                  </code>
                </p>
              </blockquote>
              <table>
                <thead>
                  <tr>
                    <th align="center"><code>bridge</code>
                      <hanla></hanla>模型
                    </th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/bb1303ddfaea4eb18ff72f9871f5e5b0.png"></td>
                  </tr>
                </tbody>
              </table>
            </li>
          </ul>
          <h4 id="Docker-Compose"><a href="#Docker-Compose" class="headerlink" title="Docker-Compose"></a>Docker-Compose</h4>
          <ul>
            <li>
              <p>是什么</p>
              <blockquote>
                <p><code>Docker-Compose</code>
                  <hanla></hanla>是<hanla></hanla><code>Docker</code>
                  <hanla></hanla>官方的开源项目,<hanla></hanla>负责实现对<hanla></hanla><code>Docker</code>
                  <hanla></hanla>容器集群的快速编排
                </p>
              </blockquote>
            </li>
            <li>
              <p>作用</p>
              <blockquote>
                <p>简化参数,<hanla></hanla>使用<hanla></hanla><code>*.yml</code>
                  <hanla></hanla>文件易于维护,<code>yml</code>
                  <hanla></hanla>文件严格要求空格和缩进,<hanla></hanla>不要使用<hanla></hanla><code>tab</code>
                </p>
              </blockquote>
            </li>
            <li>
              <p>下载</p>
              <figure class="highlight properties">
                <table>
                  <tbody>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="comment"># 下载: https://github.com/docker/compose/releases/download/v2.15.1/docker-compose-linux-x86_64(下载地址)</span></span><br><span class="line"><span class="attr">curl</span> <span class="string">-SL https://github.com/docker/compose/releases/download/v2.15.1/docker-compose-linux-x86_64 -o /usr/local/bin/docker-compose</span></span><br><span class="line"><span class="comment"># 如果是在 windows 上下载传输到<hanla></hanla>linux,<hanla></hanla>需要重命名</span></span><br><span class="line"><span class="comment"># 添加可执行权限<hanla></hanla></span></span><br><span class="line"><span class="attr">chmod</span> <span class="string">777 docker-compose</span></span><br><span class="line"><span class="comment"># 软连接【不需要再进行后续的环境变量配置】</span></span><br><span class="line"><span class="attr">sudo</span> <span class="string">ln -s /usr/local/bin/docker-compose /usr/bin/docker-compose</span></span><br></pre>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </figure>
              <table>
                <thead>
                  <tr>
                    <th align="center">下载</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/68d33915442d4500b71978d9903fb008.png"></td>
                  </tr>
                </tbody>
              </table>
            </li>
            <li>
              <p>测试<hanla></hanla><code>docker-compose</code>
                <hanla></hanla>环境变量
              </p>
              <table>
                <thead>
                  <tr>
                    <th align="center">测试<hanla></hanla><code>docker-compose</code>
                      <hanla></hanla>环境变量
                    </th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/31de0cd46bb8422d83bd435433d991c6.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAY29kZXItaXRs,size_20,color_FFFFFF,t_70,g_se,x_16"></td>
                  </tr>
                </tbody>
              </table>
            </li>
            <li>
              <p>核心概念</p>
              <ul>
                <li>一个文件:<code>docker-compose.yml</code></li>
                <li>两个要素<ul>
                    <li>服务： 一个个应用容器实例:<code>mysql、redis....</code></li>
                    <li>工程: 由一组关联的应用容器组成的一个<code>完整业务单元</code>,<hanla></hanla>在<hanla></hanla><code>docker-compose.yml</code>
                      <hanla></hanla>文件中定义
                    </li>
                  </ul>
                </li>
              </ul>
            </li>
            <li>
              <p>常用命令</p>
              <figure class="highlight properties">
                <table>
                  <tbody>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="attr">docker-compose</span> <span class="string">-h                           # 查看帮助<hanla></hanla></span></span><br><span class="line"><span class="attr">docker-compose</span> <span class="string">up                           # 启动所有<hanla></hanla>docker-compose<hanla></hanla>服务<hanla></hanla></span></span><br><span class="line"><span class="attr">docker-compose</span> <span class="string">up -d                        # 启动所有<hanla></hanla>docker-compose<hanla></hanla>服务并后台运行<hanla></hanla></span></span><br><span class="line"><span class="attr">docker-compose</span> <span class="string">down                         # 停止并删除容器、网络、卷、镜像。</span></span><br><span class="line"><span class="attr">docker-compose</span> <span class="string">exec  yml<hanla></hanla>里面的服务<hanla></hanla>id                 # 进入容器实例内部  docker-compose exec docker-compose.yml<hanla></hanla>文件中写的服务<hanla></hanla>id /bin/bash</span></span><br><span class="line"><span class="attr">docker-compose</span> <span class="string">ps                      # 展示当前<hanla></hanla>docker-compose<hanla></hanla>编排过的运行的所有容器<hanla></hanla></span></span><br><span class="line"><span class="attr">docker-compose</span> <span class="string">top                     # 展示当前<hanla></hanla>docker-compose<hanla></hanla>编排过的容器进程<hanla></hanla></span></span><br><span class="line"><span class="attr">docker-compose</span> <span class="string">logs  yml<hanla></hanla>里面的服务<hanla></hanla>id     # 查看容器输出日志<hanla></hanla></span></span><br><span class="line"><span class="attr">docker-compose</span> <span class="string">config     # 检查配置<hanla></hanla></span></span><br><span class="line"><span class="attr">docker-compose</span> <span class="string">config -q  # 检查配置，有问题才有输出<hanla></hanla></span></span><br><span class="line"><span class="attr">docker-compose</span> <span class="string">restart   # 重启服务<hanla></hanla></span></span><br><span class="line"><span class="attr">docker-compose</span> <span class="string">start     # 启动服务<hanla></hanla></span></span><br><span class="line"><span class="attr">docker-compose</span> <span class="string">stop      # 停止服务</span></span><br><span class="line"></span><br><span class="line"> </span><br></pre>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </figure>
            </li>
            <li>
              <p><code>docker-compose</code>
                <hanla></hanla>管理容器
              </p>
              <ul>
                <li>
                  <p>语法</p>
                  <blockquote>
                    <p><code>yml</code>
                      <hanla></hanla>文件以<hanla></hanla><code>key:value</code>
                      <hanla></hanla>方式来指定配置信息
                    </p>
                    <p>多个配置信息以<code>换行 + 缩进</code>的方式来区分</p>
                  </blockquote>
                </li>
                <li>
                  <p>管理<hanla></hanla><code>Tomcat</code>
                    <hanla></hanla>和<hanla></hanla><code>mysql</code>
                  </p>
                  <figure class="highlight yml">
                    <table>
                      <tbody>
                        <tr>
                          <td class="gutter">
                            <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre>
                          </td>
                          <td class="code">
                            <pre><span class="line"><span class="attr">version:</span> <span class="string">'3.1'</span> <span class="comment"># docker 版本<hanla></hanla></span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">mysql:</span> <span class="comment"># 服务名称</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span> <span class="comment"># 代表只要 docker 启动,<hanla></hanla>那么这个容器就跟着一起启动</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">daocloud.io/library/mysql:5.7.31</span> <span class="comment"># 指定镜像路径</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">mysql</span> <span class="comment"># 指定容器名称</span></span><br><span class="line">    <span class="attr">ports:</span> </span><br><span class="line">      <span class="bullet">-</span> <span class="number">3306</span><span class="string">:3306</span> <span class="comment"># 指定端口号映射 (- 可以映射多个)</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">MYSQL_ROOT_PASSWORD:</span> <span class="string">root</span> <span class="comment"># 指定 MYSQL 的<hanla></hanla>root<hanla></hanla>用户登录密码</span></span><br><span class="line">      <span class="attr">TZ:</span> <span class="string">Asia/Shanghai</span> <span class="comment"># 指定时区</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">/opt/docker_mysql_tomcat/mysql_data:/var/lib/mysql</span> <span class="comment"># 映射数据卷</span></span><br><span class="line">  <span class="attr">tomcat:</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span> <span class="comment"># 代表只要 docker 启动,<hanla></hanla>那么这个容器就跟着一起启动</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">daocloud.io/library/tomcat:8.0.45</span> <span class="comment"># 指定镜像路径</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">tomcat</span> <span class="comment"># 指定容器名称</span></span><br><span class="line">    <span class="attr">ports:</span> </span><br><span class="line">      <span class="bullet">-</span> <span class="number">8080</span><span class="string">:8080</span> <span class="comment"># 指定端口号映射 (- 可以映射多个)</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">TZ:</span> <span class="string">Asia/Shanghai</span> <span class="comment"># 指定时区</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">/opt/docker_mysql_tomcat/tomcat_webapps:/usr/local/tomcat/webapps</span> <span class="comment"># war 映射数据卷</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">/opt/docker_mysql_tomcat/tomcat_logs:/usr/local/tomcat/logs</span> <span class="comment"># 日志映射数据卷</span></span><br><span class="line"></span><br></pre>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </figure>
                </li>
                <li>
                  <p>使用<hanla></hanla><code>docker-compose</code>
                    <hanla></hanla>命令管理<hanla></hanla><code>*.yml</code>
                    <hanla></hanla>文件
                  </p>
                  <figure class="highlight dockerfile">
                    <table>
                      <tbody>
                        <tr>
                          <td class="gutter">
                            <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre>
                          </td>
                          <td class="code">
                            <pre><span class="line"><span class="comment"># 先删除之前的 mysql 和 tomcat </span></span><br><span class="line">docker images</span><br><span class="line"><span class="comment"># 1. 停止<hanla></hanla></span></span><br><span class="line">docker stop $(docker ps -qa)</span><br><span class="line"><span class="comment"># 2. 删除<hanla></hanla></span></span><br><span class="line">docker rm  $(docker ps -qa)</span><br><span class="line"><span class="comment"># 3. 检测<hanla></hanla></span></span><br><span class="line">docker images</span><br></pre>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </figure>
                  <table>
                    <thead>
                      <tr>
                        <th align="center">删除之前所有镜像</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/41db587b78a544d0b1859adaac3ea06c.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAY29kZXItaXRs,size_20,color_FFFFFF,t_70,g_se,x_16"></td>
                      </tr>
                    </tbody>
                  </table>
                </li>
                <li>
                  <p><code>docker-compose</code>
                    <hanla></hanla>命令启动
                  </p>
                  <figure class="highlight dockerfile">
                    <table>
                      <tbody>
                        <tr>
                          <td class="gutter">
                            <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre>
                          </td>
                          <td class="code">
                            <pre><span class="line"><span class="comment"># 后台启动<hanla></hanla></span></span><br><span class="line">docker-compose up -d</span><br><span class="line"><span class="comment"># 关闭删除容器<hanla></hanla></span></span><br><span class="line">docker-compose down</span><br><span class="line"><span class="comment"># 开启 | 关闭 | 重启 已经存在的由 docker-compose<hanla></hanla>维护的容器<hanla></hanla></span></span><br><span class="line">docker-compose start | stop | restart </span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看由 docker-compose 管理的容器<hanla></hanla></span></span><br><span class="line">docker-compose ps</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看日志<hanla></hanla></span></span><br><span class="line">docker-compose logs -f</span><br><span class="line"></span><br></pre>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </figure>
                  <ul>
                    <li>
                      <p>运行</p>
                      <table>
                        <thead>
                          <tr>
                            <th align="center">成功执行<hanla></hanla><code>docker-compose.yml</code></th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr>
                            <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/c9036d99ac3c4e32a3117630b8a2b594.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAY29kZXItaXRs,size_20,color_FFFFFF,t_70,g_se,x_16"></td>
                          </tr>
                        </tbody>
                      </table>
                    </li>
                  </ul>
                </li>
              </ul>
            </li>
            <li>
              <p><code>docker-compose</code>
                <hanla></hanla>管理自定义镜像
              </p>
              <ul>
                <li>
                  <p>文件目录层级</p>
                  <figure class="highlight html">
                    <table>
                      <tbody>
                        <tr>
                          <td class="gutter">
                            <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre>
                          </td>
                          <td class="code">
                            <pre><span class="line">➜ cprogram  tree /f</span><br><span class="line">Folder PATH listing</span><br><span class="line">Volume serial number is 214A-AF6E</span><br><span class="line">E:.</span><br><span class="line">│   Dockerfile</span><br><span class="line">│   index.html</span><br><span class="line">│   </span><br><span class="line">└───docker-compose</span><br><span class="line">        docker-compose.yml # docker-compose up -d 在此目录执行</span><br><span class="line">        </span><br><span class="line">➜ cprogram</span><br><span class="line"></span><br></pre>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </figure>
                </li>
                <li>
                  <p><code>Dockerfile</code></p>
                  <figure class="highlight properties">
                    <table>
                      <tbody>
                        <tr>
                          <td class="gutter">
                            <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre>
                          </td>
                          <td class="code">
                            <pre><span class="line"><span class="comment"># 容器内部路径需要准确无误<hanla></hanla></span></span><br><span class="line"><span class="attr">from</span> <span class="string">daocloud.io/library/nginx:1.9.1 </span></span><br><span class="line"><span class="attr">copy</span> <span class="string">index.html /usr/share/nginx/html # 如果后面的路径不正确<hanla></hanla>nginx<hanla></hanla>是不能访问到指定的资源文件,<hanla></hanla>会启动为 nginx<hanla></hanla>默认页面</span></span><br></pre>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </figure>
                </li>
                <li>
                  <p><code>docker-compose.yml</code></p>
                  <figure class="highlight yml">
                    <table>
                      <tbody>
                        <tr>
                          <td class="gutter">
                            <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre>
                          </td>
                          <td class="code">
                            <pre><span class="line"><span class="attr">version:</span> <span class="string">'3.1'</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">nginx_show_index:</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">build:</span></span><br><span class="line">      <span class="comment"># 构建自定义镜像</span></span><br><span class="line">      <span class="attr">context:</span> <span class="string">../</span> <span class="comment"># 指定 dockerfile 文件的所在路径</span></span><br><span class="line">      <span class="attr">dockerfile:</span> <span class="string">Dockerfile</span> <span class="comment"># 指定<hanla></hanla>Dockerfile 文件名称  </span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">myNginxShowIndex:1.0.0</span> <span class="comment"># 自定义镜像名</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">nginx_show_index</span> <span class="comment"># 容器名称</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">81</span><span class="string">:80</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">TZ:</span> <span class="string">Asia/Shanghai</span></span><br></pre>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </figure>
                </li>
                <li>
                  <p>提示</p>
                  <figure class="highlight shell">
                    <table>
                      <tbody>
                        <tr>
                          <td class="gutter">
                            <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre>
                          </td>
                          <td class="code">
                            <pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">可以直接启动基于 docker-compose.yml 以及 Dockerfiler 文件构建的自定义镜像<hanla></hanla></span></span><br><span class="line">docker-compose up -d</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">如果自定义镜像不存在,<hanla></hanla>会帮助我们构建出自定义镜像,<hanla></hanla>如果自定义镜像已经存在,<hanla></hanla>会直接运行这个自定义镜像</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">重新构建</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">重新构建自定义镜像<hanla></hanla></span></span><br><span class="line">docker-compose build</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">运行前 重新构建<hanla></hanla></span></span><br><span class="line">docker-compose up -d --build</span><br></pre>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </figure>
                </li>
              </ul>
            </li>
            <li>
              <p>微服务制作</p>
              <figure class="highlight yml">
                <table>
                  <tbody>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="attr">version:</span> <span class="string">"3"</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">microService:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">coderitl_docker:1.6</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">ms01</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">"6001:6001"</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">/app/microService:/data</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">coderitl</span></span><br><span class="line">    <span class="attr">depends_on:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">redis</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">mysql</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">redis:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">redis:6.0.8</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">"6379:6379"</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">/app/redis/redis.conf:/etc/redis/redis.conf</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">/app/redis/data:/data</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">coderitl</span></span><br><span class="line">    <span class="attr">command:</span> <span class="string">redis-server</span> <span class="string">/etc/redis/redis.conf</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">mysql:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">mysql:5.7</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">MYSQL_ROOT_PASSWORD:</span> <span class="string">'123456'</span></span><br><span class="line">      <span class="attr">MYSQL_ALLOW_EMPTY_PASSWORD:</span> <span class="string">'no'</span></span><br><span class="line">      <span class="attr">MYSQL_DATABASE:</span> <span class="string">'db2021'</span></span><br><span class="line">      <span class="attr">MYSQL_USER:</span> <span class="string">'root'</span></span><br><span class="line">      <span class="attr">MYSQL_PASSWORD:</span> <span class="string">'root'</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">"3306:3306"</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">/app/mysql/db:/var/lib/mysql</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">/app/mysql/conf/my.cnf:/etc/my.cnf</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">/app/mysql/init:/docker-entrypoint-initdb.d</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">coderitl</span></span><br><span class="line">    <span class="attr">command:</span> <span class="string">--default-authentication-plugin=mysql_native_password</span> <span class="comment">#解决外部无法访问</span></span><br><span class="line"><span class="comment"># 配置在同一网段【docker-网络部分学习】</span></span><br><span class="line"><span class="attr">networks:</span></span><br><span class="line">  <span class="attr">coderitl:</span></span><br><span class="line"></span><br></pre>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </figure>
            </li>
          </ul>
          <h4 id="Docker-轻量级可视化工具-Portainer"><a href="#Docker-轻量级可视化工具-Portainer" class="headerlink" title="Docker-轻量级可视化工具 Portainer"></a>Docker-轻量级可视化工具 Portainer</h4>
          <ul>
            <li>
              <p>安装</p>
              <figure class="highlight properties">
                <table>
                  <tbody>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="attr">docker</span> <span class="string">run -d -p 8000:8000 -p 9000:9000 \</span></span><br><span class="line"><span class="string">--name protainer \</span></span><br><span class="line"><span class="string">--restart=always \</span></span><br><span class="line"><span class="string">-v /var/run/docker.sock:/var/run/docker.sock \</span></span><br><span class="line"><span class="string">-v portainer_data:/data \</span></span><br><span class="line"><span class="string">portainer/portainer-ce:latest</span></span><br></pre>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </figure>
            </li>
            <li>
              <p>通过<hanla></hanla><code>ip:9000</code>
                <hanla></hanla>访问
              </p>
            </li>
            <li>
              <p>设置<hanla></hanla><code>admin</code>
                <hanla></hanla>用户和密码<hanla></hanla>(<code>coder-itl</code>)<hanla></hanla>后首次登录
              </p>
              <table>
                <thead>
                  <tr>
                    <th align="center">创建用户</th>
                    <th></th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/cb8472acb3294c8584b3a16756956853.png"></td>
                    <td></td>
                  </tr>
                </tbody>
              </table>
            </li>
            <li>
              <p>登录后选择<hanla></hanla><code>local</code></p>
              <table>
                <thead>
                  <tr>
                    <th align="center">监控本地</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/dfe2762083004844b0db0d1d063cbf8c.png"></td>
                  </tr>
                </tbody>
              </table>
            </li>
          </ul>
          <h4 id="Docker-CI、CD"><a href="#Docker-CI、CD" class="headerlink" title="Docker-CI、CD"></a>Docker-CI、CD</h4>
          <h5 id="CI"><a href="#CI" class="headerlink" title="CI"></a>CI</h5>
          <ul>
            <li>
              <p><code>ci</code>
                <hanla></hanla>介绍
              </p>
              <div class="tip cogs">
                <p>**CI(continuous intergration)**：持续集成</p>
                <p>持续集成: 编写代码时,<hanla></hanla>完成了一个功能后,<hanla></hanla>立即提交代码到<hanla></hanla><code>Git</code>
                  <hanla></hanla>仓库中,<hanla></hanla>将项目重新构建并且测试
                </p>
                <ul>
                  <li>快速发现错误</li>
                  <li>防止代码偏离主分支</li>
                </ul>
              </div>
            </li>
            <li>
              <p>搭建<hanla></hanla><code>gitlab</code></p>
              <figure class="highlight shell">
                <table>
                  <tbody>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">修改 ssh 默认连接端口<hanla></hanla></span></span><br><span class="line">vim /etc/ssh/sshd_config</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">修改 Port 22 =&gt; 其他端口 保存 =&gt; 退出 注意下次连接<hanla></hanla>Linux<hanla></hanla>时,<hanla></hanla>修改端口</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">重启 sshd</span></span><br><span class="line">systemctl restart sshd</span><br></pre>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </figure>
              <table>
                <thead>
                  <tr>
                    <th align="center">修改<hanla></hanla>ssh<hanla></hanla>端口，为了给<hanla></hanla><code>gitlab</code>
                      <hanla></hanla>使用
                    </th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/cfebc6140f3543068cd5bc090f233ac9.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAY29kZXItaXRs,size_20,color_FFFFFF,t_70,g_se,x_16" alt="修改ssh端口"></td>
                  </tr>
                </tbody>
              </table>
            </li>
            <li>
              <p>创建<hanla></hanla><code>docker-compose.yml</code></p>
              <figure class="highlight yml">
                <table>
                  <tbody>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="attr">version:</span> <span class="string">'3.1'</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">gitlab:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">'coderitl2218/gitlab-ce-zh:11.1.4'</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">"gitlab"</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">privileged:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">hostname:</span> <span class="string">'gitlab'</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">TZ:</span> <span class="string">'Asia/Shanghai'</span></span><br><span class="line">      <span class="attr">GITLAB_OMNIBUS_CONFIG:</span> <span class="string">|</span></span><br><span class="line"><span class="string">        external_url 'http://47.104.232.247' # 注意修改</span></span><br><span class="line"><span class="string">        gitlab_rails['time_zone'] = 'Asia/Shanghai'</span></span><br><span class="line"><span class="string">        gitlab_rails['smtp_enable'] = true</span></span><br><span class="line"><span class="string">        gitlab_rails['gitlab_shell_ssh_port'] = 22</span></span><br><span class="line"><span class="string"></span>    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">'80:80'</span> <span class="comment"># 注意修改</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">'443:443'</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">'22:22'</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">/opt/docker_gitlab/config:/etc/gitlab</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">/opt/docker_gitlab/data:/var/opt/gitlab</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">/opt/docker_gitlab/logs:/var/log/gitlab</span></span><br><span class="line"></span><br></pre>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </figure>
            </li>
            <li>
              <p>搭建成功</p>
              <div class="tip success">
                <p><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/d5ededd5f2024bd395e4aae5f10b14ee.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAY29kZXItaXRs,size_20,color_FFFFFF,t_70,g_se,x_16" alt="成功执行"></p>
                <p><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/c24e88bf8d024d5384d7370e57b6fd17.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAY29kZXItaXRs,size_20,color_FFFFFF,t_70,g_se,x_16" alt="修改密码"></p>
                <p><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/465a6a6ea91b4baa9dd6489ba6b045da.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAY29kZXItaXRs,size_16,color_FFFFFF,t_70,g_se,x_16" alt="用户名root,密码为上步设置的密码"></p>
                <p><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/a16ac425e6d744acacc4ae24420b117c.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAY29kZXItaXRs,size_20,color_FFFFFF,t_70,g_se,x_16" alt="进入gitlab首页"></p>
              </div>
            </li>
            <li>
              <p>搭建<hanla></hanla><code>gitlab-runner</code> </p>
              <ul>
                <li>
                  <p>创建 <code>docker</code> 卷 </p>
                  <figure class="highlight yml">
                    <table>
                      <tbody>
                        <tr>
                          <td class="gutter">
                            <pre><span class="line">1</span><br></pre>
                          </td>
                          <td class="code">
                            <pre><span class="line"><span class="string">docker</span> <span class="string">volume</span> <span class="string">create</span> <span class="string">gitlab-runner-config</span></span><br></pre>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </figure>
                </li>
                <li>
                  <p>使用我们刚刚创建的卷启动 <code>GitLab Runner </code>容器</p>
                  <figure class="highlight shell">
                    <table>
                      <tbody>
                        <tr>
                          <td class="gutter">
                            <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre>
                          </td>
                          <td class="code">
                            <pre><span class="line">docker run -d --name gitlab-runner  --restart always \</span><br><span class="line">    -v /var/run/docker.sock:/var/run/docker.sock \</span><br><span class="line">    -v gitlab-runner-config:/etc/gitlab-runner \</span><br><span class="line">    gitlab/gitlab-runner:latest</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">-v gitlab-runner-config 本地配置文件查看路径</span></span><br></pre>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </figure>
                </li>
                <li>
                  <p>检测是否安装</p>
                  <table>
                    <thead>
                      <tr>
                        <th align="center">检测<hanla></hanla><code>gitlab-runner</code></th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/46e7357cdf7344de9666735568dabddc.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAY29kZXItaXRs,size_20,color_FFFFFF,t_70,g_se,x_16" alt="检测gitlab-runner"></td>
                      </tr>
                    </tbody>
                  </table>
                </li>
                <li>
                  <p>添加容器权限，保证容器可以使用宿主机的<hanla></hanla><code>docker,</code> <code> docker exec -it gitlab-runner usermod -aG root gitlab-runner</code></p>
                </li>
                <li>
                  <p>注册</p>
                  <figure class="highlight shell">
                    <table>
                      <tbody>
                        <tr>
                          <td class="gutter">
                            <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre>
                          </td>
                          <td class="code">
                            <pre><span class="line">docker exec -it gitlab-runner gitlab-runner register</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">输入 GitLab 地址<hanla></hanla></span></span><br><span class="line">Please enter the gitlab-ci coordinator URL (e.g. https://gitlab.com/):</span><br><span class="line">http://192.168.199.109/</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">输入 GitLab Token</span></span><br><span class="line">Please enter the gitlab-ci token for this runner:</span><br><span class="line">1Lxq_f1NRfCfeNbE5WRh</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">输入 Runner 的说明<hanla></hanla></span></span><br><span class="line">Please enter the gitlab-ci description for this runner:</span><br><span class="line"><hanla></hanla>可以为空</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">设置 Tag，可以用于指定在构建规定的 tag 时触发 ci</span></span><br><span class="line">Please enter the gitlab-ci tags for this runner (comma separated):</span><br><span class="line">deploy</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">这里选择 <span class="literal">true</span> ，可以用于代码上传后直接执行（根据版本，也会没有次选项）</span></span><br><span class="line">Whether to run untagged builds [true/false]:</span><br><span class="line">true</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">这里选择 <span class="literal">false</span>，可以直接回车，默认为 <span class="literal">false</span>（根据版本，也会没有次选项）</span></span><br><span class="line">Whether to lock Runner to current project [true/false]:</span><br><span class="line">false</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">选择 runner 执行器，这里我们选择的是 shell</span></span><br><span class="line">Please enter the executor: virtualbox, docker+machine, parallels, shell, ssh, docker-ssh+machine, kubernetes, docker, docker-ssh:</span><br><span class="line">shell</span><br></pre>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </figure>
                  <ul>
                    <li>
                      <p>按顺序输入</p>
                      <table>
                        <thead>
                          <tr>
                            <th align="center">输入指定信息</th>
                            <th align="center">成功创建</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr>
                            <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/b9ae851b3f7e4ab88da37383f878866a.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAY29kZXItaXRs,size_20,color_FFFFFF,t_70,g_se,x_16" alt="输入指定信息"></td>
                            <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/520621870b284a70af48445cf9043493.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAY29kZXItaXRs,size_20,color_FFFFFF,t_70,g_se,x_16" alt="成功创建"></td>
                          </tr>
                        </tbody>
                      </table>
                    </li>
                    <li>
                      <p>进一步设置</p>
                      <table>
                        <thead>
                          <tr>
                            <th align="center">点击编辑</th>
                            <th align="center">选择如下选项</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr>
                            <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/66611083a5d54d42bbf1e616005baabd.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAY29kZXItaXRs,size_20,color_FFFFFF,t_70,g_se,x_16"></td>
                            <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/568e0629f6324882b64c3abcef797498.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAY29kZXItaXRs,size_20,color_FFFFFF,t_70,g_se,x_16" alt="编辑"></td>
                          </tr>
                        </tbody>
                      </table>
                    </li>
                  </ul>
                </li>
              </ul>
            </li>
            <li>
              <p>测试<hanla></hanla><code>gitlab</code>
                <hanla></hanla>推送
              </p>
              <ul>
                <li>
                  <p>这里比较麻烦<code>我的 http</code>
                    <hanla></hanla>始终是没有测试推送成功过
                  </p>
                </li>
                <li>
                  <p>在<hanla></hanla><code>windows</code>
                    <hanla></hanla>下关于<hanla></hanla><code>ssh_key</code>
                    <hanla></hanla>始终也没能验证成功,<hanla></hanla>为了赶进度,<hanla></hanla>暂时跳过
                  </p>
                </li>
                <li>
                  <p>解决方案</p>
                  <ul>
                    <li>
                      <p>使用<hanla></hanla><code>Linux</code>
                        <hanla></hanla>下创建<code> ssh-keygen -t rsa -C "admin@example.com"</code>
                      </p>
                      <figure class="highlight shell">
                        <table>
                          <tbody>
                            <tr>
                              <td class="gutter">
                                <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre>
                              </td>
                              <td class="code">
                                <pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">gitlab 默认提供的 邮箱也用它,<hanla></hanla>没能验证成功邮箱,gitlab 注册页面没有在弹出,<hanla></hanla>也就再没理会该问题<hanla></hanla></span></span><br><span class="line">git config --global user.name "Administrator"</span><br><span class="line">git config --global user.email "admin@example.com"</span><br></pre>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </figure>
                    </li>
                    <li>
                      <p>查看并添加<hanla></hanla><code>SSH</code>
                        <hanla></hanla>到<hanla></hanla><code>gitlab</code>
                      </p>
                      <figure class="highlight shell">
                        <table>
                          <tbody>
                            <tr>
                              <td class="gutter">
                                <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre>
                              </td>
                              <td class="code">
                                <pre><span class="line">cd ~/.ssh/</span><br><span class="line">ls</span><br><span class="line">cat xxx.pub</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">复制该文件内容,<hanla></hanla>注意空格</span></span><br><span class="line"></span><br></pre>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </figure>
                    </li>
                    <li>
                      <p>修改<hanla></hanla><code>linux </code>下的<code>~/.ssh/</code>
                        <hanla></hanla>的权限
                      </p>
                      <figure class="highlight shell">
                        <table>
                          <tbody>
                            <tr>
                              <td class="gutter">
                                <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre>
                              </td>
                              <td class="code">
                                <pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">都执行一下<hanla></hanla></span></span><br><span class="line">chmod 755 ~/.ssh/  </span><br><span class="line">chmod 600 ~/.ssh/id_rsa ~/.ssh/id_rsa.pub   #一般执行这条就行了。</span><br></pre>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </figure>
                    </li>
                    <li>
                      <p>寻找<hanla></hanla><code>SSH</code>
                        <hanla></hanla>添加位置
                      </p>
                      <table>
                        <thead>
                          <tr>
                            <th align="center">添加<hanla></hanla>ssh_key</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr>
                            <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/5a7d33b2d3eb4e00a2bd46ac28fabfe5.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAY29kZXItaXRs,size_20,color_FFFFFF,t_70,g_se,x_16" alt="添加ssh"></td>
                          </tr>
                        </tbody>
                      </table>
                    </li>
                    <li>
                      <p>验证是否成功</p>
                      <figure class="highlight shell">
                        <table>
                          <tbody>
                            <tr>
                              <td class="gutter">
                                <pre><span class="line">1</span><br><span class="line">2</span><br></pre>
                              </td>
                              <td class="code">
                                <pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">验证 gitlab 服务器<hanla></hanla></span></span><br><span class="line">ssh -T git@47.104.232.247</span><br></pre>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </figure>
                      <ul>
                        <li>
                          <p>输出</p>
                          <table>
                            <thead>
                              <tr>
                                <th align="center">验证是否添加成功</th>
                              </tr>
                            </thead>
                            <tbody>
                              <tr>
                                <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/b86236c6289b403687f322d5126aa62d.png" alt="验证是否添加成功"></td>
                              </tr>
                            </tbody>
                          </table>
                        </li>
                      </ul>
                    </li>
                    <li>
                      <p>尝试克隆仓库</p>
                      <table>
                        <thead>
                          <tr>
                            <th align="center">拉取<hanla></hanla><code>gitlab</code>
                              <hanla></hanla>公共仓库
                            </th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr>
                            <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/e56756185fd2419c883b42496be9e0f6.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAY29kZXItaXRs,size_20,color_FFFFFF,t_70,g_se,x_16" alt="拉取远程仓库"></td>
                          </tr>
                        </tbody>
                      </table>
                    </li>
                    <li>
                      <p>再次测试直接添加<hanla></hanla><code>remote </code>初始化本地仓库</p>
                      <ul>
                        <li>
                          <p>创建远程仓库</p>
                          <table>
                            <thead>
                              <tr>
                                <th align="center">创建远程仓库</th>
                              </tr>
                            </thead>
                            <tbody>
                              <tr>
                                <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/9eb8ad8a817c4115abb1c21280d03a5b.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAY29kZXItaXRs,size_20,color_FFFFFF,t_70,g_se,x_16" alt="创建远程仓库"></td>
                              </tr>
                            </tbody>
                          </table>
                        </li>
                        <li>
                          <p>关联仓库测试推送<hanla></hanla>(<code>第一天是没能实现管理的,<hanla></hanla>一直报错是关于 not found</code>)</p>
                          <table>
                            <thead>
                              <tr>
                                <th align="center">关联仓库测试推送</th>
                              </tr>
                            </thead>
                            <tbody>
                              <tr>
                                <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/45185a60ba574f94ad5fa89165c8faa5.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAY29kZXItaXRs,size_20,color_FFFFFF,t_70,g_se,x_16" alt="关联仓库测试推送"></td>
                              </tr>
                            </tbody>
                          </table>
                        </li>
                        <li>
                          <p><code>windows</code>
                            <hanla></hanla>再次测试拉取
                          </p>
                          <div class="tip error">
                            <p><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/bf5c4c5f861144f695f02cf4f3f60fb8.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAY29kZXItaXRs,size_20,color_FFFFFF,t_70,g_se,x_16" alt="未能正确解决该问题"></p>
                          </div>
                          <ul>
                            <li>
                              <p>解决方案</p>
                              <figure class="highlight shell">
                                <table>
                                  <tbody>
                                    <tr>
                                      <td class="gutter">
                                        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre>
                                      </td>
                                      <td class="code">
                                        <pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">在 ~/.ssh/config 文件中添加如下信息</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">gitlab</span></span><br><span class="line">Host gitlab-服务器<hanla></hanla>ip 不添加端口号</span><br><span class="line">    HostName gitlab-服务器<hanla></hanla>ip 不添加端口号</span><br><span class="line">    User root</span><br><span class="line">    IdentityFile ~/.ssh/cp_id_rsa # 我这里将 linux 的 文件复制下来了</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">命令行执行<hanla></hanla></span></span><br><span class="line">ssh-keygen -R gitlab<hanla></hanla>服务器<hanla></hanla>IP</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">输出一下信息</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Host 47.104.232.247 found: line 8</span></span><br><span class="line">C:\Users\coderitl/.ssh/known_hosts updated.</span><br><span class="line">Original contents retained as C:\Users\coderitl/.ssh/known_hosts.old</span><br><span class="line"></span><br><span class="line"></span><br></pre>
                                      </td>
                                    </tr>
                                  </tbody>
                                </table>
                              </figure>
                            </li>
                            <li>
                              <p>测试拉取远程仓库</p>
                              <table>
                                <thead>
                                  <tr>
                                    <th align="center">Windows<hanla></hanla>拉取远程仓库</th>
                                  </tr>
                                </thead>
                                <tbody>
                                  <tr>
                                    <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/536a77da6dd848b7ab06a4b608b3a1ec.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAY29kZXItaXRs,size_20,color_FFFFFF,t_70,g_se,x_16" alt="Windows终于成功拉取gitlab仓库"></td>
                                  </tr>
                                </tbody>
                              </table>
                              <ul>
                                <li>
                                  <p>成功解决在<hanla></hanla><code>windows</code>
                                    <hanla></hanla>上的免密推送
                                  </p>
                                  <table>
                                    <thead>
                                      <tr>
                                        <th align="center"><code>Windows</code>
                                          <hanla></hanla>成功推送到<hanla></hanla><code>gitlab</code>
                                          <hanla></hanla>仓库
                                        </th>
                                      </tr>
                                    </thead>
                                    <tbody>
                                      <tr>
                                        <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/e279a1c132e84dc78966842271d1a73c.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAY29kZXItaXRs,size_20,color_FFFFFF,t_70,g_se,x_16" alt="Windows成功推送到gitlab仓库"></td>
                                      </tr>
                                    </tbody>
                                  </table>
                                </li>
                              </ul>
                            </li>
                          </ul>
                        </li>
                      </ul>
                    </li>
                  </ul>
                </li>
              </ul>
            </li>
          </ul>
          <h5 id="持续集成"><a href="#持续集成" class="headerlink" title="持续集成"></a>持续集成</h5>
          <ul>
            <li>
              <p>创建<hanla></hanla><code>maven</code>
                <hanla></hanla>项目，并关联<hanla></hanla><code>gitlab</code>
                <hanla></hanla>远程仓库
              </p>
            </li>
            <li>
              <p>创建<code>.gitlab-ci.yml</code></p>
              <table>
                <thead>
                  <tr>
                    <th align="center">选择 <code>CI-CD</code></th>
                    <th align="center">创建<code>.gitlab-ci.yml</code></th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/db698a52a18f4e4cad933849f4f3df5d.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAY29kZXItaXRs,size_16,color_FFFFFF,t_70,g_se,x_16" alt="CI-CD"></td>
                    <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/d9bcd7a655c74a20950f7fa4158c130e.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAY29kZXItaXRs,size_20,color_FFFFFF,t_70,g_se,x_16" alt="创建gitlab-ci.yml"></td>
                  </tr>
                </tbody>
              </table>
              <ul>
                <li>
                  <p>失败<hanla></hanla>(<code>进入流水线之后，观察到是使用<hanla></hanla>http，而我已经开启了<hanla></hanla>ssh</code>)</p>
                  <table>
                    <thead>
                      <tr>
                        <th align="center">日志报错信息</th>
                        <th align="center">runner<hanla></hanla>类型</th>
                        <th align="center">服务器阻塞</th>
                        <th align="center">本地<hanla></hanla>centos<hanla></hanla>成功运行</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/550b4b9b44e8411e921e7143a44ff402.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAY29kZXItaXRs,size_20,color_FFFFFF,t_70,g_se,x_16" alt="日志报错信息"></td>
                        <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/6f093e2a9f214830a8931e6e0f000073.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAY29kZXItaXRs,size_20,color_FFFFFF,t_70,g_se,x_16" alt="runner类型"></td>
                        <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/f3bc9c55904b4ce18336a55fecf7378b.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAY29kZXItaXRs,size_20,color_FFFFFF,t_70,g_se,x_16" alt="阻塞"></td>
                        <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/b5f9f801426e44f5bffc736e6a51bc84.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAY29kZXItaXRs,size_20,color_FFFFFF,t_70,g_se,x_16" alt="测试任务"></td>
                      </tr>
                    </tbody>
                  </table>
                </li>
                <li>
                  <p>宿主机安装<hanla></hanla><code>java 、maven</code>
                    <hanla></hanla>并配置环境变量
                  </p>
                  <figure class="highlight shell">
                    <table>
                      <tbody>
                        <tr>
                          <td class="gutter">
                            <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre>
                          </td>
                          <td class="code">
                            <pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">先安装 wget</span></span><br><span class="line">yum -y install wget</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">创建文件夹管理<hanla></hanla>(Linux<hanla></hanla>其实和<hanla></hanla>Windows<hanla></hanla>安装一样,<hanla></hanla>位置首先自己得清楚)</span></span><br><span class="line">mkdir environment</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">进入该目录<hanla></hanla></span></span><br><span class="line">cd environment</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">下载 maven 需要注意下载的文件里面是否含有 bin 目录 ,<hanla></hanla>下载<hanla></hanla>3.8.4 没有出现<hanla></hanla>bin<hanla></hanla>目录,<hanla></hanla>这里使用<hanla></hanla>3.6</span></span><br><span class="line">wget https://mirrors.tuna.tsinghua.edu.cn/apache/maven/maven-3/3.6.3/binaries/apache-maven-3.6.3-bin.tar.gz</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">alibaba =&gt; Java(github<hanla></hanla>下载很慢,<hanla></hanla>建议下载到<hanla></hanla>windows<hanla></hanla>传输)</span></span><br><span class="line">wget https://github.com/alibaba/dragonwell8/releases/download/dragonwell-8.8.9_jdk8u302-ga/Alibaba_Dragonwell_8.8.9_x64_linux.tar.gz</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">解压<hanla></hanla></span></span><br><span class="line">tar -zxvf apache-maven-3.6.3-bin.tar.gz</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">进入解压后的目录<hanla></hanla></span></span><br><span class="line">cd apache-maven-3.6.3</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">获取所在目录<hanla></hanla></span></span><br><span class="line">pwd</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">复制好上述输出的目录</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">编辑环境变量<hanla></hanla></span></span><br><span class="line">vim /etc/profile</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">进入文件末尾 添加如下,<hanla></hanla>注意匹配<hanla></hanla></span></span><br><span class="line">JAVA_HOME=/root/maven_3.6.3/jdk1.8.0_231</span><br><span class="line">MAVEN_HOME=/root/maven_3.6.3/apache-maven-3.6.3</span><br><span class="line">export PATH=$JAVA_HOME/bin:$MAVEN_HOME/bin:$PATH</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">是环境变量生效<hanla></hanla></span></span><br><span class="line">source /etc/profile</span><br><span class="line"></span><br></pre>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </figure>
                  <ul>
                    <li>
                      <p>检测是否安装成功</p>
                      <table>
                        <thead>
                          <tr>
                            <th align="center">检测安装环境是否正常</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr>
                            <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/3eacf097cba048a68e6afe492708e37f.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAY29kZXItaXRs,size_20,color_FFFFFF,t_70,g_se,x_16" alt="检测安装环境是否正常"></td>
                          </tr>
                        </tbody>
                      </table>
                    </li>
                  </ul>
                </li>
              </ul>
            </li>
          </ul>
          <h5 id="http解决连接"><a href="#http解决连接" class="headerlink" title="http解决连接"></a>http<hanla></hanla>解决连接</h5>
          <ul>
            <li>
              <p>创建访问令牌</p>
              <blockquote>
                <p><code>头像 =&gt; 设置 =&gt; 左侧<hanla></hanla>(访问令牌) =&gt;</code></p>
              </blockquote>
              <table>
                <thead>
                  <tr>
                    <th align="center">创建访问令牌,<hanla></hanla>最后添加的是此处的令牌</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/ddb433c82f784b9f8f1db0584e1f8ecf.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAY29kZXItaXRs,size_20,color_FFFFFF,t_70,g_se,x_16" alt="访问令牌"></td>
                  </tr>
                </tbody>
              </table>
              <table>
                <thead>
                  <tr>
                    <th align="center">创建仓库令牌</th>
                    <th></th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/345ad2d678c14cd09a3ca36b7e514bd5.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAY29kZXItaXRs,size_20,color_FFFFFF,t_70,g_se,x_16" alt="创建仓库令牌"></td>
                    <td></td>
                  </tr>
                </tbody>
              </table>
            </li>
            <li>
              <p>修改连接参数</p>
              <figure class="highlight shell">
                <table>
                  <tbody>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line">http:oauth:<hanla></hanla>拥有可读可写的令牌<hanla></hanla>@gitlab-服务器地址:<hanla></hanla>端口<hanla></hanla>/<hanla></hanla>用户名<hanla></hanla>/<hanla></hanla>仓库名.git</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Eg</span></span><br><span class="line">http:oauth2:xxxxxx@192.168.0.128:22/root/coder-itl.git</span><br></pre>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </figure>
            </li>
            <li>
              <p>测试</p>
              <table>
                <thead>
                  <tr>
                    <th align="center">修改连接参数</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/c72c5cd765074ad482380d393c1959b1.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAY29kZXItaXRs,size_20,color_FFFFFF,t_70,g_se,x_16" alt="修改连接参数"></td>
                  </tr>
                </tbody>
              </table>
            </li>
          </ul>
          <h5 id="CD-Jenkins"><a href="#CD-Jenkins" class="headerlink" title="CD(Jenkins)"></a><code>CD(Jenkins)</code></h5>
          <ul>
            <li>
              <p>实现持续交付持续部署</p>
              <ul>
                <li>
                  <p>官网</p>
                  <blockquote>
                    <p><code>https:www.jenkins.io</code></p>
                  </blockquote>
                </li>
                <li>
                  <p><code>docker-compose.yml</code></p>
                  <figure class="highlight shell">
                    <table>
                      <tbody>
                        <tr>
                          <td class="gutter">
                            <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre>
                          </td>
                          <td class="code">
                            <pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">当前工作目录: /root/data/jenkins</span></span><br><span class="line">mkdir data</span><br><span class="line">chmod 777 data</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">user<hanla></hanla>的<hanla></hanla>uid<hanla></hanla>为<hanla></hanla>1000</span></span><br><span class="line">mkdir -p /var/jenkins_home</span><br><span class="line">chown -R 1000:1000 /var/jenkins_home</span><br></pre>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </figure>
                  <figure class="highlight yml">
                    <table>
                      <tbody>
                        <tr>
                          <td class="gutter">
                            <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre>
                          </td>
                          <td class="code">
                            <pre><span class="line"><span class="attr">version:</span> <span class="string">"3.1"</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">jenkins:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">jenkins/jenkins</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">jenkins</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">8888</span><span class="string">:8080</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">50000</span><span class="string">:50000</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./data:/var/jenkins_home</span></span><br></pre>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </figure>
                </li>
                <li>
                  <p>密码在<hanla></hanla><code>jenkins</code>
                    <hanla></hanla>容器日志中,<hanla></hanla>访问时输入
                  </p>
                  <figure class="highlight shell">
                    <table>
                      <tbody>
                        <tr>
                          <td class="gutter">
                            <pre><span class="line">1</span><br></pre>
                          </td>
                          <td class="code">
                            <pre><span class="line">docker logs -f jenkins</span><br></pre>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </figure>
                  <table>
                    <thead>
                      <tr>
                        <th align="center"><code>Jenkins</code>
                          <hanla></hanla>密码
                        </th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/20c9683d041d427a8e6e60b7dee45a8a.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbG92b2Jpbi5naXRodWIuaW8=,size_20,color_FFFFFF,t_70,g_se,x_16" alt="Jenkins密码"></td>
                      </tr>
                    </tbody>
                  </table>
                </li>
                <li>
                  <p>访问</p>
                  <figure class="highlight shell">
                    <table>
                      <tbody>
                        <tr>
                          <td class="gutter">
                            <pre><span class="line">1</span><br></pre>
                          </td>
                          <td class="code">
                            <pre><span class="line">http://ip:8888/</span><br></pre>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </figure>
                </li>
                <li>
                  <p>选择插件安装</p>
                  <ul>
                    <li>
                      <p><code>git</code>
                        <hanla></hanla>系列
                      </p>
                      <table>
                        <thead>
                          <tr>
                            <th align="center"><code>git</code>
                              <hanla></hanla>系列选择
                            </th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr>
                            <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/a16867c5c3bb4b548edf7abe528d1bc8.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbG92b2Jpbi5naXRodWIuaW8=,size_20,color_FFFFFF,t_70,g_se,x_16" alt="git系列选择"></td>
                          </tr>
                        </tbody>
                      </table>
                    </li>
                    <li>
                      <p><code>ssh</code>,<code>publish 因为安全问题被下架</code></p>
                    </li>
                  </ul>
                </li>
              </ul>
            </li>
            <li>
              <p>配置目标服务器与<hanla></hanla><code>Gitlab</code>
                <hanla></hanla>免密登录
              </p>
              <ul>
                <li>
                  <p>目标服务器</p>
                  <table>
                    <thead>
                      <tr>
                        <th align="center">入口</th>
                        <th align="center">SSH<hanla></hanla>配置</th>
                        <th align="center">测试链接</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/df34e17895de49b5b4d60b25c71d2e35.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbG92b2Jpbi5naXRodWIuaW8=,size_19,color_FFFFFF,t_70,g_se,x_16" alt="入口"></td>
                        <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/6ad19679700e471685d208bf4f90c265.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbG92b2Jpbi5naXRodWIuaW8=,size_20,color_FFFFFF,t_70,g_se,x_16" alt="SSH配置"></td>
                        <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/b1b47c4b7d5b4062a49e30e8f79d6eed.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbG92b2Jpbi5naXRodWIuaW8=,size_20,color_FFFFFF,t_70,g_se,x_16" alt="测试链接"></td>
                      </tr>
                    </tbody>
                  </table>
                </li>
                <li>
                  <p>免密登录</p>
                  <ul>
                    <li>
                      <p>进入<hanla></hanla><code>jenkins</code>
                        <hanla></hanla>容器内创建密钥
                      </p>
                      <figure class="highlight shell">
                        <table>
                          <tbody>
                            <tr>
                              <td class="gutter">
                                <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre>
                              </td>
                              <td class="code">
                                <pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">docker ps</span></span><br><span class="line">docker exec -it [jenkins | 容器<hanla></hanla>id] bash</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">三次回车<hanla></hanla></span></span><br><span class="line">ssh-keygen -t rsa -C "email"</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">退出容器<hanla></hanla></span></span><br><span class="line">exit</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">进入容器中显示存放的目录<hanla></hanla></span></span><br><span class="line">cd /root/data/jenkins/data/.ssh</span><br><span class="line"></span><br></pre>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </figure>
                    </li>
                    <li>
                      <p><code>gitlab</code>
                        <hanla></hanla>添加<hanla></hanla><code>SSH</code>
                        <hanla></hanla>生成的<hanla></hanla><code>xxx.pub</code>
                        <hanla></hanla>的内容
                      </p>
                    </li>
                  </ul>
                </li>
                <li>
                  <p>为<hanla></hanla><code>Jenkins</code>
                    <hanla></hanla>配置<hanla></hanla><code>maven、java（添加容器内的路径）</code>
                  </p>
                  <figure class="highlight shell">
                    <table>
                      <tbody>
                        <tr>
                          <td class="gutter">
                            <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre>
                          </td>
                          <td class="code">
                            <pre><span class="line"><span class="meta prompt_"> # </span><span class="language-bash">复制环境中已经存在的文件 到 jenkins 的映射目录中</span></span><br><span class="line"> cp -R maven/ ~/data/jenkins/data/</span><br><span class="line"> cp -R java/ ~/data/jenkins/data/</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">宿主机的映射路径</span></span><br></pre>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </figure>
                  <table>
                    <thead>
                      <tr>
                        <th align="center">Maven<hanla></hanla>配置位置，全局配置的下面`</th>
                        <th align="center">容器内环境位置</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/62f09943b29e4de59956f7a7b5ff3eb7.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbG92b2Jpbi5naXRodWIuaW8=,size_20,color_FFFFFF,t_70,g_se,x_16"></td>
                        <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/3a69eab0bd6348688fdd80fa6dcb9406.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbG92b2Jpbi5naXRodWIuaW8=,size_20,color_FFFFFF,t_70,g_se,x_16" alt="容器内环境位置"></td>
                      </tr>
                    </tbody>
                  </table>
                </li>
              </ul>
            </li>
            <li>
              <p>手动拉取<hanla></hanla><code>gitlab</code>
                <hanla></hanla>项目
              </p>
              <ul>
                <li>
                  <p>生成<code>密钥</code></p>
                  <figure class="highlight shell">
                    <table>
                      <tbody>
                        <tr>
                          <td class="gutter">
                            <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre>
                          </td>
                          <td class="code">
                            <pre><span class="line">ssh-keygen -t rsa -C "admin@example.com" </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">生成 config 文件</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">gitlab</span></span><br><span class="line">Host ip</span><br><span class="line">    HostName ip</span><br><span class="line">    User root</span><br><span class="line">    IdentityFile ~/.ssh/id_rsa</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">权限<hanla></hanla></span></span><br><span class="line">chmod 400 ~/.ssh/id_rsa</span><br><span class="line"></span><br><span class="line">IdentityFile ~/.ssh/id_rsa =&gt; 这个目录不变,<hanla></hanla>在 jenkins<hanla></hanla>容器内生成的密钥默认放在容器内的该路径下,</span><br><span class="line"></span><br></pre>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </figure>
                </li>
                <li>
                  <p><code>gitlab</code>
                    <hanla></hanla>添加密钥
                  </p>
                </li>
                <li>
                  <p>测试克隆项目</p>
                  <table>
                    <thead>
                      <tr>
                        <th align="center">clone 一次,<hanla></hanla>输入<hanla></hanla><code>yes</code>，二次拉取就不需要验证了</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/0910eed6b98f48c89334044b5dd6ef4e.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbG92b2Jpbi5naXRodWIuaW8=,size_20,color_FFFFFF,t_70,g_se,x_16" alt="clone"></td>
                      </tr>
                    </tbody>
                  </table>
                </li>
              </ul>
            </li>
            <li>
              <p><code>Jenkins</code>
                <hanla></hanla>创建<hanla></hanla><code>maven</code>
                <hanla></hanla>任务
              </p>
              <ul>
                <li>
                  <p>全局凭证</p>
                  <table>
                    <thead>
                      <tr>
                        <th align="center">添加私钥</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/7eee4cf74dd44982a37f95ac9f0b8547.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbG92b2Jpbi5naXRodWIuaW8=,size_20,color_FFFFFF,t_70,g_se,x_16" alt="添加私钥"></td>
                      </tr>
                    </tbody>
                  </table>
                </li>
                <li>
                  <p><code>maven</code></p>
                  <table>
                    <thead>
                      <tr>
                        <th align="center">构建选择<hanla></hanla><code>maven</code></th>
                        <th></th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/f31f4c50fcf74a42ad70135026fbd754.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbG92b2Jpbi5naXRodWIuaW8=,size_16,color_FFFFFF,t_70,g_se,x_16" alt="构建选择maven"></td>
                        <td></td>
                      </tr>
                    </tbody>
                  </table>
                </li>
                <li>
                  <p>配置<hanla></hanla><code>maven 本地仓库 和 阿里云镜像</code></p>
                </li>
                <li>
                  <p>构建输出</p>
                  <table>
                    <thead>
                      <tr>
                        <th align="center"><strong>Jenkins</strong>
                          <hanla></hanla>成功实现
                        </th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/ca6b11ef999f4a839f9ca55282090e53.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbG92b2Jpbi5naXRodWIuaW8=,size_20,color_FFFFFF,t_70,g_se,x_16" alt="成功实现Jenkins"></td>
                      </tr>
                    </tbody>
                  </table>
                </li>
                <li>
                  <p>文件位置</p>
                  <figure class="highlight shell">
                    <table>
                      <tbody>
                        <tr>
                          <td class="gutter">
                            <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre>
                          </td>
                          <td class="code">
                            <pre><span class="line">[INFO] Copying webapp resources [/var/jenkins_home/workspace/Test-CD/src/main/webapp]</span><br><span class="line">[INFO] Building war: /var/jenkins_home/workspace/Test-CD/target/gitlab-ci-1.0-SNAPSHOT.war</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] BUILD SUCCESS</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] Total time:  01:20 min</span><br><span class="line">[INFO] Finished at: 2022-02-17T07:40:12Z</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">Finished: SUCCESS</span><br></pre>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </figure>
                </li>
              </ul>
            </li>
            <li>
              <p>实现持续交付持续部署</p>
              <ul>
                <li>
                  <p>安装<hanla></hanla><code>Git Parameter | Persistent</code></p>
                  <table>
                    <thead>
                      <tr>
                        <th align="center">根据版本可选择,<hanla></hanla>完成后选择<code>重启</code></th>
                        <th align="center">重启<hanla></hanla>(过程漫长)</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/45e9590f407e49f9af43c7838b2422e2.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbG92b2Jpbi5naXRodWIuaW8=,size_20,color_FFFFFF,t_70,g_se,x_16" alt="根据版本可选择"></td>
                        <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/aedc552c22e147f89a2d36c06acba980.png" alt="重启"></td>
                      </tr>
                    </tbody>
                  </table>
                </li>
                <li>
                  <p>重新指定构建项目的方式</p>
                  <ul>
                    <li>
                      <p>添加参数构建</p>
                      <table>
                        <thead>
                          <tr>
                            <th align="center">添加参数构建</th>
                            <th align="center">配置</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr>
                            <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/6c98a4c2778a4ae58828e4ea71cd486c.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbG92b2Jpbi5naXRodWIuaW8=,size_14,color_FFFFFF,t_70,g_se,x_16" alt="添加参数构建"></td>
                            <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/dcf71ff7d64e4b68987a812108afce3a.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbG92b2Jpbi5naXRodWIuaW8=,size_20,color_FFFFFF,t_70,g_se,x_16" alt="选择标签"></td>
                          </tr>
                        </tbody>
                      </table>
                    </li>
                    <li>
                      <p>修改<code>构建</code></p>
                      <table>
                        <thead>
                          <tr>
                            <th align="center">删除初始的<hanla></hanla><code>maven</code></th>
                            <th align="center">选择为脚本<hanla></hanla><code>shell</code></th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr>
                            <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/bedf5611f4ad47479ed0296afe34cdf9.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbG92b2Jpbi5naXRodWIuaW8=,size_20,color_FFFFFF,t_70,g_se,x_16" alt="删除初始的maven"></td>
                            <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/91f8aca23c084cd7b83e12ba33606ddc.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbG92b2Jpbi5naXRodWIuaW8=,size_20,color_FFFFFF,t_70,g_se,x_16" alt="shell"></td>
                          </tr>
                        </tbody>
                      </table>
                      <ul>
                        <li>
                          <p>编写<hanla></hanla><code>shell</code></p>
                          <figure class="highlight shell">
                            <table>
                              <tbody>
                                <tr>
                                  <td class="gutter">
                                    <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre>
                                  </td>
                                  <td class="code">
                                    <pre><span class="line">echo $Tag</span><br><span class="line">cd /var/jenkins_home/workspace/Test-CD</span><br><span class="line">git checkout $Tag</span><br><span class="line">git pull origin $Tag</span><br><span class="line">/var/jenkins_home/maven/apache-maven-3.6.3/bin/mvn clean package</span><br></pre>
                                  </td>
                                </tr>
                              </tbody>
                            </table>
                          </figure>
                          <table>
                            <thead>
                              <tr>
                                <th align="center">容器内<hanla></hanla><code>maven</code></th>
                                <th></th>
                              </tr>
                            </thead>
                            <tbody>
                              <tr>
                                <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/37518c4b04dd4fd99bc631fc5a281e14.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbG92b2Jpbi5naXRodWIuaW8=,size_20,color_FFFFFF,t_70,g_se,x_16" alt="容器内maven"></td>
                                <td></td>
                              </tr>
                            </tbody>
                          </table>
                        </li>
                      </ul>
                    </li>
                    <li>
                      <p>构建后配置</p>
                    </li>
                  </ul>
                </li>
                <li>
                  <p>构建项目成功后,<hanla></hanla>需要将内容发布到目标服务器</p>
                </li>
                <li>
                  <p>修改程序代码</p>
                </li>
                <li>
                  <p>测试</p>
                </li>
              </ul>
            </li>
          </ul>
          <h4 id="GITLAB-删除不需要的远程仓库"><a href="#GITLAB-删除不需要的远程仓库" class="headerlink" title="GITLAB-删除不需要的远程仓库"></a>GITLAB-删除不需要的远程仓库</h4>
          <ul>
            <li>
              <p>删除位置路径</p>
              <figure class="highlight shell">
                <table>
                  <tbody>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><hanla></hanla>进入项目 =&gt; 点击左侧导航栏设置 =&gt; 通用 =&gt; Advanced(展开) =&gt; 下拉 =&gt; 删除<hanla></hanla>(输入红色标注内容)</span><br></pre>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </figure>
              <ul>
                <li>
                  <p>演示</p>
                  <table>
                    <thead>
                      <tr>
                        <th align="center"><code>gitlab</code>
                          <hanla></hanla>仓库删除
                        </th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td align="center"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/0169003a19e146fcba01c406b8195d11.gif#pic_center" alt="gitlab仓库删除"></td>
                      </tr>
                    </tbody>
                  </table>
                </li>
              </ul>
            </li>
          </ul>
          <h4 id="Docker-快速安装"><a href="#Docker-快速安装" class="headerlink" title="Docker-快速安装"></a>Docker-快速安装</h4>
          <ul>
            <li>
              <p><code>vim docker-install.sh</code></p>
              <figure class="highlight properties">
                <table>
                  <tbody>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="attr">echo</span> <span class="string">-e "\e[1m\e[4m\e[34minto.........................................................\e[0m\n"</span></span><br><span class="line"></span><br><span class="line"><span class="attr">echo</span> <span class="string">-e "\e[1m\e[4m\e[34minto remove docker...........\e[0m"</span></span><br><span class="line"><span class="attr">sudo</span> <span class="string">yum remove docker \</span></span><br><span class="line"><span class="string">                 docker-client \</span></span><br><span class="line"><span class="string">                 docker-client-latest \</span></span><br><span class="line"><span class="string">                 docker-common \</span></span><br><span class="line"><span class="string">                 docker-latest \</span></span><br><span class="line"><span class="string">                 docker-latest-logrotate \</span></span><br><span class="line"><span class="string">                 docker-logrotate \</span></span><br><span class="line"><span class="string">                 docker-engine</span></span><br><span class="line"></span><br><span class="line"><span class="attr">echo</span> <span class="string">-e "\e[1m\e[4m\e[34minto download utils...........\e[0m\n"		 </span></span><br><span class="line"><span class="attr">yum</span> <span class="string">install -y yum-utils  device-mapper-persistent-data  lvm2</span></span><br><span class="line"></span><br><span class="line"><span class="attr">echo</span> <span class="string">-e "\e[1m\e[4m\e[34minto add repo...........\e[0m\n"		 </span></span><br><span class="line"><span class="attr">sudo</span> <span class="string">yum-config-manager --add-repo https://mirrors.ustc.edu.cn/docker-ce/linux/centos/docker-ce.repo</span></span><br><span class="line"></span><br><span class="line"><span class="attr">echo</span> <span class="string">-e "\e[1m\e[4m\e[34minto yum makecache...........\e[0m\n"		 </span></span><br><span class="line"><span class="attr">yum</span> <span class="string">makecache fast</span></span><br><span class="line"></span><br><span class="line"><span class="attr">echo</span> <span class="string">-e "\e[1m\e[4m\e[34minto install docker-ce...........\e[0m\n"	</span></span><br><span class="line"><span class="attr">sudo</span> <span class="string">yum install -y docker-ce docker-ce-cli containerd.io docker-compose-plugin</span></span><br><span class="line"></span><br><span class="line"><span class="attr">echo</span> <span class="string">-e "\e[1m\e[4m\e[34minto config daemon.json...........\e[0m\n"	</span></span><br><span class="line"><span class="attr">sudo</span> <span class="string">mkdir -p /etc/docker</span></span><br><span class="line"><span class="attr">sudo</span> <span class="string">tee /etc/docker/daemon.json &lt;&lt;-'EOF'</span></span><br><span class="line"><span class="attr">{</span></span><br><span class="line">    <span class="attr">"registry-mirrors"</span>:<span class="string">[</span></span><br><span class="line">    	<span class="attr">"https</span>:<span class="string">//eyy45bvx.mirror.aliyuncs.com",</span></span><br><span class="line">        <span class="attr">"https</span>:<span class="string">//hub-mirror.c.163.com",</span></span><br><span class="line">        <span class="attr">"https</span>:<span class="string">//registry.aliyuncs.com",</span></span><br><span class="line">        <span class="attr">"https</span>:<span class="string">//registry.docker-cn.com",</span></span><br><span class="line">        <span class="attr">"https</span>:<span class="string">//docker.mirrors.ustc.edu.cn"</span></span><br><span class="line">    <span class="attr">]</span></span><br><span class="line"><span class="attr">}</span></span><br><span class="line"><span class="attr">EOF</span></span><br><span class="line"></span><br><span class="line"><span class="attr">echo</span> <span class="string">-e "\e[1m\e[4m\e[34minto daemon-reload...........\e[0m\n"	</span></span><br><span class="line"><span class="attr">sudo</span> <span class="string">systemctl daemon-reload</span></span><br><span class="line"></span><br><span class="line"><span class="attr">echo</span> <span class="string">-e "\e[1m\e[4m\e[34minto restart docker...........\e[0m\n"	</span></span><br><span class="line"><span class="attr">sudo</span> <span class="string">systemctl restart docker</span></span><br><span class="line"><span class="attr">echo</span> <span class="string">-e "\e[1m\e[4m\e[34mend.........................................................\e[0m\n"	</span></span><br></pre>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </figure>
            </li>
          </ul>
        </article>
        <div class="post-copyright">
          <div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://coderitl.github.io">coder-itl</a></span></div>
          <div class="post-copyright__type"><span class="post-copyright-meta">
              <hanla></hanla>文章链接:
            </span><span class="post-copyright-info"><a target="_blank" rel="external nofollow noopener noreferrer" href="https://www.nesxc.com/post/hexocc.html">https://www.nesxc.com/post/hexocc.html</a></span></div>
          <div class="post-copyright__notice"><span class="post-copyright-meta">
              <hanla></hanla>版权声明:
            </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="external nofollow noopener noreferrer">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://coderitl.github.io" target="_blank">coder-itl</a>！</span></div>
        </div>
        <div class="tag_share">
          <div class="post-meta__tag-list"></div>
          <div class="post_share">
            <div class="social-share" data-image="ttps://i.328888.xyz/2023/04/01/i2X7Tt.png" data-sites="facebook,twitter,wechat,weibo,qq"></div>
            <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'">
            <script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer=""></script>
          </div>
        </div>
        <nav class="pagination-post" id="pagination">
          <div class="prev-post pull-left"><a href="/2022/02/09/10336.html" title="GITHUB-Pages-绑定自定义域名"><img class="cover" src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/coderitl/hiddenContent@v1.0.6/bbg/24.jpg" onerror="onerror=null;src='/null'" alt="cover of previous post">
              <div class="pagination-info">
                <div class="label">上一篇<hanla></hanla>
                </div>
                <div class="prev_info">GITHUB-Pages-绑定自定义域名</div>
              </div>
            </a></div>
          <div class="next-post pull-right"><a href="/2022/02/08/24473.html" title="GIT-版本控制"><img class="cover" src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img-blog.csdnimg.cn/b5b90619cdb940cf8f63dd5e20c74942.png" onerror="onerror=null;src='/null'" alt="cover of next post">
              <div class="pagination-info">
                <div class="label">下一篇<hanla></hanla>
                </div>
                <div class="next_info">GIT-版本控制</div>
              </div>
            </a></div>
        </nav>
        <hr>
        <div id="post-comment">
          <div class="comment-head">
            <div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论<hanla></hanla></span></div>
          </div>
          <div class="comment-wrap">
            <div>
              <div id="twikoo-wrap"></div>
            </div>
          </div>
        </div>
      </div>
      <div class="aside-content" id="aside-content">
        <div class="card-widget card-info">
          <div class="is-center">
            <div class="avatar-img"><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://i.328888.xyz/2023/03/19/MJUXa.jpeg" onerror="this.onerror=null;this.src='https://i.328888.xyz/2023/03/20/P3kfC.gif'" alt="avatar"></div>
            <div class="author-info__name">coder-itl</div>
            <div class="author-info__description">To read without reflecting is like eating without digesting.</div>
          </div>
          <div class="card-info-data site-data is-center"><a href="/archives/">
              <div class="headline">
                <hanla></hanla>文章<hanla></hanla>
              </div>
              <div class="length-num">119</div>
            </a><a href="/tags/">
              <div class="headline">
                <hanla></hanla>标签<hanla></hanla>
              </div>
              <div class="length-num">21</div>
            </a><a href="/categories/">
              <div class="headline">
                <hanla></hanla>分类<hanla></hanla>
              </div>
              <div class="length-num">13</div>
            </a></div><a id="card-info-btn" target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a>
        </div>
        <div class="card-widget card-announcement">
          <div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>
              <hanla></hanla>公告
            </span></div>
          <div class="announcement_content">本站所有图片来源于网络,<hanla></hanla>侵权请添加管理员删除【3327511395@qq.com】!</div>
        </div>
        <div class="sticky_layout">
          <div class="card-widget" id="card-toc">
            <div class="item-headline"><i class="fas fa-stream"></i><span>
                <hanla></hanla>目录<hanla></hanla>
              </span><span class="toc-percentage"></span></div>
            <div class="toc-content">
              <ol class="toc">
                <li class="toc-item toc-level-3"><a class="toc-link" href="#Docker-%E5%BA%94%E7%94%A8%E5%AE%B9%E5%99%A8"><span class="toc-number">1.</span> <span class="toc-text">Docker-应用容器<hanla></hanla></span></a>
                  <ol class="toc-child">
                    <li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85Docker"><span class="toc-number">1.1.</span> <span class="toc-text">安装<hanla></hanla>Docker</span></a></li>
                    <li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8D%B8%E8%BD%BDDocker"><span class="toc-number">1.2.</span> <span class="toc-text">卸载<hanla></hanla>Docker</span></a></li>
                    <li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%AD%E5%A4%AE%E4%BB%93%E5%BA%93"><span class="toc-number">1.3.</span> <span class="toc-text">中央仓库<hanla></hanla></span></a></li>
                    <li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%95%9C%E5%83%8F%E7%9A%84%E6%93%8D%E4%BD%9C"><span class="toc-number">1.4.</span> <span class="toc-text">镜像的操作<hanla></hanla></span></a></li>
                    <li class="toc-item toc-level-4"><a class="toc-link" href="#Run-%E6%B5%81%E7%A8%8B"><span class="toc-number">1.5.</span> <span class="toc-text">Run-流程<hanla></hanla></span></a></li>
                    <li class="toc-item toc-level-4"><a class="toc-link" href="#Docker-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4"><span class="toc-number">1.6.</span> <span class="toc-text">Docker-常用命令<hanla></hanla></span></a>
                      <ol class="toc-child">
                        <li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B8%AE%E5%8A%A9%E5%90%AF%E5%8A%A8%E7%B1%BB%E5%91%BD%E4%BB%A4"><span class="toc-number">1.6.1.</span> <span class="toc-text">帮助启动类命令<hanla></hanla></span></a></li>
                        <li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%95%9C%E5%83%8F%E5%91%BD%E4%BB%A4"><span class="toc-number">1.6.2.</span> <span class="toc-text">镜像命令<hanla></hanla></span></a></li>
                        <li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AE%B9%E5%99%A8%E5%91%BD%E4%BB%A4"><span class="toc-number">1.6.3.</span> <span class="toc-text">容器命令<hanla></hanla></span></a></li>
                      </ol>
                    </li>
                    <li class="toc-item toc-level-4"><a class="toc-link" href="#Docker-%E9%95%9C%E5%83%8F"><span class="toc-number">1.7.</span> <span class="toc-text">Docker-镜像<hanla></hanla></span></a></li>
                    <li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%95%9C%E5%83%8F%E5%8F%91%E5%B8%83"><span class="toc-number">1.8.</span> <span class="toc-text">镜像发布<hanla></hanla></span></a>
                      <ol class="toc-child">
                        <li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%85%AC%E6%9C%8D"><span class="toc-number">1.8.1.</span> <span class="toc-text">公服<hanla></hanla></span></a></li>
                        <li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%A7%81%E6%9C%8D"><span class="toc-number">1.8.2.</span> <span class="toc-text">私服<hanla></hanla></span></a></li>
                      </ol>
                    </li>
                    <li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%B9%E5%99%A8%E6%95%B0%E6%8D%AE%E5%8D%B7"><span class="toc-number">1.9.</span> <span class="toc-text">容器数据卷<hanla></hanla></span></a></li>
                    <li class="toc-item toc-level-4"><a class="toc-link" href="#Docker-%E5%B8%B8%E8%A7%84%E5%AE%89%E8%A3%85"><span class="toc-number">1.10.</span> <span class="toc-text">Docker-常规安装<hanla></hanla></span></a>
                      <ol class="toc-child">
                        <li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%80%BB%E4%BD%93%E6%AD%A5%E9%AA%A4"><span class="toc-number">1.10.1.</span> <span class="toc-text">总体步骤<hanla></hanla></span></a></li>
                        <li class="toc-item toc-level-5"><a class="toc-link" href="#Tomcat"><span class="toc-number">1.10.2.</span> <span class="toc-text">Tomcat</span></a></li>
                        <li class="toc-item toc-level-5"><a class="toc-link" href="#MYSQL"><span class="toc-number">1.10.3.</span> <span class="toc-text">MYSQL</span></a></li>
                        <li class="toc-item toc-level-5"><a class="toc-link" href="#Redis"><span class="toc-number">1.10.4.</span> <span class="toc-text">Redis</span></a></li>
                      </ol>
                    </li>
                    <li class="toc-item toc-level-4"><a class="toc-link" href="#NotePad"><span class="toc-number">1.11.</span> <span class="toc-text">NotePad++</span></a></li>
                    <li class="toc-item toc-level-4"><a class="toc-link" href="#MYSQL-%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6-Docker"><span class="toc-number">1.12.</span> <span class="toc-text">MYSQL-主从复制-Docker</span></a></li>
                    <li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85Redis%E9%9B%86%E7%BE%A4-%E5%88%86%E5%B8%83%E5%BC%8F%E5%AD%98%E5%82%A8%E6%A1%88%E4%BE%8B%E7%9C%9F%E9%A2%98"><span class="toc-number">1.13.</span> <span class="toc-text">安装<hanla></hanla>Redis<hanla></hanla>集群-分布式存储案例真题<hanla></hanla></span></a></li>
                    <li class="toc-item toc-level-4"><a class="toc-link" href="#Dockerfile"><span class="toc-number">1.14.</span> <span class="toc-text">Dockerfile</span></a></li>
                    <li class="toc-item toc-level-4"><a class="toc-link" href="#Docker-%E7%BD%91%E7%BB%9C"><span class="toc-number">1.15.</span> <span class="toc-text">Docker-网络<hanla></hanla></span></a></li>
                    <li class="toc-item toc-level-4"><a class="toc-link" href="#Docker-Compose"><span class="toc-number">1.16.</span> <span class="toc-text">Docker-Compose</span></a></li>
                    <li class="toc-item toc-level-4"><a class="toc-link" href="#Docker-%E8%BD%BB%E9%87%8F%E7%BA%A7%E5%8F%AF%E8%A7%86%E5%8C%96%E5%B7%A5%E5%85%B7-Portainer"><span class="toc-number">1.17.</span> <span class="toc-text">Docker-轻量级可视化工具 Portainer</span></a></li>
                    <li class="toc-item toc-level-4"><a class="toc-link" href="#Docker-CI%E3%80%81CD"><span class="toc-number">1.18.</span> <span class="toc-text">Docker-CI、CD</span></a>
                      <ol class="toc-child">
                        <li class="toc-item toc-level-5"><a class="toc-link" href="#CI"><span class="toc-number">1.18.1.</span> <span class="toc-text">CI</span></a></li>
                        <li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90"><span class="toc-number">1.18.2.</span> <span class="toc-text">持续集成<hanla></hanla></span></a></li>
                        <li class="toc-item toc-level-5"><a class="toc-link" href="#http%E8%A7%A3%E5%86%B3%E8%BF%9E%E6%8E%A5"><span class="toc-number">1.18.3.</span> <span class="toc-text">http<hanla></hanla>解决连接<hanla></hanla></span></a></li>
                        <li class="toc-item toc-level-5"><a class="toc-link" href="#CD-Jenkins"><span class="toc-number">1.18.4.</span> <span class="toc-text">CD(Jenkins)</span></a></li>
                      </ol>
                    </li>
                    <li class="toc-item toc-level-4"><a class="toc-link" href="#GITLAB-%E5%88%A0%E9%99%A4%E4%B8%8D%E9%9C%80%E8%A6%81%E7%9A%84%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93"><span class="toc-number">1.19.</span> <span class="toc-text">GITLAB-删除不需要的远程仓库<hanla></hanla></span></a></li>
                    <li class="toc-item toc-level-4"><a class="toc-link" href="#Docker-%E5%BF%AB%E9%80%9F%E5%AE%89%E8%A3%85"><span class="toc-number">1.20.</span> <span class="toc-text">Docker-快速安装</span></a></li>
                  </ol>
                </li>
              </ol>
            </div>
          </div>
        </div>
      </div>
    </main>
    <footer id="footer" style="background: transparent">
      <div id="footer-wrap">
        <div class="copyright">©2020 - 2023 By coder-itl</div>
        <div class="framework-info"><span>
            <hanla></hanla>框架
          </span><a target="_blank" rel="external nofollow noopener noreferrer" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div>
        <div class="footer_custom_text">
          <p><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img.shields.io/badge/Frame-Hexo-orange">&nbsp;<img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img.shields.io/badge/Theme-Buffterfly-blue">&nbsp;<img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img.shields.io/badge/CDN-jsDeliver-blueviolet">&nbsp;<img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img.shields.io/badge/Source-Github-9cf">&nbsp;<img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img.shields.io/badge/Theme-Matery-ff69b4">&nbsp;<img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img.shields.io/badge/Python-Python-success">&nbsp;<img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img.shields.io/badge/Python-Flask-red"></p>
          <p><img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img.shields.io/badge/Theme-Butterfly-red?logo=Castorama&amp;logoWidth=18">&nbsp;<img src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://img.shields.io/badge/Frame-Hexo-blue?logo=Grunt&amp;logoWidth=18"></p>
        </div>
      </div>
    </footer>
  </div>
  <div id="rightside">
    <div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div>
    <div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div>
  </div>
  <div id="local-search">
    <div class="search-dialog">
      <nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav>
      <div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span> 数据库加载中<hanla></hanla></span></div>
      <div class="search-wrap">
        <div id="local-search-input">
          <div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"></div>
        </div>
        <hr>
        <div id="local-search-results"></div>
      </div>
    </div>
    <div id="search-mask"></div>
  </div>
  <div>
    <script src="/js/utils.js"></script>
    <script src="/js/main.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script>
    <script src="/js/search/local-search.js"></script>
    <div class="js-pjax">
      <script>
        (() =>
        {
          const init = () =>
          {
            twikoo.init(Object.assign(
            {
              el: '#twikoo-wrap',
              envId: 'https://twikoo-jlw0ln3jv-coderitl.vercel.app/',
              region: 'ap-shanghai',
              onCommentLoaded: function ()
              {
                btf.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
              }
            }, null))
          }
          const getCount = () =>
          {
            const countELement = document.getElementById('twikoo-count')
            if (!countELement) return
            twikoo.getCommentsCount(
            {
              envId: 'https://twikoo-jlw0ln3jv-coderitl.vercel.app/',
              region: 'ap-shanghai',
              urls: [window.location.pathname],
              includeReply: false
            }).then(function (res)
            {
              countELement.innerText = res[0].count
            }).catch(function (err)
            {
              console.error(err);
            });
          }
          const runFn = () =>
          {
            init()
          }
          const loadTwikoo = () =>
          {
            if (typeof twikoo === 'object')
            {
              setTimeout(runFn, 0)
              return
            }
            getScript('https://cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js').then(runFn)
          }
          if ('Twikoo' === 'Twikoo' || !false)
          {
            if (false) btf.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
            else loadTwikoo()
          }
          else
          {
            window.loadOtherComment = () =>
            {
              loadTwikoo()
            }
          }
        })()

      </script>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script>
    <script defer="" src="https://cdn.jsdelivr.net/npm/hexo-theme-volantis@latest/source/js/issues.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.11"></script>
    <script data-pjax="" src="https://cdn.jsdelivr.net/gh/coderitl/FileJsDeliver@v1.1.13/swiper/swiper.min.js"></script>
    <script data-pjax="" src="https://cdn.jsdelivr.net/gh/coderitl/FileJsDeliver@v1.1.13/swiper/swiperindex.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/graingert/wow@1.3.0/dist/wow.min.js"></script>
    <script src="https://www.youxiaohou.com/mactype.user.js"></script>
    <script defer="defer" id="fluttering_ribbon" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-fluttering-ribbon.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script>
    <script>
      let pjaxSelectors = ["head > title", "#config-diff", "#body-wrap", "#rightside-config-hide", "#rightside-config-show", ".js-pjax"]
      var pjax = new Pjax(
      {
        elements: 'a:not([target="_blank"])',
        selectors: pjaxSelectors,
        cacheBust: false,
        analytics: false,
        scrollRestoration: false
      })
      document.addEventListener('pjax:send', function ()
      {
        // removeEventListener scroll 
        window.tocScrollFn && window.removeEventListener('scroll', window.tocScrollFn)
        window.scrollCollect && window.removeEventListener('scroll', scrollCollect)
        document.getElementById('rightside').style.cssText = "opacity: ''; transform: ''"
        if (window.aplayers)
        {
          for (let i = 0; i < window.aplayers.length; i++)
          {
            if (!window.aplayers[i].options.fixed)
            {
              window.aplayers[i].destroy()
            }
          }
        }
        typeof typed === 'object' && typed.destroy()
        //reset readmode
        const $bodyClassList = document.body.classList
        $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
        typeof disqusjs === 'object' && disqusjs.destroy()
      })
      document.addEventListener('pjax:complete', function ()
      {
        window.refreshFn()
        document.querySelectorAll('script[data-pjax]').forEach(item =>
        {
          const newScript = document.createElement('script')
          const content = item.text || item.textContent || item.innerHTML || ""
          Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
          newScript.appendChild(document.createTextNode(content))
          item.parentNode.replaceChild(newScript, item)
        })
        GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()
        typeof chatBtnFn === 'function' && chatBtnFn()
        typeof panguInit === 'function' && panguInit()
        // google analytics
        typeof gtag === 'function' && gtag('config', '',
        {
          'page_path': window.location.pathname
        });
        // baidu analytics
        typeof _hmt === 'object' && _hmt.push(['_trackPageview', window.location.pathname]);
        typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()
        // prismjs
        typeof Prism === 'object' && Prism.highlightAll()
      })
      document.addEventListener('pjax:error', (e) =>
      {
        if (e.request.status === 404)
        {
          pjax.loadUrl('/404.html')
        }
      })

    </script>
    <script async="" data-pjax="" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  </div><!-- hexo injector body_end start -->
  <script data-pjax="">
    function history_calendar_injector_config()
    {
      var parent_div_git = document.getElementsByClassName('sticky_layout')[0];
      var item_html = '<div class="card-widget card-history"><div class="card-content"><div class="item-headline"><i class="fas fa-clock fa-spin"></i><span><hanla></hanla>那年今日<hanla></hanla></span></div><div id="history-baidu" style="height: 100px;overflow: hidden"><div class="history_swiper-container" id="history-container" style="width: 100%;height: 100%"><div class="swiper-wrapper" id="history_container_wrapper" style="height:20px"></div></div></div></div>';
      console.log('已挂载<hanla></hanla>history_calendar')
      // parent_div_git.innerHTML=item_html+parent_div_git.innerHTML // 无报错，但不影响使用<hanla></hanla>(支持<hanla></hanla>pjax<hanla></hanla>跳转)
      parent_div_git.insertAdjacentHTML("afterbegin", item_html) // 有报错，但不影响使用<hanla></hanla>(支持<hanla></hanla>pjax<hanla></hanla>跳转)
    }
    if (document.getElementsByClassName('sticky_layout')[0] & amp; & amp;
      (location.pathname === 'all' || 'all' === 'all'))
    {
      history_calendar_injector_config()
    } < /div>

  </script>
  <script data-pjax="" src="https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.js"></script>
  <script data-pjax="" src="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-card-history/baiduhistory/js/main.js"></script>
  <script data-pjax="">
    function butterfly_swiper_injector_config()
    {
      var parent_div_git = document.getElementById('recent-posts');
      var item_html = '<div class="recent-post-item" style="height: auto;width: 100%"><div class="blog-slider swiper-container-fade swiper-container-horizontal" id="swiper_container"><div class="blog-slider__wrp swiper-wrapper" style="transition-duration: 0ms;"><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;2022/08/13/15497.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/coderitl/Access@v1.0/medias/featureimages/7.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"></a><div class="blog-slider__content"><span class="blog-slider__code">2022-08-13</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;2022/08/13/15497.html&quot;);" href="javascript:void(0);" alt=""><hanla></hanla>文件上传下载实战<hanla></hanla></a><div class="blog-slider__text"><hanla></hanla>再怎么看我也不知道怎么描述它的啦！</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;2022/08/13/15497.html&quot;);" href="javascript:void(0);" alt=""><hanla></hanla>详情       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;2022/09/04/27324.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/coderitl/Access@v1.0/medias/featureimages/8.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"></a><div class="blog-slider__content"><span class="blog-slider__code">2022-09-04</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;2022/09/04/27324.html&quot;);" href="javascript:void(0);" alt="">Docker<hanla></hanla>安装<hanla></hanla>Oracle</a><div class="blog-slider__text"><hanla></hanla>再怎么看我也不知道怎么描述它的啦！</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;2022/09/04/27324.html&quot;);" href="javascript:void(0);" alt=""><hanla></hanla>详情       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;2022/11/30/42622.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://i.328888.xyz/2023/04/01/i2p4AN.jpeg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"></a><div class="blog-slider__content"><span class="blog-slider__code">2022-11-30</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;2022/11/30/42622.html&quot;);" href="javascript:void(0);" alt="">SpringCloud</a><div class="blog-slider__text"><hanla></hanla>再怎么看我也不知道怎么描述它的啦！</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;2022/11/30/42622.html&quot;);" href="javascript:void(0);" alt=""><hanla></hanla>详情       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;2022/12/29/2485.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "https://i.328888.xyz/2023/03/20/P3kfC.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/coderitl/Access@v1.0/medias/featureimages/2.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"></a><div class="blog-slider__content"><span class="blog-slider__code">2022-12-29</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;2022/12/29/2485.html&quot;);" href="javascript:void(0);" alt="">Ubuntu-系统<hanla></hanla></a><div class="blog-slider__text"><hanla></hanla>再怎么看我也不知道怎么描述它的啦！</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;2022/12/29/2485.html&quot;);" href="javascript:void(0);" alt=""><hanla></hanla>详情       </a></div></div></div><div class="blog-slider__pagination swiper-pagination-clickable swiper-pagination-bullets"></div></div></div>';
      console.log('已挂载<hanla></hanla>butterfly_swiper')
      parent_div_git.insertAdjacentHTML("afterbegin", item_html)
    }
    var elist = 'undefined'.split(',');
    var cpage = location.pathname;
    var epage = 'all';
    var flag = 0;
    for (var i = 0; i

  </script>
  <script defer="" src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.js"></script>
  <script defer="" data-pjax="" src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper_init.js"></script>
  <script data-pjax="" src="https://npm.elemecdn.com/hexo-filter-gitcalendar/lib/gitcalendar.js"></script>
  <script data-pjax="">
    function gitcalendar_injector_config()
    {
      var parent_div_git = document.getElementById('recent-posts');
      var item_html = '<div class="recent-post-item" id="gitcalendarBar" style="width:100%;height:auto;padding:10px;"><style>#git_container{min-height: 280px}@media screen and (max-width:650px) {#git_container{min-height: 0px}}</style><div id="git_loading" style="width:10%;height:100%;margin:0 auto;display: block;"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 50 50" style="enable-background:new 0 0 50 50" xml:space="preserve"><path fill="#d0d0d0" d="M25.251,6.461c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615V6.461z" transform="rotate(275.098 25 25)"><animateTransform attributeType="xml" attributeName="transform" type="rotate" from="0 25 25" to="360 25 25" dur="0.6s" repeatCount="indefinite"></animateTransform></path></svg><style>#git_container{display: none;}</style></div><div id="git_container"></div></div>';
      parent_div_git.insertAdjacentHTML("afterbegin", item_html)
      console.log('已挂载<hanla></hanla>gitcalendar')
    }
    if (document.getElementById('recent-posts') && (location.pathname === '/' || '/' === 'all'))
    {
      gitcalendar_injector_config()
      GitCalendarInit("https://python-github-calenda-4cx5gxbnc-coderitl.vercel.app/api?coderitl", ['#e4dfd7', '#f9f4dc', '#f7e8aa', '#f7e8aa', '#f8df72', '#fcd217', '#fcc515', '#f28e16', '#fb8b05', '#d85916', '#f43e06'], 'coderitl')
    }

  </script>
  <script async="" src="//at.alicdn.com/t/font_2032782_8d5kxvn09md.js"></script><!-- hexo injector body_end end -->
  <script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script>
  <script>
    L2Dwidget.init(
    {
      "pluginModelPath": "assets/",
      "model":
      {
        "jsonPath": "/live2dw/assets/shizuku.model.json"
      },
      "display":
      {
        "position": "left",
        "width": 150,
        "height": 300
      },
      "mobile":
      {
        "show": false
      },
      "rect":
      {
        "opacity": 0.7
      },
      "log": false,
      "pluginJsPath": "lib/",
      "pluginRootPath": "live2dw/",
      "tagMode": false
    });

  </script>



</body></html>